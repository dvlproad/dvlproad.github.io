<hr>
<p>title: 切为H5的标准<br>date: 2019-04-20 17:05:41<br>categories: </p>
<ul>
<li>Architecture<br>tags:</li>
<li>Architecture</li>
</ul>
<hr>
<p>[toc]</p>
<h1 id="Flutter代码开发规范"><a href="#Flutter代码开发规范" class="headerlink" title="Flutter代码开发规范"></a>Flutter代码开发规范</h1><h2 id="一、目录"><a href="#一、目录" class="headerlink" title="一、目录"></a>一、目录</h2><p>目录结构请查看：<a href="./项目目录结构规范.md">项目目录结构规范</a></p>
<h2 id="二、文件-类命名"><a href="#二、文件-类命名" class="headerlink" title="二、文件+类命名"></a>二、文件+类命名</h2><h3 id="1、类文件命名"><a href="#1、类文件命名" class="headerlink" title="1、类文件命名"></a>1、类文件命名</h3><p>查看dart源码发现，<strong>源文件名都是小写英文加上下划线组成</strong>，如app_bar.dart；</p>
<p>使用小写加下划线来命名库和源文件</p>
<pre><code class="dart"><span class="comment">// good </span>
app_bar.dart

<span class="comment">// bad</span>
AppBar.dart
</code></pre>
<h3 id="2、资源文件命名"><a href="#2、资源文件命名" class="headerlink" title="2、资源文件命名"></a>2、资源文件命名</h3><p>命名：功能名称 _ 控件类型 _ 自定义参数*(标准或者大字版).png</p>
<pre><code class="shell">标准：share_btn_weixin.png
选中：share_btn_weixin_selected.png
</code></pre>
<h2 id="三、类"><a href="#三、类" class="headerlink" title="三、类"></a>三、类</h2><h3 id="1、class命名"><a href="#1、class命名" class="headerlink" title="1、class命名"></a>1、class命名</h3><p>一般情况下，<strong>类名是源文件名的大驼峰写法</strong>，如源文件app_bar.dart，类名AppBar；源文件bottom_app_bar，类名BottomAppBar；</p>
<pre><code class="dart"><span class="class"><span class="keyword">class</span> <span class="title">AppBar</span> </span>{

}
</code></pre>
<h3 id="2、import"><a href="#2、import" class="headerlink" title="2、import"></a>2、import</h3><h4 id="2-1、import顺序"><a href="#2-1、import顺序" class="headerlink" title="2.1、import顺序"></a>2.1、import顺序</h4><p>为了使你的文件前言保持整洁，我们有规定的命令，指示应该出现在其中。每个“部分”应该用空行分隔。</p>
<pre><code class="dart"><span class="comment">// ①dart库</span>
  <span class="keyword">import</span> <span class="string">'dart:async'</span>;
  <span class="keyword">import</span> <span class="string">'dart:html'</span>;

<span class="comment">// ②三方库</span>
  <span class="keyword">import</span> <span class="string">'package:bar/bar.dart'</span>;
  <span class="keyword">import</span> <span class="string">'package:foo/foo.dart'</span>;

<span class="comment">// ③项目文件</span>
  <span class="keyword">import</span> <span class="string">'package:my_package/util.dart'</span>;

<span class="comment">// ④相对文件</span>
  <span class="keyword">export</span> <span class="string">'src/error.dart'</span>;
</code></pre>
<h4 id="2-2、import-as"><a href="#2-2、import-as" class="headerlink" title="2.2、import as"></a>2.2、import as</h4><p>使用小写加下划线来命名导入前缀</p>
<pre><code class="dart"><span class="comment">// good</span>
  <span class="keyword">import</span> <span class="string">'dart:math'</span> <span class="keyword">as</span> math; 
  <span class="keyword">import</span> <span class="string">'package:angular_components/angular_components'</span>
      <span class="keyword">as</span> angular_components;

<span class="comment">// bad</span>
  <span class="keyword">import</span> <span class="string">'dart:math'</span> <span class="keyword">as</span> Math;
  <span class="keyword">import</span> <span class="string">'package:angular_components/angular_components'</span>
      <span class="keyword">as</span> angularComponents;
</code></pre>
<h3 id="3、构造函数"><a href="#3、构造函数" class="headerlink" title="3、构造函数"></a>3、构造函数</h3><h4 id="3-1、构造函数定义"><a href="#3-1、构造函数定义" class="headerlink" title="3.1、构造函数定义"></a>3.1、构造函数定义</h4><p>构造函数</p>
<pre><code class="dart"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>{
  <span class="built_in">num</span> x, y;

  <span class="comment">// good</span>
  Point2(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);

  <span class="comment">// bad</span>
  Point2(<span class="built_in">num</span> x, <span class="built_in">num</span> y) {
      <span class="keyword">this</span>.x = x;
      <span class="keyword">this</span>.y = y;
    }
}
</code></pre>
<h4 id="3-2、构造函数设计技巧"><a href="#3-2、构造函数设计技巧" class="headerlink" title="3.2、构造函数设计技巧"></a>3.2、构造函数设计技巧</h4><pre><code class="dart">
<span class="class"><span class="keyword">class</span> <span class="title">WishPublishPage</span> <span class="keyword">extends</span> <span class="title">BJHBasePage</span> </span>{
  <span class="keyword">final</span> <span class="built_in">bool</span> isUpdateBusiness;
  <span class="keyword">final</span> WishDetailModel wishDetailModel;
  <span class="keyword">final</span> <span class="built_in">bool</span> reEditPublish;
  <span class="keyword">final</span> <span class="built_in">Function</span> backCallBack;<span class="comment">// 从哪个页面跳转过来的 用于区分游戏中心的跳转</span>

  WishPublishPage({
    Key key,
    <span class="keyword">this</span>.isUpdateBusiness = <span class="keyword">false</span>,
    <span class="keyword">this</span>.reEditPublish = <span class="keyword">false</span>,
    <span class="keyword">this</span>.wishDetailModel,
    <span class="keyword">this</span>.backCallBack,
  }) : <span class="keyword">super</span>(key: key);

  WishPublishPage.fromOtherUser({
    Key key,
    <span class="keyword">this</span>.reEditPublish = <span class="keyword">false</span>,
    <span class="keyword">this</span>.isUpdateBusiness = <span class="keyword">false</span>,
    <span class="keyword">this</span>.wishDetailModel,
    <span class="built_in">List</span>&lt;WishGood&gt; selectGoodsList,
    <span class="keyword">this</span>.backCallBack,
  }) : <span class="keyword">super</span>(key: key) {
    wishDetailModel.wishGoods = selectGoodsList; <span class="comment">// 暂时只平移代码，不修改(原本可能有问题)</span>
  }

  <span class="meta">@override</span>
  _WishPublishPageState createState() =&gt; _WishPublishPageState();
}
</code></pre>
<h2 id="四、其他命名"><a href="#四、其他命名" class="headerlink" title="四、其他命名"></a>四、其他命名</h2><h4 id="1、常量、变量命名"><a href="#1、常量、变量命名" class="headerlink" title="1、常量、变量命名"></a>1、常量、变量命名</h4><p>使用小驼峰法命名</p>
<h3 id="1-1、常量"><a href="#1-1、常量" class="headerlink" title="1.1、常量"></a>1.1、常量</h3><pre><code class="dart"><span class="keyword">const</span> <span class="built_in">num</span> pi = <span class="number">3.14</span>;
<span class="keyword">const</span> <span class="built_in">int</span> defaultTimeout = <span class="number">1000</span>;
<span class="keyword">final</span> <span class="built_in">RegExp</span> urlScheme = <span class="built_in">RegExp</span>(<span class="string">'^([a-z]+)</span>
</code></pre>
<h3 id="1-2、变量"><a href="#1-2、变量" class="headerlink" title="1.2、变量"></a>1.2、变量</h3><pre><code class="dart"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; bookList;
<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; bookMap;
<span class="built_in">bool</span> isShowDetail;  <span class="comment">// 使用is开头+具体的业务场景命名</span>
</code></pre>
<p><strong>非特殊需要，禁止使用dynamic。（无法发挥空安全优势）</strong></p>
<pre><code class="dart"><span class="comment">// 错误代码</span>
<span class="keyword">dynamic</span> string1 = sp.getString();
<span class="keyword">if</span> ( string1.length == <span class="number">2</span> )

<span class="comment">// bugly报错</span>
string1 出现 <span class="keyword">null</span>

<span class="comment">// 正确修改</span>
<span class="built_in">String</span>? string1 = sp.getString();
<span class="keyword">if</span> ( string1 != <span class="keyword">null</span> &amp;&amp; string1!.length == <span class="number">2</span> )
</code></pre>
<h3 id="1-3、枚举命名"><a href="#1-3、枚举命名" class="headerlink" title="1.3、枚举命名"></a>1.3、枚举命名</h3><pre><code class="dart"><span class="comment">/* 枚举的用途 */</span>
<span class="keyword">enum</span> Direction {
    top, <span class="comment">//类型的用途 xxxx</span>
    left,<span class="comment">//类型的用途 xxxx</span>
}
</code></pre>
<h2 id="五、基础接口使用规范"><a href="#五、基础接口使用规范" class="headerlink" title="五、基础接口使用规范"></a>五、基础接口使用规范</h2><p>判空(不使用length)</p>
<pre><code class="dart"><span class="comment">// good: isEmpty/isNotEmpty</span>
    <span class="keyword">if</span> (lunchBox.isEmpty) <span class="keyword">return</span> <span class="string">'so hungry...'</span>;
    <span class="keyword">if</span> (words.isNotEmpty) <span class="keyword">return</span> words.join(<span class="string">' '</span>);

<span class="comment">// bad:length</span>
  <span class="keyword">if</span> (lunchBox.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">'so hungry...'</span>;
  <span class="keyword">if</span> (!words.isEmpty) <span class="keyword">return</span> words.join(<span class="string">' '</span>);
</code></pre>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2>