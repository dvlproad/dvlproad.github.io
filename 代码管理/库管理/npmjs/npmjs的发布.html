<hr>
<p>title: npmjs的发布<br>date: 2019-06-10 10:06:03<br>categories: </p>
<ul>
<li>npmjs<br>tags:</li>
<li>npmjs</li>
</ul>
<hr>
<h2 id="一、基本的操作"><a href="#一、基本的操作" class="headerlink" title="一、基本的操作"></a>一、基本的操作</h2><p><strong>npmjs的官网地址：<a href="https://www.npmjs.com">https://www.npmjs.com</a></strong></p>
<p>以上传本地的 <a href="/Users/lichaoqian/Project/TestNPM">~/Project/TestNPM</a> 为例。</p>
<h3 id="1、镜像的处理"><a href="#1、镜像的处理" class="headerlink" title="1、镜像的处理"></a>1、镜像的处理</h3><h4 id="1-1、查看npm当前登录源-使用的镜像"><a href="#1-1、查看npm当前登录源-使用的镜像" class="headerlink" title="1.1、查看npm当前登录源/使用的镜像"></a>1.1、查看npm当前登录源/使用的镜像</h4><pre><code class="shell">npm config get registry
</code></pre>
<h4 id="1-2、设置镜像"><a href="#1-2、设置镜像" class="headerlink" title="1.2、设置镜像"></a>1.2、设置镜像</h4><pre><code class="shell">npm config set registry https://registry.npmjs.org/                # 上传包必须使用原本的登录源
npm config set registry https://registry.npm.taobao.org/    # 原来错误的登录源
</code></pre>
<p>附：为了上传npm包能够成功，所以，如果你之前使用的是淘宝镜像，那么你就得执行此命令替换回原来的镜像。</p>
<h3 id="2、npm的登录-连接"><a href="#2、npm的登录-连接" class="headerlink" title="2、npm的登录/连接"></a>2、npm的登录/连接</h3><p>npm login的命令及执行结果如下：</p>
<p><img src="npmjs的发布/npm login error.png" alt="错误的npm login"></p>
<p>可以看到这边登录到了淘宝了，是错误的。</p>
<p><img src="npmjs的发布/npm login correct.png" alt="正确的npm login"></p>
<p>## </p>
<pre><code>npm config get registry

npm login

npm publish --access=public
</code></pre><p>附：如果你执意使用错误的登录源后，那么再去publish会出现如下错误。</p>
<p>错误1：<code>npm ERR! 403 Forbidden - PUT https://registry.npm.taobao.org/testnpm - [no_perms] Private mode enable, only admin can publish this module</code></p>
<p><img src="npmjs的发布/npm publish error403_1.png" alt="错误的登录源，导致的publish错误"></p>
<p>错误2：<code>npm ERR! 403 Forbidden - PUT https://registry.npmjs.org/testnpm - You do not have permission to publish &quot;testnpm&quot;. Are you logged in as the correct user?</code></p>
<p>原因：组件版本已存在，更新版本号/版本名(如果该版本的名字已被占用)，然后重新npm publish。</p>
<p>比如这里我们使用了已经被占用的<a href="https://www.npmjs.com/package/testnpm">testnpm</a></p>
<p><img src="npmjs的发布/npm publish error403_2.png" alt="image-20190610112228108"></p>
<p>修改成未被占用的名字lcqtestnpm，再npm publish后，</p>
<p><img src="npmjs的发布/npm publish error403_3.png" alt="npm publish连接超时"></p>
<p>网络翻墙后，再执行npm publish后，结果如下：</p>
<p><img src="npmjs的发布/npm publish correct.png" alt="正确执行的结果如下"></p>
<p>附：提交后的包地址为<a href="https://www.npmjs.com/package/lcqtestnpm">https://www.npmjs.com/package/lcqtestnpm</a></p>
