<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>dvlproadの博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="学而时习之不亦说乎(dvlproad)">
<meta name="keywords" content="blog,IT,iOS,Flutter">
<meta property="og:type" content="website">
<meta property="og:title" content="dvlproadの博客">
<meta property="og:url" content="https://dvlproad.github.io/page/21/index.html">
<meta property="og:site_name" content="dvlproadの博客">
<meta property="og:description" content="学而时习之不亦说乎(dvlproad)">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dvlproadの博客">
<meta name="twitter:description" content="学而时习之不亦说乎(dvlproad)">
  
    <link rel="alternate" href="/atom.xml" title="dvlproadの博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">dvlproadの博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">整理及总结平时过程中的知识点</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dvlproad.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-iOS/第三方库/图片库SDWebImage/SDWebImage②请求-①简介" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/第三方库/图片库SDWebImage/SDWebImage②请求-①简介/" class="article-date">
  <time datetime="2019-04-26T01:27:20.000Z" itemprop="datePublished">2019-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/第三方库/图片库SDWebImage/SDWebImage②请求-①简介/">第三方库SDWebImage②请求-①简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="必备知识架构-第三方库SDWebImage②请求-①简介"><a href="#必备知识架构-第三方库SDWebImage②请求-①简介" class="headerlink" title="必备知识架构-第三方库SDWebImage②请求-①简介"></a>必备知识架构-第三方库SDWebImage②请求-①简介</h1><p>[toc]</p>
<h3 id="2、SDWebImageDownloader-异步的图片下载器"><a href="#2、SDWebImageDownloader-异步的图片下载器" class="headerlink" title="2、SDWebImageDownloader 异步的图片下载器"></a>2、SDWebImageDownloader 异步的图片下载器</h3><p>SDWebImageDownloader是一个异步的图片下载器，它是一个单例类，主要负责图片的下载操作的管理。图片的下载是放在一个NSOperationQueue操作队列中来完成的，默认情况下，队列最大并发数是6。如果需要的话，我们可以通过SDWebImageDownloader类的maxConcurrentDownloads属性来修改。其声明如下：</p>
<h3 id="3、SDWebImageDownloaderOperation-下载操作"><a href="#3、SDWebImageDownloaderOperation-下载操作" class="headerlink" title="3、SDWebImageDownloaderOperation 下载操作"></a>3、SDWebImageDownloaderOperation 下载操作</h3><p>下面我们来说一说SDWebImage的下载操作SDWebImageDownloaderOperation。该类继承自NSOperation，并且采用了 <code>SDWebImageDownloaderOperationInterface</code>, <code>SDWebImageOperation</code>, <code>NSURLSessionTaskDelegate</code>, <code>NSURLSessionDataDelegate</code> 四个协议方法。</p>
<p>①、SDWebImageDownloaderOperation的下载请求</p>
<p>先通过URL等生成NSURLRequest，并设置给operation属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">声明：</span><br><span class="line">@property (strong, nonatomic, readonly, nullable) NSURLRequest *request;</span><br><span class="line"></span><br><span class="line">定义：</span><br><span class="line">NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url</span><br><span class="line">                                               							cachePolicy:cachePolicy</span><br><span class="line">                                												timeoutInterval:timeoutInterval];</span><br></pre></td></tr></table></figure>
<p>有时候下我们希望它支持后台下载。所以在operation的start方法中，如果支持后台<code>shouldContinueWhenAppEntersBackground</code>，则将当前请求添加到后台任务中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Class UIApplicationClass = NSClassFromString(@&quot;UIApplication&quot;);</span><br><span class="line">BOOL hasApplication = UIApplicationClass &amp;&amp; [UIApplicationClass respondsToSelector:@selector(sharedApplication)];</span><br><span class="line">if (hasApplication &amp;&amp; [self shouldContinueWhenAppEntersBackground]) &#123;</span><br><span class="line">    __weak __typeof__ (self) wself = self;</span><br><span class="line">    UIApplication * app = [UIApplicationClass performSelector:@selector(sharedApplication)];</span><br><span class="line">    self.backgroundTaskId = [app beginBackgroundTaskWithExpirationHandler:^&#123;</span><br><span class="line">        __strong __typeof (wself) sself = wself;</span><br><span class="line"></span><br><span class="line">        if (sself) &#123;</span><br><span class="line">            [sself cancel];</span><br><span class="line"></span><br><span class="line">            [app endBackgroundTask:sself.backgroundTaskId];</span><br><span class="line">            sself.backgroundTaskId = UIBackgroundTaskInvalid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于图片的下载，SDWebImageDownloaderOperation的下载使用<code>NSURLSession</code>类。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.dataTask = [session dataTaskWithRequest:self.request];</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if (self.dataTask) &#123;</span><br><span class="line">    [self.dataTask resume];</span><br><span class="line">			</span><br><span class="line">	......</span><br><span class="line">	// 任务开始后，会在主线程抛出下载开始通知</span><br><span class="line">    __weak typeof(self) weakSelf = self;</span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        [[NSNotificationCenter defaultCenter] postNotificationName:SDWebImageDownloadStartNotification object:weakSelf];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/第三方库/图片库SDWebImage/SDWebImage②请求-①简介/" data-id="clf0xkfhs00y6lyr43mm5jwfj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/第三方库/图片库SDWebImage/SDWebImage②请求-②避免重复请求问题" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/第三方库/图片库SDWebImage/SDWebImage②请求-②避免重复请求问题/" class="article-date">
  <time datetime="2019-04-26T01:27:20.000Z" itemprop="datePublished">2019-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/第三方库/图片库SDWebImage/SDWebImage②请求-②避免重复请求问题/">第三方库SDWebImag②请求-①避免重复请求问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="必备知识架构-第三方库SDWebImag②请求-①避免重复请求问题"><a href="#必备知识架构-第三方库SDWebImag②请求-①避免重复请求问题" class="headerlink" title="必备知识架构-第三方库SDWebImag②请求-①避免重复请求问题"></a>必备知识架构-第三方库SDWebImag②请求-①避免重复请求问题</h1><p>[toc]</p>
<h2 id="iOS-如何避免在短时间内频繁发出相同的网络请求？"><a href="#iOS-如何避免在短时间内频繁发出相同的网络请求？" class="headerlink" title="iOS 如何避免在短时间内频繁发出相同的网络请求？"></a>iOS 如何避免在短时间内频繁发出相同的网络请求？</h2><ul>
<li><p><a href="https://www.jianshu.com/p/85cfc47276d5" target="_blank" rel="noopener">iOS 如何避免在短时间内频繁发出相同的网络请求？</a></p>
</li>
<li><p><a href="https://cloud.tencent.com/developer/article/1492729" target="_blank" rel="noopener">iOS多个线程发起相同请求，避免重复</a></p>
</li>
<li><p><a href="https://blog.csdn.net/lipengfei_1993/article/details/84872511" target="_blank" rel="noopener">iOS客户端防止发送重复点击发请求</a></p>
<blockquote>
<p>1、利用遮罩等控件阻止一个请求后，下一个重复请求的发出。<br>众所周知MBProgressHud或者SVProgresHud经常被利用在项目中，主要是在网络请求发起到网络相应收到的这段时间在客户端形成一个遮罩，可以用来阻止用户点击UI进行操作，防止某些意外的请求产生。</p>
<p>2、利用运行时设置相应按钮点击间隔<br>①对UIControl进行扩展<br>②对UIButton进行扩展</p>
<p>3、客户端网络请求方法中过滤</p>
<p>4、交给服务器解决</p>
</blockquote>
</li>
<li><p><a href="https://www.jianshu.com/p/149a871fd7f1" target="_blank" rel="noopener">SDWebImage 同一时间请求相同URL时，只进行一次网络请求</a></p>
</li>
</ul>
<h2 id="SDWebImage框架特征"><a href="#SDWebImage框架特征" class="headerlink" title="SDWebImage框架特征"></a>SDWebImage框架特征</h2><ul>
<li>类别UIImageView，UIButton，MKAnnotationView- - 添加Web图像和高速缓存管理</li>
<li>异步图像下载器</li>
<li>具有自动缓存到期处理的异步内存+磁盘映像缓存</li>
<li>背景图像解压缩</li>
<li>保证相同的URL不会被下载多次</li>
<li>保证虚假网址不会重复重试</li>
<li>保证主线程永远不会被阻止</li>
<li>使用GCD和ARC</li>
</ul>
<h2 id="一、SDWebImage是如何避免在短时间内频繁发出相同的网络请求？"><a href="#一、SDWebImage是如何避免在短时间内频繁发出相同的网络请求？" class="headerlink" title="一、SDWebImage是如何避免在短时间内频繁发出相同的网络请求？"></a>一、SDWebImage是如何避免在短时间内频繁发出相同的网络请求？</h2><p>SDWebImage是如何避免在短时间内频繁发出相同的网络请求？</p>
<p>设想：一个列表所有的图片请求都是同一个url。</p>
<p>答：</p>
<h3 id="1、如何确保不生成重复的网络请求"><a href="#1、如何确保不生成重复的网络请求" class="headerlink" title="1、如何确保不生成重复的网络请求"></a>1、如何确保不生成重复的网络请求</h3><p>图片下载的回调信息存储在SDWebImageDownloader类的URLOperations属性中，该属性是一个字典，key是图片的URL地址，value则是一个SDWebImageDownloaderOperation对象，包含每个图片的多组回调信息。由于我们允许多个图片同时下载，因此可能会有多个线程同时操作URLOperations属性。需要保证URLOperations操作（添加、删除）的线程安全性。</p>
<p><strong>为了避免同一个URL在被多次任务请求的时候，进行多次的重复网络下载。</strong></p>
<p><strong>1、将下载地址URL与其对应的网络下载请求，通过下载管理器SDWebImageDownloader的URLOperations属性管理起来。（该属性是一个字典，key是图片的URL地址，value是operation）</strong></p>
<p><strong>2、我们并不会对每次操作一进来就进行创建请求任务，而是先通过之前缓存的下载任务URLOperations，通过URL寻找是否有该操作了，①如果有则不创建，而是直接取出来使用；②如果没有才创建operation来使用，并添加到URLOperations中。以备后续有同样URL请求的时候，能会从URLOperations中得到operation，就不会导致重复创建和添加到队列中了。（通过URLOperations，我们以此保证一个URL同时在被请求多次的情况下，生成/取到的是同一个，也只有一个SDWebImageDownloaderOperation，从而也就只会被下载一次。）。</strong></p>
<p>在SDWebImage版本5.8.1中的相关代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">SD_LOCK(self.operationsLock);	// 6、加锁，防止添加过程中，又有数据需要添加，保证线程安全</span><br><span class="line">id downloadOperationCancelToken;</span><br><span class="line">  NSOperation&lt;SDWebImageDownloaderOperation&gt; *operation = [self.URLOperations objectForKey:url]; // 1、从进行中的 URLOperations 获取</span><br><span class="line">  if (!operation || operation.isFinished || operation.isCancelled) &#123;</span><br><span class="line">      operation = [self createDownloaderOperationWithUrl:url options:options context:context]; // 2、如果之前没有下载操作，则创建，并加入到 URLOperations 中</span><br><span class="line">      // ....省略一堆代码</span><br><span class="line">      @weakify(self);</span><br><span class="line">      operation.completionBlock = ^&#123;</span><br><span class="line">          @strongify(self);</span><br><span class="line">          if (!self) &#123;</span><br><span class="line">              return;</span><br><span class="line">          &#125;</span><br><span class="line">          SD_LOCK(self.operationsLock);</span><br><span class="line">          [self.URLOperations removeObjectForKey:url];	// 3、下载完成后，记得删除操作</span><br><span class="line">          SD_UNLOCK(self.operationsLock);</span><br><span class="line">      &#125;;</span><br><span class="line">      self.URLOperations[url] = operation;					// 4、保存到 URLOperations 中，用于判断</span><br><span class="line">    	downloadOperationCancelToken = [operation addHandlersForProgress:progressBlock completed:completedBlock];</span><br><span class="line">      [self.downloadQueue addOperation:operation];	// 4、添加操作</span><br><span class="line">    </span><br><span class="line">  &#125; else &#123;</span><br><span class="line">      // ....省略一堆代码</span><br><span class="line">    	@synchronized (operation) &#123;</span><br><span class="line">        	// 5、如果之前有下载操作，则不用创建操作，但是仍然需要保存回调，不然其他位置的图片的请求就丢失了(虽然说它们是同一张图片)</span><br><span class="line">          downloadOperationCancelToken = [operation addHandlersForProgress:progressBlock completed:completedBlock];</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  SD_UNLOCK(self.operationsLock);	// 6、解锁</span><br></pre></td></tr></table></figure>
<p>3、问：重复的url请求，没有创建operation了，那operation的回调怎么办？</p>
<p>答：虽然重复的URL只有一个SDWebImageDownloaderOperation。但是这个opeartion的<code>callbackBlocks</code>是个数组，所有的回调都用这个数组保存起来的，所以不会丢失的（这里<code>callbackBlocks</code>数组里存放字典，对应进行时候的ProgressCallback回调和结束时候的CompletedCallback回调）。</p>
<p>4、问：对同一个operation的<code>callbackBlocks</code>数组操作，有什么要注意的？</p>
<p>答：因为不管同个url不管有没有新的operation生成，我们都会有一个当前任务对应<code>downloadOperationCancelToken</code>生成，来给这个operation添加回调。即同一个url所对应opeartion里的callbackBlocks数组，在有多次图片任务时候，就会有多次操作callbackBlocks的情况。所以对callbackBlocks的操作，也要保证线程安全。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// SDWebImageDownloader.m</span><br><span class="line"></span><br><span class="line">- (nullable SDWebImageDownloadToken *)downloadImageWithURL:(nullable NSURL *)url</span><br><span class="line">                                                   options:(SDWebImageDownloaderOptions)options</span><br><span class="line">                                                   context:(nullable SDWebImageContext *)context</span><br><span class="line">                                                  progress:(nullable SDWebImageDownloaderProgressBlock)progressBlock</span><br><span class="line">                                                 completed:(nullable SDWebImageDownloaderCompletedBlock)completedBlock &#123;</span><br><span class="line">    // ....省略一堆代码</span><br><span class="line">                                                   </span><br><span class="line">    SD_LOCK(self.operationsLock);</span><br><span class="line">    id downloadOperationCancelToken;</span><br><span class="line">    NSOperation&lt;SDWebImageDownloaderOperation&gt; *operation = [self.URLOperations objectForKey:url];</span><br><span class="line">    if (!operation || operation.isFinished || operation.isCancelled) &#123;</span><br><span class="line">       	// ....省略一堆代码</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // When we reuse the download operation to attach more callbacks, there may be thread safe issue because the getter of callbacks may in another queue (decoding queue or delegate queue)</span><br><span class="line">        // So we lock the operation here, and in `SDWebImageDownloaderOperation`, we use `@synchonzied (self)`, to ensure the thread safe between these two classes.</span><br><span class="line">        @synchronized (operation) &#123;</span><br><span class="line">            downloadOperationCancelToken = [operation addHandlersForProgress:progressBlock completed:completedBlock];</span><br><span class="line">        &#125;</span><br><span class="line">        // ....省略一堆代码</span><br><span class="line">    &#125;</span><br><span class="line">    SD_UNLOCK(self.operationsLock);</span><br><span class="line">    </span><br><span class="line">    // 虽然重复的URL只有一个SDWebImageDownloaderOperation。但是SDWebImageDownloadToken是每个URL都会有一个的，只是他们的SDWebImageDownloaderOperation是同一个。</span><br><span class="line">    SDWebImageDownloadToken *token = [[SDWebImageDownloadToken alloc] initWithDownloadOperation:operation];</span><br><span class="line">    token.url = url;</span><br><span class="line">    token.request = operation.request;</span><br><span class="line">    token.downloadOperationCancelToken = downloadOperationCancelToken;</span><br><span class="line">    </span><br><span class="line">    return token;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对callbackBlocks的操作，也要保证线程安全，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// SDWebImageDownloaderOperation.m</span><br><span class="line"></span><br><span class="line">@property (strong, nonatomic, nonnull) NSMutableArray&lt;SDCallbacksDictionary *&gt; *callbackBlocks;</span><br><span class="line"></span><br><span class="line">- (nullable id)addHandlersForProgress:(nullable SDWebImageDownloaderProgressBlock)progressBlock</span><br><span class="line">                            completed:(nullable SDWebImageDownloaderCompletedBlock)completedBlock &#123;</span><br><span class="line">    SDCallbacksDictionary *callbacks = [NSMutableDictionary new];</span><br><span class="line">    if (progressBlock) callbacks[kProgressCallbackKey] = [progressBlock copy];</span><br><span class="line">    if (completedBlock) callbacks[kCompletedCallbackKey] = [completedBlock copy];</span><br><span class="line">    @synchronized (self) &#123;</span><br><span class="line">        [self.callbackBlocks addObject:callbacks];</span><br><span class="line">    &#125;</span><br><span class="line">    return callbacks;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2、它是如何保证请求管理的线程安全"><a href="#2、它是如何保证请求管理的线程安全" class="headerlink" title="2、它是如何保证请求管理的线程安全"></a>2、它是如何保证请求管理的线程安全</h3><p>说明：由于我们允许多个任务同时进行，也就造成了会有多个线程同时操作<code>URLOperations</code>属性。为了保证URLOperations操作(添加、删除)的线程安全性，我们添加了一个锁，且考虑到各种具备锁功能的性能问题，这里我们使用信号量semaphore。所以，<strong>我们控制线程安全的锁是使用信号量实现的<code>operationsLock</code>，且其初始值为1，用它来确保同一时间只有一个线程操作URLOperations属性</strong>。</p>
<p>在SDWebImage版本5.8.1中的相关代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// SDWebImageDownloader.m</span><br><span class="line"></span><br><span class="line">- (nonnull instancetype)init &#123;</span><br><span class="line">    return [self initWithConfig:SDWebImageDownloaderConfig.defaultDownloaderConfig];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithConfig:(SDWebImageDownloaderConfig *)config &#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        // ....省略一堆代码</span><br><span class="line">        _downloadQueue = [NSOperationQueue new];</span><br><span class="line">        _downloadQueue.maxConcurrentOperationCount = _config.maxConcurrentDownloads;</span><br><span class="line">        _downloadQueue.name = @&quot;com.hackemist.SDWebImageDownloader&quot;;</span><br><span class="line">        _URLOperations = [NSMutableDictionary new];</span><br><span class="line">        // ....省略一堆代码</span><br><span class="line">        _operationsLock = dispatch_semaphore_create(1);</span><br><span class="line">        // ....省略一堆代码</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、其它知识说明"><a href="#3、其它知识说明" class="headerlink" title="3、其它知识说明"></a>3、其它知识说明</h3><h4 id="3-1、SDWebImageDownloader-是什么？-异步的图片下载器"><a href="#3-1、SDWebImageDownloader-是什么？-异步的图片下载器" class="headerlink" title="3.1、SDWebImageDownloader 是什么？(异步的图片下载器)"></a>3.1、SDWebImageDownloader 是什么？(异步的图片下载器)</h4><p>SDWebImageDownloader是一个异步的图片下载器，它是一个单例类，主要负责图片的下载操作的管理。</p>
<p>图片的下载是放在一个NSOperationQueue操作队列中来完成的，默认情况下，队列最大并发数是6。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// SDWebImageDownloader.m</span><br><span class="line">@property (strong, nonatomic, nonnull) NSOperationQueue *downloadQueue;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				_downloadQueue = [NSOperationQueue new];</span><br><span class="line">        _downloadQueue.maxConcurrentOperationCount = _config.maxConcurrentDownloads;</span><br><span class="line"></span><br><span class="line">// SDWebImageDownloaderConfig.h</span><br><span class="line">/**</span><br><span class="line"> * The maximum number of concurrent downloads.</span><br><span class="line"> * Defaults to 6.</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) NSInteger maxConcurrentDownloads;</span><br></pre></td></tr></table></figure>
<p>如果需要的话，我们可以通过修改maxConcurrentDownloads属性来修改并发下载数。</p>
<h2 id="二、其他版本的SDWebImage的代码解析"><a href="#二、其他版本的SDWebImage的代码解析" class="headerlink" title="二、其他版本的SDWebImage的代码解析"></a>二、其他版本的SDWebImage的代码解析</h2><h3 id="1、SDWebImageDownloader-是什么？-异步的图片下载器"><a href="#1、SDWebImageDownloader-是什么？-异步的图片下载器" class="headerlink" title="1、SDWebImageDownloader 是什么？(异步的图片下载器)"></a>1、SDWebImageDownloader 是什么？(异步的图片下载器)</h3><p>其声明及定义如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//SDWebImageDownloader.m</span><br><span class="line"></span><br><span class="line">@property (SDDispatchQueueSetterSementics, nonatomic) dispatch_queue_t barrierQueue;</span><br><span class="line"></span><br><span class="line">- (id)init &#123;</span><br><span class="line">    if ((self = [super init])) &#123;</span><br><span class="line">        ...</span><br><span class="line">        _barrierQueue = dispatch_queue_create(&quot;com.hackemist.SDWebImageDownloaderBarrierQueue&quot;, DISPATCH_QUEUE_CONCURRENT);	// 并发队列</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每有一个图片下载请求，SDWebImageDownloader图片下载管理器就会生成一个继承自NSOperation的下载操作SDWebImageDownloaderOperation，并添加到下载队列downloadQueue中。</p>
<p><code>[sself.downloadQueue addOperation:operation];</code></p>
<p>该队列允许修改最大并发数。</p>
<p>1、由于我们允许多个任务同时进行，也就造成了会有多个线程同时操作<code>URLOperations</code>属性。为了保证URLOperations操作(添加、删除)的线程安全性，我们添加了线程操作的<strong>信号量<code>operationsLock</code>，其初始值为1，来确保同一时间只有一个线程操作URLOperations属性</strong>，我们以添加操作为例，如下代码所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">LOCK(self.operationsLock);</span><br><span class="line">SDWebImageDownloaderOperation *operation = [self.URLOperations objectForKey:url];</span><br><span class="line">if (!operation) &#123;</span><br><span class="line">    operation = createCallback();</span><br><span class="line">    __weak typeof(self) wself = self;</span><br><span class="line">    operation.completionBlock = ^&#123;</span><br><span class="line">        __strong typeof(wself) sself = wself;</span><br><span class="line">        if (!sself) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        LOCK(sself.operationsLock);</span><br><span class="line">        [sself.URLOperations removeObjectForKey:url];</span><br><span class="line">        UNLOCK(sself.operationsLock);</span><br><span class="line">    &#125;;</span><br><span class="line">    [self.URLOperations setObject:operation forKey:url];</span><br><span class="line">&#125;</span><br><span class="line">UNLOCK(self.operationsLock);</span><br></pre></td></tr></table></figure>
<p>2、同样由于为了避免同一个URL的图片被下载多次，所以我们并不会对每次操作一进来就进行创建请求任务，而是先通过之前缓存的下载任务URLOperations中通过URL寻找是否有该操作了，如果有则不创建，如果没有才创建。因此，这里就会有一个URL同时在被请求多次的情况下，生成/取到的是同一个SDWebImageDownloaderOperation。</p>
<h2 id="三、其他"><a href="#三、其他" class="headerlink" title="三、其他"></a>三、其他</h2><p>对于下载任务的执行，SDWebImage还允许我们设置是默认的先进先出还是后进先出。该功能的实现，其自然是通过队列操作的依赖来完成的(其中lastAddedOperation指的是上一次的操作)。源代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[sself.downloadQueue addOperation:operation];</span><br><span class="line">if (sself.executionOrder == SDWebImageDownloaderLIFOExecutionOrder) &#123;</span><br><span class="line">    // Emulate LIFO execution order by systematically adding new operations as last operation&apos;s dependency</span><br><span class="line">    [sself.lastAddedOperation addDependency:operation];</span><br><span class="line">    sself.lastAddedOperation = operation;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他参考文章"><a href="#其他参考文章" class="headerlink" title="其他参考文章"></a>其他参考文章</h2><ul>
<li><a href="https://www.jianshu.com/p/e00854ab5567" target="_blank" rel="noopener">有关请求相同地址图片的下载问题(SDWebIMage底层原理的实现)</a></li>
</ul>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/第三方库/图片库SDWebImage/SDWebImage②请求-②避免重复请求问题/" data-id="clf0xkfht00yclyr41wmqm5lu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/第三方库/图片库SDWebImage/SDWebImage④其他" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/第三方库/图片库SDWebImage/SDWebImage④其他/" class="article-date">
  <time datetime="2019-04-26T01:27:20.000Z" itemprop="datePublished">2019-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/第三方库/图片库SDWebImage/SDWebImage④其他/">第三方库SDWebImage①缓存-①缓存不更新问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="必备知识架构-第三方库SDWebImage③其他"><a href="#必备知识架构-第三方库SDWebImage③其他" class="headerlink" title="必备知识架构-第三方库SDWebImage③其他"></a>必备知识架构-第三方库SDWebImage③其他</h1><p>[toc]</p>
<p><a href="https://blog.csdn.net/applelg/article/details/81293013" target="_blank" rel="noopener">iOS - 主线程调度在应用中的小技巧</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - 宏定义</span><br><span class="line">#ifndef dispatch_queue_async_safe</span><br><span class="line">#define dispatch_queue_async_safe(queue, block)\</span><br><span class="line">if (dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL) == dispatch_queue_get_label(queue)) &#123;\</span><br><span class="line">block();\</span><br><span class="line">&#125; else &#123;\</span><br><span class="line">dispatch_async(queue, block);\</span><br><span class="line">&#125;</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#ifndef dispatch_main_async_safe</span><br><span class="line">#define dispatch_main_async_safe(block) dispatch_queue_async_safe(dispatch_get_main_queue(), block)</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<p><code>dispatch_queue_get_label</code>：返回创建队列时为队列指定的标签。</p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/第三方库/图片库SDWebImage/SDWebImage④其他/" data-id="clf0xkfhu00yflyr424n8a1s9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/第三方库/数据库FMDB/数据库-①FMDB" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/第三方库/数据库FMDB/数据库-①FMDB/" class="article-date">
  <time datetime="2019-04-26T01:27:20.000Z" itemprop="datePublished">2019-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/第三方库/数据库FMDB/数据库-①FMDB/">数据库-①FMDB</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="必备知识架构-数据库-①FMDB"><a href="#必备知识架构-数据库-①FMDB" class="headerlink" title="必备知识架构-数据库-①FMDB"></a>必备知识架构-数据库-①FMDB</h1><p>[toc]</p>
<h2 id="一、FMDB的多线程问题"><a href="#一、FMDB的多线程问题" class="headerlink" title="一、FMDB的多线程问题"></a>一、FMDB的多线程问题</h2><p>你项目用FMDB吗？你写的数据库类是线程安全的吗？如果不是，希望这篇小文章会对你有点帮助</p>
<h3 id="1、FMDB如何保证多线程处理的数据安全"><a href="#1、FMDB如何保证多线程处理的数据安全" class="headerlink" title="1、FMDB如何保证多线程处理的数据安全"></a>1、FMDB如何保证多线程处理的数据安全</h3><p>对于数据操作，最重要的一点就是数据安全的问题，在多线程中，线程安全是数据安全的首要前提，下面谈谈FMDB 是如何对多线程进行处理的。</p>
<p>详情参考：<a href="https://www.jianshu.com/p/cb60951cdc31" target="_blank" rel="noopener">FMDB 中的多线程处理</a></p>
<p><a href="https://blog.csdn.net/gdutxzy/article/details/43307643" target="_blank" rel="noopener">FMDatabaseQueue为何会线程安全的一点心得</a></p>
<h3 id="2、FMDatabaseQueue为何能保证线程安全"><a href="#2、FMDatabaseQueue为何能保证线程安全" class="headerlink" title="2、FMDatabaseQueue为何能保证线程安全"></a>2、FMDatabaseQueue为何能保证线程安全</h3><p>在做iOS项目的时候，会用到许多第三方的框架，比如用FMDB来处理数据库的东西。但是FMDatabase并不是线程安全的，当你在不同的线程里同时操作一个Database的时候，就容易产生崩溃。但是好在FMDB提供了一个解决的方法，就是FMDatabaseQueue。通过它来操作数据库就是线程安全的了。<br>即：FMDB是使用databaseQueue实现数据库操作线程安全</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:_dbPath];</span><br><span class="line">[queue inDatabase:^(FMDatabase *db) &#123;</span><br><span class="line">	[db executeUpdateWithFormat:@&quot;INSERT INTO TABLENAME(id, name) VALUES (%zd, %@);&quot;, @1, @&quot;idage&quot;];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>queue inDatabase:的本质如下：</p>
<p><img src="/iOS/第三方库/数据库FMDB/数据库-①FMDB/FMDB数据安全1.jpg" alt="FMDB数据安全1"></p>
<p>_queue的初始化为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_queue = dispatch_queue_create([[NSString stringWithFormat:@&quot;fmdb.%@&quot;, self] UTF8String], NULL);</span><br></pre></td></tr></table></figure>
<p>FMDB是怎么处理线程安全的？</p>
<p><strong>综上所述：FMDB的线程处理就是强行就所有的多线程逻辑在一个串行队列中同步处理。</strong></p>
<h2 id="二、FMDB的数据库事务-Database-Transaction"><a href="#二、FMDB的数据库事务-Database-Transaction" class="headerlink" title="二、FMDB的数据库事务(Database Transaction)"></a>二、FMDB的数据库事务(Database Transaction)</h2><p>数据库事务(Database Transaction) ，是指作为单个逻辑工作单元执行的一系列操作，要么完全地执行，要么完全地不执行。 通过将一组相关操作组合为一个要么全部成功要么全部失败的单元，可以简化错误恢复并使应用程序更加可靠。简单的来说就是可以同时处理多个数据库操作，并且速度很快。</p>
<p>FMDB是支持数据库事务的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[queue inTransaction:^(FMDatabase *db, BOOL *rollback) &#123;</span><br><span class="line">    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @1];</span><br><span class="line">    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @2];</span><br><span class="line">    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @3];</span><br><span class="line">    [db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, @4];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h2 id="三、为什么要从FMDB迁移到WCDB？"><a href="#三、为什么要从FMDB迁移到WCDB？" class="headerlink" title="三、为什么要从FMDB迁移到WCDB？"></a>三、为什么要从FMDB迁移到WCDB？</h2><p><a href="https://www.juhe.cn/news/index/id/1998" target="_blank" rel="noopener">为什么要从FMDB迁移到WCDB？</a></p>
<p>表结构</p>
<p>WCDB 提供了 ORM 的功能，将类的属性绑定到数据库表的字段。在日常实践中，类的属性名和表的字段名通常不一致。因此，WCDB 提供了 WCDB_SYNTHESIZE_COLUMN(className, propertyName, columnName) 宏，用于映射属性名。</p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/第三方库/数据库FMDB/数据库-①FMDB/" data-id="clf0xkfhv00yilyr43ijn2432" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/第三方库/网络库AFNetworking/第三方网络库AFNetworking" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/第三方库/网络库AFNetworking/第三方网络库AFNetworking/" class="article-date">
  <time datetime="2019-04-26T01:27:20.000Z" itemprop="datePublished">2019-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/第三方库/网络库AFNetworking/第三方网络库AFNetworking/">第三方网络库AFNetworking</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="必备知识架构-第三方网络库AFNetworking"><a href="#必备知识架构-第三方网络库AFNetworking" class="headerlink" title="必备知识架构-第三方网络库AFNetworking"></a>必备知识架构-第三方网络库AFNetworking</h1><p>[toc]</p>
<h1 id="知识架构"><a href="#知识架构" class="headerlink" title="知识架构"></a>知识架构</h1><p><a href="http://lib.csdn.net/base/ios/structure" target="_blank" rel="noopener">iOS知识库</a></p>
<p><a href="http://lib.csdn.net/base/Android/structure" target="_blank" rel="noopener">Android知识库</a></p>
<h1 id="AFNetworking源码解析与面试考点思考"><a href="#AFNetworking源码解析与面试考点思考" class="headerlink" title="AFNetworking源码解析与面试考点思考"></a>AFNetworking源码解析与面试考点思考</h1><p><a href="https://www.jianshu.com/p/4c169c127c70" target="_blank" rel="noopener">AFNetworking源码解析与面试考点思考</a></p>
<h2 id="八、多线程–第三方库AFNetworking"><a href="#八、多线程–第三方库AFNetworking" class="headerlink" title="八、多线程–第三方库AFNetworking"></a>八、多线程–第三方库AFNetworking</h2><blockquote>
<p><a href="#目录">&lt; 返回目录</a></p>
</blockquote>
<h4 id="1、AFNetworking源码解析"><a href="#1、AFNetworking源码解析" class="headerlink" title="1、AFNetworking源码解析"></a>1、AFNetworking源码解析</h4><ul>
<li><a href="https://www.cnblogs.com/Jordandan/p/6223089.html" target="_blank" rel="noopener">AFNetworking 3.0 使用详解 和 源码解析实现原理</a></li>
</ul>
<h4 id="2、AFNetworking的线程和信号量问题"><a href="#2、AFNetworking的线程和信号量问题" class="headerlink" title="2、AFNetworking的线程和信号量问题"></a>2、AFNetworking的线程和信号量问题</h4><ul>
<li><a href="http://www.cocoachina.com/bbs/read.php?tid=1695717" target="_blank" rel="noopener">AFNetworking的线程和信号量问题</a></li>
</ul>
<h3 id="AFNetworking3-0后为什么不再需要常驻线程？"><a href="#AFNetworking3-0后为什么不再需要常驻线程？" class="headerlink" title="AFNetworking3.0后为什么不再需要常驻线程？"></a>AFNetworking3.0后为什么不再需要常驻线程？</h3><p><a href="http://www.cocoachina.com/articles/25225" target="_blank" rel="noopener">AFNetworking3.0后为什么不再需要常驻线程？</a></p>
<p><strong>B.一个请求一条线程</strong></p>
<p>如果来一个请求开辟一条线程，设置runloop保活线程，等待结果回调。这种方式理论上是可行的，但是你也看到了，线程开销太大了。（PASS）</p>
<p><strong>C.一条常驻线程</strong></p>
<p>只开辟一条子线程，设置runloop使线程常驻。所有的请求在这个线程上发起、同时也<strong>在这个线程上处理回调</strong>。</p>
<p>线程保活的代码</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)aliveThread &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        [[<span class="built_in">NSThread</span> currentThread] setName:<span class="string">@"AFNetworking"</span>];</span><br><span class="line"></span><br><span class="line">        <span class="built_in">NSRunLoop</span> *runLoop = [<span class="built_in">NSRunLoop</span> currentRunLoop];</span><br><span class="line">        [runLoop addPort:[<span class="built_in">NSMachPort</span> port] forMode:<span class="built_in">NSDefaultRunLoopMode</span>];</span><br><span class="line">        [runLoop run];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们知道主线程一直是保活的；而新建的子线程默认是没有添加Runloop的，因此给这个线程添加了一个runloop，并且加了一个NSMachPort，来防止这个新建的线程由于没有活动直接退出。</p>
<h4 id="AFNetworking一些API介绍"><a href="#AFNetworking一些API介绍" class="headerlink" title="AFNetworking一些API介绍"></a>AFNetworking一些API介绍</h4><p>必知点：AFNetworking框架默认请求类型<code>requestSerializer</code>和响应类型<code>responseSerializer</code>都是JSON格式的，即默认请求类型为<code>AFJSONRequestSerializer</code>，默认相应类型为<code>AFJSONResponseSerializer</code>。</p>
<h6 id="1、关于请求类型及请求参数的书写"><a href="#1、关于请求类型及请求参数的书写" class="headerlink" title="1、关于请求类型及请求参数的书写"></a>1、关于请求类型及请求参数的书写</h6><p>所以在进行请求时候，我们必须根据自己请求的参数类型parameters，对AFNetworking的请求类型进行设置。主要设置为：</p>
<ol>
<li>如果请求参数是字典类型<code>NSDictionary</code>，则请求类型应设置<code>AFHTTPRequestSerializer</code>。</li>
<li>如果请求参数是JSON类型，则请求类型应设置<code>AFJSONRequestSerializer</code>。</li>
</ol>
<p>因为设置的类型不同，AFNetworking会根据设置的类型执行该类型下面对应的<code>- (NSURLRequest *)requestBySerializingRequest:(NSURLRequest *)request withParameters:(id)parameters error:(NSError *__autoreleasing *)error</code>方法。</p>
<p>其中</p>
<p>AFHTTPRequestSerializer对参数会有如下第496行的处理<code>query = AFQueryStringFromParameters(parameters);</code>该处理为将字典类型转为一串请求的字符串格式。</p>
<p>AFJSONRequestSerializer对参数的处理主要为第1260行的<br><code>[mutableRequest setHTTPBody:[NSJSONSerialization dataWithJSONObject:parameters options:self.writingOptions error:error]];</code></p>
<h6 id="2、关于响应类型及响应response"><a href="#2、关于响应类型及响应response" class="headerlink" title="2、关于响应类型及响应response"></a>2、关于响应类型及响应response</h6><p>响应的时候，<code>AFURLSessionManager</code>其会调用<code>AFURLSessionManagerTaskDelegate</code>协议，执行该协议里第292的<code>responseObject = [manager.responseSerializer responseObjectForResponse:task.response data:data error:&amp;serializationError];</code>可以看出这里会根据我们设置的不同响应类型，调用该响应类型下的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (id)responseObjectForResponse:(NSURLResponse *)response</span><br><span class="line">                           data:(NSData *)data</span><br><span class="line">                          error:(NSError *__autoreleasing *)error</span><br></pre></td></tr></table></figure>
<p>所以，这里我们衍生出一个继承自AFJSONResponseSerializer的<strong>CJJSONResponseSerializer</strong>的新响应类型，重写该方法，用来处理服务端返回的JSON不是标准的json格式的问题，即主要处理AFNetworking 3840的错误。</p>
<p></p><p id="END"></p><p></p>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><blockquote>
<p>&lt; <a href="#目录">返回目录</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/第三方库/网络库AFNetworking/第三方网络库AFNetworking/" data-id="clf0xkfhw00yolyr42fxvjxh4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/自动化/iOS进阶_打包" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/自动化/iOS进阶_打包/" class="article-date">
  <time datetime="2019-04-24T01:27:20.000Z" itemprop="datePublished">2019-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/自动化/iOS进阶_打包/">iOS进阶_打包脚本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="一、认识Mac的keychain机制"><a href="#一、认识Mac的keychain机制" class="headerlink" title="一、认识Mac的keychain机制"></a>一、认识Mac的keychain机制</h2><p>要使用Keychain中的证书，请先<code>unlock-keychain</code>。</p>
<p>完整的命令如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">security unlock-keychain -p "lichaoqian" "/Users/lichaoqian/Library/Keychains/login.keychain"</span><br></pre></td></tr></table></figure>
<p><strong>如果你是在Jenkins中执行的，请确保你的权限问题。具体的解决可进入《使用工具-&gt;Jenkins-&gt;Jenkins使用问题常见》中的”二、权限问题”</strong>中查看解决。</p>
<p>其他参考文章：</p>
<ul>
<li><a href="https://www.coder4.com/archives/5131" target="_blank" rel="noopener">Jenkins上后台持续集成时如何绕过Mac的keychain机制</a></li>
<li><a href="https://blog.csdn.net/jintemp/article/details/79894263" target="_blank" rel="noopener">远程连接 Mac 设置使用密钥 security -v unlock-keychain</a></li>
<li><a href="https://blog.csdn.net/zhaodanfeng1025/article/details/41486993" target="_blank" rel="noopener">security用法</a></li>
<li><a href="https://stackoverflow.com/questions/35517496/unable-to-unlock-the-keychain" target="_blank" rel="noopener">Unable to unlock the keychain</a></li>
</ul>
<h2 id="二、认识几个命令"><a href="#二、认识几个命令" class="headerlink" title="二、认识几个命令"></a>二、认识几个命令</h2><ul>
<li>查看SDK版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -showsdks</span><br></pre></td></tr></table></figure>
<p>查询结果如下：</p>
<p><img src="/iOS/自动化/iOS进阶_打包/iOS打包_showsdks.png" alt="xcodebuild -showsdks的执行结果"></p>
<h2 id="三、认识执行命令"><a href="#三、认识执行命令" class="headerlink" title="三、认识执行命令"></a>三、认识执行命令</h2><p>在终端执行<code>xcodebuild --help</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">Beyond-MacBook-Pro:~ lichaoqian$ xcodebuild --help</span><br><span class="line">Usage: xcodebuild [-project &lt;projectname&gt;] [[-target &lt;targetname&gt;]...|-alltargets] [-configuration &lt;configurationname&gt;] [-arch &lt;architecture&gt;]... [-sdk [&lt;sdkname&gt;|&lt;sdkpath&gt;]] [-showBuildSettings [-json]] [&lt;buildsetting&gt;=&lt;value&gt;]... [&lt;buildaction&gt;]...</span><br><span class="line">       xcodebuild [-project &lt;projectname&gt;] -scheme &lt;schemeName&gt; [-destination &lt;destinationspecifier&gt;]... [-configuration &lt;configurationname&gt;] [-arch &lt;architecture&gt;]... [-sdk [&lt;sdkname&gt;|&lt;sdkpath&gt;]] [-showBuildSettings [-json]] [-showdestinations] [&lt;buildsetting&gt;=&lt;value&gt;]... [&lt;buildaction&gt;]...</span><br><span class="line">       xcodebuild -workspace &lt;workspacename&gt; -scheme &lt;schemeName&gt; [-destination &lt;destinationspecifier&gt;]... [-configuration &lt;configurationname&gt;] [-arch &lt;architecture&gt;]... [-sdk [&lt;sdkname&gt;|&lt;sdkpath&gt;]] [-showBuildSettings] [-showdestinations] [&lt;buildsetting&gt;=&lt;value&gt;]... [&lt;buildaction&gt;]...</span><br><span class="line">       xcodebuild -version [-sdk [&lt;sdkfullpath&gt;|&lt;sdkname&gt;] [-json] [&lt;infoitem&gt;] ]</span><br><span class="line">       xcodebuild -list [[-project &lt;projectname&gt;]|[-workspace &lt;workspacename&gt;]] [-json]</span><br><span class="line">       xcodebuild -showsdks [-json]</span><br><span class="line">       xcodebuild -exportArchive -archivePath &lt;xcarchivepath&gt; [-exportPath &lt;destinationpath&gt;] -exportOptionsPlist &lt;plistpath&gt;</span><br><span class="line">       xcodebuild -exportNotarizedApp -archivePath &lt;xcarchivepath&gt; -exportPath &lt;destinationpath&gt;</span><br><span class="line">       xcodebuild -exportLocalizations -localizationPath &lt;path&gt; -project &lt;projectname&gt; [-exportLanguage &lt;targetlanguage&gt;...[-includeScreenshots]]</span><br><span class="line">       xcodebuild -importLocalizations -localizationPath &lt;path&gt; -project &lt;projectname&gt;</span><br><span class="line">       xcodebuild -resolvePackageDependencies [-project &lt;projectname&gt;|-workspace &lt;workspacename&gt;] -clonedSourcePackagesDirPath &lt;path&gt;</span><br><span class="line">       xcodebuild -create-xcframework [-help] [-framework &lt;path&gt;] [-library &lt;path&gt; [-headers &lt;path&gt;]] -output &lt;path&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">    -usage                                                   print brief usage</span><br><span class="line">    -help                                                    print complete usage</span><br><span class="line">    -verbose                                                 provide additional status output</span><br><span class="line">    -license                                                 show the Xcode and SDK license agreements</span><br><span class="line">    -checkFirstLaunchStatus                                  Check if any First Launch tasks need to be performed</span><br><span class="line">    -runFirstLaunch                                          install packages and agree to the license</span><br><span class="line">    -project NAME                                            build the project NAME</span><br><span class="line">    -target NAME                                             build the target NAME</span><br><span class="line">    -alltargets                                              build all targets</span><br><span class="line">    -workspace NAME                                          build the workspace NAME</span><br><span class="line">    -scheme NAME                                             build the scheme NAME</span><br><span class="line">    -configuration NAME                                      use the build configuration NAME for building each target</span><br><span class="line">    -xcconfig PATH                                           apply the build settings defined in the file at PATH as overrides</span><br><span class="line">    -arch ARCH                                               build each target for the architecture ARCH; this will override architectures defined in the project</span><br><span class="line">    -sdk SDK                                                 use SDK as the name or path of the base SDK when building the project</span><br><span class="line">    -toolchain NAME                                          use the toolchain with identifier or name NAME</span><br><span class="line">    -destination DESTINATIONSPECIFIER                        use the destination described by DESTINATIONSPECIFIER (a comma-separated set of key=value pairs describing the destination to use)</span><br><span class="line">    -destination-timeout TIMEOUT                             wait for TIMEOUT seconds while searching for the destination device</span><br><span class="line">    -parallelizeTargets                                      build independent targets in parallel</span><br><span class="line">    -jobs NUMBER                                             specify the maximum number of concurrent build operations</span><br><span class="line">    -maximum-concurrent-test-device-destinations NUMBER      the maximum number of device destinations to test on concurrently</span><br><span class="line">    -maximum-concurrent-test-simulator-destinations NUMBER   the maximum number of simulator destinations to test on concurrently</span><br><span class="line">    -parallel-testing-enabled YES|NO                         overrides the per-target setting in the scheme</span><br><span class="line">    -parallel-testing-worker-count NUMBER                    the exact number of test runners that will be spawned during parallel testing</span><br><span class="line">    -maximum-parallel-testing-workers NUMBER                 the maximum number of test runners that will be spawned during parallel testing</span><br><span class="line">    -dry-run                                                 do everything except actually running the commands</span><br><span class="line">    -quiet                                                   do not print any output except for warnings and errors</span><br><span class="line">    -hideShellScriptEnvironment                              don't show shell script environment variables in build log</span><br><span class="line">    -showsdks                                                display a compact list of the installed SDKs</span><br><span class="line">    -showdestinations                                        display a list of destinations</span><br><span class="line">    -showTestPlans                                           display a list of test plans</span><br><span class="line">    -showBuildSettings                                       display a list of build settings and values</span><br><span class="line">    -list                                                    lists the targets and configurations in a project, or the schemes in a workspace</span><br><span class="line">    -find-executable NAME                                    display the full path to executable NAME in the provided SDK and toolchain</span><br><span class="line">    -find-library NAME                                       display the full path to library NAME in the provided SDK and toolchain</span><br><span class="line">    -version                                                 display the version of Xcode; with -sdk will display info about one or all installed SDKs</span><br><span class="line">    -enableAddressSanitizer YES|NO                           turn the address sanitizer on or off</span><br><span class="line">    -enableThreadSanitizer YES|NO                            turn the thread sanitizer on or off</span><br><span class="line">    -enableUndefinedBehaviorSanitizer YES|NO                 turn the undefined behavior sanitizer on or off</span><br><span class="line">    -resultBundlePath PATH                                   specifies the directory where a result bundle describing what occurred will be placed</span><br><span class="line">    -resultStreamPath PATH                                   specifies the file where a result stream will be written to (the file must already exist)</span><br><span class="line">    -resultBundleVersion 3 [default]                         specifies which result bundle version should be used</span><br><span class="line">    -clonedSourcePackagesDirPath PATH                        specifies the directory to which remote source packages are fetch or expected to be found</span><br><span class="line">    -derivedDataPath PATH                                    specifies the directory where build products and other derived data will go</span><br><span class="line">    -archivePath PATH                                        specifies the directory where any created archives will be placed, or the archive that should be exported</span><br><span class="line">    -exportArchive                                           specifies that an archive should be exported</span><br><span class="line">    -exportNotarizedApp                                      export an archive that has been notarized by Apple</span><br><span class="line">    -exportOptionsPlist PATH                                 specifies a path to a plist file that configures archive exporting</span><br><span class="line">    -enableCodeCoverage YES|NO                               turn code coverage on or off when testing</span><br><span class="line">    -exportPath PATH                                         specifies the destination for the product exported from an archive</span><br><span class="line">    -skipUnavailableActions                                  specifies that scheme actions that cannot be performed should be skipped instead of causing a failure</span><br><span class="line">    -exportLocalizations                                     exports completed and outstanding project localizations</span><br><span class="line">    -importLocalizations                                     imports localizations for a project, assuming any necessary localized resources have been created in Xcode</span><br><span class="line">    -localizationPath                                        specifies a path to XLIFF localization files</span><br><span class="line">    -exportLanguage                                          specifies multiple optional ISO 639-1 languages included in a localization export</span><br><span class="line">    -xctestrun                                               specifies a path to a test run specification</span><br><span class="line">    -testPlan                                                specifies the name of the test plan associated with the scheme to use for testing</span><br><span class="line">    -only-testing                                            constrains testing by specifying tests to include, and excluding other tests</span><br><span class="line">    -only-testing:TEST-IDENTIFIER                            constrains testing by specifying tests to include, and excluding other tests</span><br><span class="line">    -skip-testing                                            constrains testing by specifying tests to exclude, but including other tests</span><br><span class="line">    -skip-testing:TEST-IDENTIFIER                            constrains testing by specifying tests to exclude, but including other tests</span><br><span class="line">    -only-test-configuration                                 constrains testing by specifying test configurations to include, and excluding other test configurations</span><br><span class="line">    -skip-test-configuration                                 constrains testing by specifying test configurations to exclude, but including other test configurations</span><br><span class="line">    -testLanguage                                            constrains testing by specifying ISO 639-1 language in which to run the tests</span><br><span class="line">    -testRegion                                              constrains testing by specifying ISO 3166-1 region in which to run the tests</span><br><span class="line">    -resolvePackageDependencies                              resolves any Swift package dependencies referenced by the project or workspace</span><br><span class="line">    -disableAutomaticPackageResolution                       prevents packages from automatically being resolved to versions other than those recorded in the `Package.resolved` file</span><br><span class="line">    -json                                                    output as JSON (note: -json implies -quiet)</span><br><span class="line">    -allowProvisioningUpdates                                Allow xcodebuild to communicate with the Apple Developer website. For automatically signed targets, xcodebuild will create and update profiles, app IDs, and certificates. For manually signed targets, xcodebuild will download missing or updated provisioning profiles. Requires a developer account to have been added in Xcode's Accounts preference pane.</span><br><span class="line">    -allowProvisioningDeviceRegistration                     Allow xcodebuild to register your destination device on the developer portal if necessary. This flag only takes effect if -allowProvisioningUpdates is also passed.</span><br><span class="line">    -showBuildTimingSummary                                  display a report of the timings of all the commands invoked during the build</span><br><span class="line">    -create-xcframework                                      create an xcframework from prebuilt libraries; -help for more information.</span><br><span class="line"></span><br><span class="line">Available keys for -exportOptionsPlist:</span><br><span class="line"></span><br><span class="line">	compileBitcode : Bool</span><br><span class="line"></span><br><span class="line">		For non-App Store exports, should Xcode re-compile the app from bitcode? Defaults to YES.</span><br><span class="line"></span><br><span class="line">	destination : String</span><br><span class="line"></span><br><span class="line">		Determines whether the app is exported locally or uploaded to Apple. Options are export or upload. The available options vary based on the selected distribution method. Defaults to export.</span><br><span class="line"></span><br><span class="line">	embedOnDemandResourcesAssetPacksInBundle : Bool</span><br><span class="line"></span><br><span class="line">		For non-App Store exports, if the app uses On Demand Resources and this is YES, asset packs are embedded in the app bundle so that the app can be tested without a server to host asset packs. Defaults to YES unless onDemandResourcesAssetPacksBaseURL is specified.</span><br><span class="line"></span><br><span class="line">	generateAppStoreInformation : Bool</span><br><span class="line"></span><br><span class="line">		For App Store exports, should Xcode generate App Store Information for uploading with iTMSTransporter? Defaults to NO.</span><br><span class="line"></span><br><span class="line">	iCloudContainerEnvironment : String</span><br><span class="line"></span><br><span class="line">		If the app is using CloudKit, this configures the "com.apple.developer.icloud-container-environment" entitlement. Available options vary depending on the type of provisioning profile used, but may include: Development and Production.</span><br><span class="line"></span><br><span class="line">	installerSigningCertificate : String</span><br><span class="line"></span><br><span class="line">		For manual signing only. Provide a certificate name, SHA-1 hash, or automatic selector to use for signing. Automatic selectors allow Xcode to pick the newest installed certificate of a particular type. The available automatic selectors are "Mac Installer Distribution" and "Developer ID Installer". Defaults to an automatic certificate selector matching the current distribution method.</span><br><span class="line"></span><br><span class="line">	manifest : Dictionary</span><br><span class="line"></span><br><span class="line">		For non-App Store exports, users can download your app over the web by opening your distribution manifest file in a web browser. To generate a distribution manifest, the value of this key should be a dictionary with three sub-keys: appURL, displayImageURL, fullSizeImageURL. The additional sub-key assetPackManifestURL is required when using on-demand resources.</span><br><span class="line"></span><br><span class="line">	method : String</span><br><span class="line"></span><br><span class="line">		Describes how Xcode should export the archive. Available options: app-store, validation, ad-hoc, package, enterprise, development, developer-id, and mac-application. The list of options varies based on the type of archive. Defaults to development.</span><br><span class="line"></span><br><span class="line">	onDemandResourcesAssetPacksBaseURL : String</span><br><span class="line"></span><br><span class="line">		For non-App Store exports, if the app uses On Demand Resources and embedOnDemandResourcesAssetPacksInBundle isn't YES, this should be a base URL specifying where asset packs are going to be hosted. This configures the app to download asset packs from the specified URL.</span><br><span class="line"></span><br><span class="line">	provisioningProfiles : Dictionary</span><br><span class="line"></span><br><span class="line">		For manual signing only. Specify the provisioning profile to use for each executable in your app. Keys in this dictionary are the bundle identifiers of executables; values are the provisioning profile name or UUID to use.</span><br><span class="line"></span><br><span class="line">	signingCertificate : String</span><br><span class="line"></span><br><span class="line">		For manual signing only. Provide a certificate name, SHA-1 hash, or automatic selector to use for signing. Automatic selectors allow Xcode to pick the newest installed certificate of a particular type. The available automatic selectors are "Mac App Distribution", "iOS Distribution", "iOS Developer", "Developer ID Application", "Apple Distribution", "Mac Developer", and "Apple Development". Defaults to an automatic certificate selector matching the current distribution method.</span><br><span class="line"></span><br><span class="line">	signingStyle : String</span><br><span class="line"></span><br><span class="line">		The signing style to use when re-signing the app for distribution. Options are manual or automatic. Apps that were automatically signed when archived can be signed manually or automatically during distribution, and default to automatic. Apps that were manually signed when archived must be manually signed during distribtion, so the value of signingStyle is ignored.</span><br><span class="line"></span><br><span class="line">	stripSwiftSymbols : Bool</span><br><span class="line"></span><br><span class="line">		Should symbols be stripped from Swift libraries in your IPA? Defaults to YES.</span><br><span class="line"></span><br><span class="line">	teamID : String</span><br><span class="line"></span><br><span class="line">		The Developer Portal team to use for this export. Defaults to the team used to build the archive.</span><br><span class="line"></span><br><span class="line">	thinning : String</span><br><span class="line"></span><br><span class="line">		For non-App Store exports, should Xcode thin the package for one or more device variants? Available options: &lt;none&gt; (Xcode produces a non-thinned universal app), &lt;thin-for-all-variants&gt; (Xcode produces a universal app and all available thinned variants), or a model identifier for a specific device (e.g. "iPhone7,1"). Defaults to &lt;none&gt;.</span><br><span class="line"></span><br><span class="line">	uploadBitcode : Bool</span><br><span class="line"></span><br><span class="line">		For App Store exports, should the package include bitcode? Defaults to YES.</span><br><span class="line"></span><br><span class="line">	uploadSymbols : Bool</span><br><span class="line"></span><br><span class="line">		For App Store exports, should the package include symbols? Defaults to YES.</span><br></pre></td></tr></table></figure>
<h3 id="1、cd到代码目录"><a href="#1、cd到代码目录" class="headerlink" title="1、cd到代码目录"></a>1、cd到代码目录</h3><p>略</p>
<h3 id="2、开始打包"><a href="#2、开始打包" class="headerlink" title="2、开始打包"></a>2、开始打包</h3><ul>
<li>执行命令</li>
</ul>
<p>写在终端进行测试的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -workspace CJAutoPackageDemo.xcworkspace -scheme App1Enterprise -configuration Debug -sdk iphoneos12.2 ARCHS='arm64 armv7' IOS_DEVELOPMENT_TARGET=8.0 -derivedDataPath ../output/build/Debug-iphoneos archive -archivePath ../output/Debug-iphoneos/App1Enterprise.xcarchive</span><br></pre></td></tr></table></figure>
<p>写在脚本中的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo ""</span><br><span class="line">echo ""</span><br><span class="line">echo "&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; step5：begin compile project &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span><br><span class="line">xcodebuild -workspace $&#123;PROJECT_DIR&#125;/$&#123;APPPROJECT_NAME&#125;.xcworkspace -scheme $&#123;APPTARGET_NAME&#125; -configuration $&#123;BUILD_CONFIGURATION_NAME&#125; -sdk $&#123;SIMULATOR_OR_IOS_SDK&#125;$&#123;SDK_VERSION&#125; ARCHS='arm64 armv7' IOS_DEVELOPMENT_TARGET=$&#123;DEVELOPMENT_TARGET&#125; -derivedDataPath $&#123;BUILD_OUTPUT_PATH&#125; archive -archivePath "$&#123;ARCHIVE_OUTPUT_PATH&#125;/$&#123;APPTARGET_NAME&#125;.xcarchive"</span><br><span class="line">echo "&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; step5：end compile project &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;"</span><br></pre></td></tr></table></figure>
<p>参数介绍：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>-workspace</td>
<td>工程文件名（用cocopods集成的项目，没有的话 整个改为-xcodeproj xxx.xcodeproj）</td>
<td></td>
</tr>
<tr>
<td>-scheme</td>
<td>通过scheme指定不同的target</td>
<td></td>
</tr>
<tr>
<td>-configuration</td>
<td>对应的环境配置，就是编译的时候执行的模式<br>(测试Debug、预生产PreRelease、生产Release)</td>
<td></td>
</tr>
<tr>
<td>-archivePath</td>
<td>导出的.xcarchive的路径</td>
<td></td>
</tr>
<tr>
<td>-sdk</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-derivedDataPath</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-archivePath</td>
<td>导出的.xcarchive的路径</td>
</tr>
</tbody>
</table>
<h3 id="3、导出ipa"><a href="#3、导出ipa" class="headerlink" title="3、导出ipa"></a>3、导出ipa</h3><ul>
<li>执行命令</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">echo ""</span><br><span class="line">echo ""</span><br><span class="line">echo "&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; step6：begin archiving app to ipa &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span><br><span class="line">echo "PWD=$PWD"</span><br><span class="line">cd $&#123;ROOT_DIR&#125;</span><br><span class="line">echo "PWD=$PWD"</span><br><span class="line">echo "archivePath ==&gt;&gt;&gt; $&#123;ARCHIVE_OUTPUT_PATH&#125;/$&#123;APPTARGET_NAME&#125;.xcarchive"</span><br><span class="line">echo "exportPath ==&gt;&gt;&gt; $&#123;ARCHIVE_OUTPUT_PATH&#125;/$&#123;APPTARGET_NAME&#125;"</span><br><span class="line">echo "exportOptionsPlist ==&gt;&gt;&gt; $&#123;ExportOptionsPlist_PATH&#125;"</span><br><span class="line">xcodebuild -exportArchive -archivePath "$&#123;ARCHIVE_OUTPUT_PATH&#125;/$&#123;APPTARGET_NAME&#125;.xcarchive" -exportPath "$&#123;ARCHIVE_OUTPUT_PATH&#125;/$&#123;APPTARGET_NAME&#125;" -exportOptionsPlist "$&#123;ExportOptionsPlist_PATH&#125;" -allowProvisioningUpdates</span><br><span class="line">echo "&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; step6：end archiving app to ipa &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;"</span><br></pre></td></tr></table></figure>
<ul>
<li>参数解读：</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>-archivePath</td>
<td>.xcarchive文件的路径</td>
<td></td>
</tr>
<tr>
<td>-exportPath</td>
<td>导出的ipa的路径</td>
<td></td>
</tr>
<tr>
<td>-exportOptionsPlist</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="三、完整脚本内容-含使用Jenkins打包"><a href="#三、完整脚本内容-含使用Jenkins打包" class="headerlink" title="三、完整脚本内容(含使用Jenkins打包)"></a>三、完整脚本内容(含使用Jenkins打包)</h2><ul>
<li><p>测试项目工程详见：gitee中的<a href="https://gitee.com/dvlpCI/AutoPackage-iOS" target="_blank" rel="noopener">AutoPackage-iOS</a>工程</p>
</li>
<li><p>测试Jenkins工程详见：本地Jenkins中的<a href="http://localhost:8080/job/CJAutoPackage/" target="_blank" rel="noopener">CJAutoPackage</a>工程</p>
</li>
<li><p>最终Jenkins脚本如下图：</p>
<p><img src="/iOS/自动化/iOS进阶_打包/iOS打包_Jenkins脚本.png" alt="iOS打包_Jenkins脚本"></p>
</li>
</ul>
<p>附：没有权限问题的Jenkins正确的启动方式如下(按下面方式打开，才不会出现权限问题)：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> java -jar /Applications/Jenkins/jenkins.war --httpPort=8080</span></span><br></pre></td></tr></table></figure>
<p>当你执行完这两行命令的时候，你可以在浏览器上输入<code>http://localhost:8080</code>来访问Jenkins了。(如果你只执行了第一行，没执行第二行，会出现无法访问)</p>
<p>更多Jenkins知识请查看：<a href="../../实用工具/Jenkins">实用工具-&gt;Jenkins-&gt;Jenkins的安装与启动</a></p>
<h2 id="四、注意点"><a href="#四、注意点" class="headerlink" title="四、注意点"></a>四、注意点</h2><h3 id="1、多环境的打包"><a href="#1、多环境的打包" class="headerlink" title="1、多环境的打包"></a>1、多环境的打包</h3><p>主要注意为<code>xcodebuild -workspace</code>中的<code>-configuration</code>参数即可。</p>
<h3 id="2、多Target的打包注意"><a href="#2、多Target的打包注意" class="headerlink" title="2、多Target的打包注意"></a>2、多Target的打包注意</h3><p>多Target的Podfile文件ruby脚本内容，大概如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">source <span class="string">'https://github.com/CocoaPods/Specs.git'</span></span><br><span class="line">source <span class="string">'https://gitee.com/dvlproad/dvlproadSpecs'</span></span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">'8.0'</span></span><br><span class="line"><span class="comment">#use_frameworks!</span></span><br><span class="line">inhibit_all_warnings!</span><br><span class="line"></span><br><span class="line">post_install <span class="keyword">do</span> <span class="params">|installer|</span></span><br><span class="line">    </span><br><span class="line">    puts <span class="string">'Determining pod project minimal deployment target'</span></span><br><span class="line">    </span><br><span class="line">    pods_project = installer.pods_project</span><br><span class="line">    deployment_target_key = <span class="string">'IPHONEOS_DEPLOYMENT_TARGET'</span></span><br><span class="line">    deployment_targets = pods_project.build_configurations.map&#123; <span class="params">|config|</span> config.build_settings[deployment_target_key] &#125;</span><br><span class="line">    minimal_deployment_target = deployment_targets.min_by&#123; <span class="params">|version|</span> Gem::Version.new(version) &#125;</span><br><span class="line">    </span><br><span class="line">    puts <span class="string">'Minimal deployment target is '</span> + minimal_deployment_target</span><br><span class="line">    puts <span class="string">'Setting each pod deployment target to '</span> + minimal_deployment_target</span><br><span class="line">    </span><br><span class="line">    installer.pods_project.targets.each <span class="keyword">do</span> <span class="params">|target|</span></span><br><span class="line">        target.build_configurations.each <span class="keyword">do</span> <span class="params">|config|</span></span><br><span class="line">            config.build_settings[deployment_target_key] = minimal_deployment_target</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># There are no targets called "App1Common" in any Xcode projects</span></span><br><span class="line">abstract_target <span class="string">'App1Common'</span> <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># Has its own copy of App1Common + App1Enterprise</span></span><br><span class="line">    target <span class="string">'App1Enterprise'</span> <span class="keyword">do</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Has its own copy of App1Common + App1AppStore</span></span><br><span class="line">    target <span class="string">'App1AppStore'</span> <span class="keyword">do</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">target <span class="string">'CJAutoPackageDemoTests'</span> <span class="keyword">do</span></span><br><span class="line">   </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>通过脚本自动化打包的时候的注意点如下：</p>
<ol>
<li><p>主要注意为<code>xcodebuild -workspace</code>中的<code>-scheme</code>参数即可。</p>
</li>
<li><p>多Target后，记得在<strong>Linked Frameworks and Libraries</strong>中删除已经不存在的原本旧的<code>libPods-xxx.a</code>文件。否则，Jenkins脚本打包Build的时候会报错。</p>
<ul>
<li>Jenkins脚本打包Build的时候报错的信息如下：</li>
</ul>
<p><img src="/iOS/自动化/iOS进阶_打包/iOS打包_多Target打包1.png" alt="Jenkins脚本打包Build的时候报错的信息"></p>
<ul>
<li><p>多Target工程打包时候要删除的旧引用文件如下：</p>
<p><img src="/iOS/自动化/iOS进阶_打包/iOS打包_多Target打包2.png" alt="多Target工程打包时候要删除的旧引用文件"></p>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>其他参考</p>
<p><a href="https://www.jianshu.com/p/8767f986fb30?from=jiantop.com" target="_blank" rel="noopener">iOS命令行自动化集成打包全记录（多个target，多种环境）</a>不过觉得没必要看，因为没本文精简</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/自动化/iOS进阶_打包/" data-id="clf0xke4q00kvlyr4u0ph7ob2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/进阶/iOS进阶_推送模拟" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/进阶/iOS进阶_推送模拟/" class="article-date">
  <time datetime="2019-04-24T01:27:20.000Z" itemprop="datePublished">2019-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/进阶/iOS进阶_推送模拟/">iOS进阶_推送模拟</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="APNS模拟"><a href="#APNS模拟" class="headerlink" title="APNS模拟"></a>APNS模拟</h1><h2 id="一、使用SmartPush调试"><a href="#一、使用SmartPush调试" class="headerlink" title="一、使用SmartPush调试"></a>一、使用SmartPush调试</h2><ul>
<li>几个工具</li>
</ul>
<table>
<thead>
<tr>
<th>工具</th>
<th>Star</th>
<th>有效性</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/shaojiankui/SmartPush" target="_blank" rel="noopener">SmartPush</a></td>
<td>1144</td>
<td>测了有问题</td>
</tr>
<tr>
<td><a href="https://github.com/KnuffApp/Knuff" target="_blank" rel="noopener">Knuff</a></td>
<td>4432</td>
<td>亲测有效</td>
</tr>
<tr>
<td><a href="https://github.com/immobiliare/ApnsPHP" target="_blank" rel="noopener">ApnsPHP</a></td>
<td>1361</td>
<td>未测</td>
</tr>
<tr>
<td><a href="https://github.com/manifestinteractive/easyapns" target="_blank" rel="noopener">easyapns</a></td>
<td>706</td>
<td>未测</td>
</tr>
</tbody>
</table>
<h2 id="二、自己搭建"><a href="#二、自己搭建" class="headerlink" title="二、自己搭建"></a>二、自己搭建</h2><p>脚本实现参考文章：</p>
<ul>
<li><p><a href="https://blog.csdn.net/TuGeLe/article/details/79699926" target="_blank" rel="noopener">iOS客户端如何测试推送</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/ablettchen/p/4162350.html" target="_blank" rel="noopener">iOS 远程推送的实现</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/进阶/iOS进阶_推送模拟/" data-id="clf0xke4t00lblyr4mjbpmjvi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS/进阶/iOS证书" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/iOS/进阶/iOS证书/" class="article-date">
  <time datetime="2019-04-24T01:27:20.000Z" itemprop="datePublished">2019-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/iOS/进阶/iOS证书/">iOS证书</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="iOS证书"><a href="#iOS证书" class="headerlink" title="iOS证书"></a>iOS证书</h1><h2 id="二、推送证书"><a href="#二、推送证书" class="headerlink" title="二、推送证书"></a>二、推送证书</h2><ul>
<li><a href="https://help.aliyun.com/document_detail/100097.html" target="_blank" rel="noopener">制作 iOS 推送证书</a></li>
</ul>
<p><img src="/iOS/进阶/iOS证书/iOS%E8%AF%81%E4%B9%A6/image-20230302172748572.png" alt="image-20230302172748572" style="zoom: 50%;"></p>
<h3 id="2、问题"><a href="#2、问题" class="headerlink" title="2、问题"></a>2、问题</h3><h4 id="1、iOS证书不受信任解决办法"><a href="#1、iOS证书不受信任解决办法" class="headerlink" title="1、iOS证书不受信任解决办法"></a>1、iOS证书不受信任解决办法</h4><p><img src="/iOS/进阶/iOS证书/iOS%E8%AF%81%E4%B9%A6/image-20230302173013788.png" alt="image-20230302173013788"></p>
<p>重新下载<a href="https://developer.apple.com/cn/support/code-signing/" target="_blank" rel="noopener">AppleWWDRCA</a>并安装。即下载最新的AppleWWDR</p>
<p><img src="/iOS/进阶/iOS证书/iOS%E8%AF%81%E4%B9%A6/image-20230302173155682.png" alt="image-20230302173155682" style="zoom: 33%;"></p>
<p>进入后</p>
<p><img src="/iOS/进阶/iOS证书/iOS%E8%AF%81%E4%B9%A6/image-20230302173236106.png" alt="image-20230302173236106" style="zoom:33%;"></p>
<p>进入后</p>
<p><img src="/iOS/进阶/iOS证书/iOS%E8%AF%81%E4%B9%A6/image-20230302173318271.png" alt="image-20230302173318271" style="zoom: 25%;"></p>
<p>这里我们下载个G4就够了</p>
<h4 id="2、iOS-推送证书无法导出p12文件"><a href="#2、iOS-推送证书无法导出p12文件" class="headerlink" title="2、iOS 推送证书无法导出p12文件"></a>2、iOS 推送证书无法导出p12文件</h4><p>请一定要切换到”我的证书目录下”</p>
<p><img src="/iOS/进阶/iOS证书/iOS%E8%AF%81%E4%B9%A6/image-20230302173554802.png" alt="image-20230302173554802" style="zoom:50%;"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/iOS/进阶/iOS证书/" data-id="clf0xke4t00lflyr4cpgohrj4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-实用工具/Jenkins/Jenkins上显示二维码图片" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/实用工具/Jenkins/Jenkins上显示二维码图片/" class="article-date">
  <time datetime="2019-04-24T01:27:20.000Z" itemprop="datePublished">2019-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实用工具/">实用工具</a>►<a class="article-category-link" href="/categories/实用工具/Jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/实用工具/Jenkins/Jenkins上显示二维码图片/">第4节、Jenkins使用问题常见</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="Jenkins上显示二维码图片"><a href="#Jenkins上显示二维码图片" class="headerlink" title="Jenkins上显示二维码图片"></a>Jenkins上显示二维码图片</h1><h2 id="一、在Jenkins上显示二维码图片"><a href="#一、在Jenkins上显示二维码图片" class="headerlink" title="一、在Jenkins上显示二维码图片"></a>一、在Jenkins上显示二维码图片</h2><p><a href="https://testerhome.com/topics/19161#" target="_blank" rel="noopener">持续集成 从零开始在 Jenkins 上显示打包二维码</a></p>
<h3 id="1-安装Jenkins插件"><a href="#1-安装Jenkins插件" class="headerlink" title="1. 安装Jenkins插件"></a>1. 安装Jenkins插件</h3><ul>
<li><p>进入Jenkins工作台<code>系统管理</code>&gt;<code>插件管理</code>&gt;<code>可选插件</code>&gt;<code>过滤</code>&gt;<code>build-name-setter</code>，勾选对应插件<code>直接安装</code></p>
<p><img src="/实用工具/Jenkins/Jenkins上显示二维码图片/showQR1.png" alt="showQR1"></p>
</li>
<li><p>返回<code>工作台首页</code>，选择一个<code>Build工程</code>&gt;<code>配置</code></p>
</li>
<li><p>可以看到<code>构建环境</code>处多了一个<code>Set Build Name</code>的选项，即插件安装成功</p>
<p><img src="/实用工具/Jenkins/Jenkins上显示二维码图片/showQR2.png" alt="showQR2"></p>
</li>
</ul>
<h3 id="2-配置Set-Build-Name插件"><a href="#2-配置Set-Build-Name插件" class="headerlink" title="2. 配置Set Build Name插件"></a>2. 配置<code>Set Build Name</code>插件</h3><p>查看Jekins的环境变量参数，我们可以看到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BUILD_NUMBER</span><br><span class="line">The current build number, such as &quot;153&quot;</span><br><span class="line">BUILD_DISPLAY_NAME</span><br><span class="line">The display name of the current build, which is something like &quot;#153&quot; by default.</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>Set Build Name</code>就是修改这个<code>BUILD_DISPLAY_NAME</code>，默认为<code>#${BUILD_NUMBER}</code></p>
</li>
<li><p>Jenkins的默认安全设置，会把所有的输入都当成纯文本，为了使图片链接生效，需要更改一下<code>系统管理</code>&gt;<code>全局安全配置</code>&gt;<code>标记格式器</code>，将<code>纯文本</code>选项改为<code>Safe HTML</code>,保存设置</p>
<p><img src="/实用工具/Jenkins/Jenkins上显示二维码图片/showQR3.png" alt="showQR3"></p>
</li>
<li><p>点击<code>Set Build Name</code>的高级，会出现<code>Build Description</code>的设置，可以在这里写入一个图片的链接 <code>&lt;img src=&quot;http://ww1.sinaimg.cn/large/007x9vWyly1g2zgykchtmj30a7064dk4.jpg&quot; height=&quot;200&quot; width=&quot;200/&gt;</code></p>
</li>
<li><p>Build完成之后即可在Build历史中看到对应的图片链接</p>
<p><img src="http://ww1.sinaimg.cn/large/007x9vWyly1g2zhbf2iizj30a206kwho.jpg" alt="img"></p>
</li>
</ul>
<p><img src="/实用工具/Jenkins/Jenkins上显示二维码图片/showQR4_update1.png" alt="showQR4_update1"></p>
<h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/实用工具/Jenkins/Jenkins上显示二维码图片/" data-id="clf0xke4z00m8lyr4avo3gicr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/实用工具/">实用工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-实用工具/Jenkins/Jenkins参数化构建" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/实用工具/Jenkins/Jenkins参数化构建/" class="article-date">
  <time datetime="2019-04-24T01:27:20.000Z" itemprop="datePublished">2019-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实用工具/">实用工具</a>►<a class="article-category-link" href="/categories/实用工具/Jenkins/">Jenkins</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/实用工具/Jenkins/Jenkins参数化构建/">第4节、Jenkins使用问题常见</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="Jenkins自定义构建参数使用"><a href="#Jenkins自定义构建参数使用" class="headerlink" title="Jenkins自定义构建参数使用"></a>Jenkins自定义构建参数使用</h1><p><a href="https://blog.csdn.net/qq_21047625/article/details/99643894?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.add_param_isCf&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.add_param_isCf" target="_blank" rel="noopener">Jenkins自定义构建参数使用</a></p>
<p><img src="/实用工具/Jenkins/Jenkins参数化构建/parameterized1.png" alt="parameterized1"></p>
<p><img src="/实用工具/Jenkins/Jenkins参数化构建/parameterized2.png" alt="parameterized2"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/实用工具/Jenkins/Jenkins参数化构建/" data-id="clf0xke5300mglyr4emjng0fz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/实用工具/">实用工具</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/20/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/22/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/">Architecture</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第一章：架构分层/">第一章：架构分层</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第三章：h5与app交互/">第三章：h5与app交互</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第二章：体验优化/">第二章：体验优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第四章：webView/">第四章：webView</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/无瑕疵的混编登录页/">无瑕疵的混编登录页</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第一章：Flutter入门/">第一章：Flutter入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第七章：规范/">第七章：规范</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第三章：原生项目与Flutter的交互/">第三章：原生项目与Flutter的交互</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第九章：框架升级/">第九章：框架升级</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第二章：集成Flutter到原生项目/">第二章：集成Flutter到原生项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第五章：详解/">第五章：详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第八章：状态管理/">第八章：状态管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第六章：进阶/">第六章：进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第四章：Flutter登录页实战/">第四章：Flutter登录页实战</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/README/">README</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/React/第一章：React入门/">第一章：React入门</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/">ReactNative</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第一章：ReactNative入门/">第一章：ReactNative入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第一章：React入门/">第一章：React入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第五章：ReactNative详解/">第五章：ReactNative详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第八章：ReactNative实践/">第八章：ReactNative实践</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第六章：ReactNative进阶/">第六章：ReactNative进阶</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/">Script</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Script/JQuery/">JQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Shell/">Shell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Weex/">Weex</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Weex/第一章：Weex入门/">第一章：Weex入门</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/Swift/">Swift</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/app安全/">app安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/混编/">混编</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/移动分析/">移动分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/自动化/">自动化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/证书发版/">证书发版</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/npmjs/">npmjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码管理/">代码管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/">实用工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/GitBook/">GitBook</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/Jenkins/">Jenkins</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/XAMPP/">XAMPP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/Zentao/">Zentao</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/其他小工具/">其他小工具</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作常识/">工作常识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术常识/">技术常识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活常识/">生活常识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/目前痛点/">目前痛点</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程工具/">编程工具</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Architecture/">Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CocoaPods/">CocoaPods</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/">Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JQuery/">JQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/README/">README</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactNative/">ReactNative</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Script/">Script</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Weex/">Weex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app安全/">app安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npmjs/">npmjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/交互/">交互</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实用工具/">实用工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作常识/">工作常识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术常识/">技术常识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/抓包/">抓包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文档管理/">文档管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境搭建/">环境搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活常识/">生活常识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/痛点/">痛点</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/登录页实战/">登录页实战</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动分析/">移动分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程工具/">编程工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动化/">自动化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨平台/">跨平台</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云/">阿里云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云oss/">阿里云oss</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集成/">集成</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Architecture/" style="font-size: 16.36px;">Architecture</a> <a href="/tags/CocoaPods/" style="font-size: 10px;">CocoaPods</a> <a href="/tags/Flutter/" style="font-size: 19.09px;">Flutter</a> <a href="/tags/Git/" style="font-size: 12.73px;">Git</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Jenkins/" style="font-size: 14.55px;">Jenkins</a> <a href="/tags/Python/" style="font-size: 10.91px;">Python</a> <a href="/tags/README/" style="font-size: 10px;">README</a> <a href="/tags/React/" style="font-size: 10.91px;">React</a> <a href="/tags/ReactNative/" style="font-size: 16.36px;">ReactNative</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Script/" style="font-size: 15.45px;">Script</a> <a href="/tags/Shell/" style="font-size: 11.82px;">Shell</a> <a href="/tags/Swift/" style="font-size: 12.73px;">Swift</a> <a href="/tags/Weex/" style="font-size: 10px;">Weex</a> <a href="/tags/app安全/" style="font-size: 10px;">app安全</a> <a href="/tags/iOS/" style="font-size: 18.18px;">iOS</a> <a href="/tags/npmjs/" style="font-size: 10.91px;">npmjs</a> <a href="/tags/交互/" style="font-size: 12.73px;">交互</a> <a href="/tags/实用工具/" style="font-size: 17.27px;">实用工具</a> <a href="/tags/工作常识/" style="font-size: 10px;">工作常识</a> <a href="/tags/技术常识/" style="font-size: 12.73px;">技术常识</a> <a href="/tags/抓包/" style="font-size: 10px;">抓包</a> <a href="/tags/文档管理/" style="font-size: 14.55px;">文档管理</a> <a href="/tags/环境搭建/" style="font-size: 10.91px;">环境搭建</a> <a href="/tags/生活常识/" style="font-size: 10px;">生活常识</a> <a href="/tags/痛点/" style="font-size: 10px;">痛点</a> <a href="/tags/登录页实战/" style="font-size: 12.73px;">登录页实战</a> <a href="/tags/移动分析/" style="font-size: 11.82px;">移动分析</a> <a href="/tags/编程工具/" style="font-size: 11.82px;">编程工具</a> <a href="/tags/自动化/" style="font-size: 11.82px;">自动化</a> <a href="/tags/跨平台/" style="font-size: 20px;">跨平台</a> <a href="/tags/阿里云/" style="font-size: 10px;">阿里云</a> <a href="/tags/阿里云oss/" style="font-size: 13.64px;">阿里云oss</a> <a href="/tags/集成/" style="font-size: 11.82px;">集成</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/Architecture架构/h5_native_interacte/h5_open_app/dvlp_h5_open_app_browser_url_demo/">(no title)</a>
          </li>
        
          <li>
            <a href="/Architecture架构/h5_native_interacte/h5_open_app/dvlp_h5_open_app_app_route_url_demo/">(no title)</a>
          </li>
        
          <li>
            <a href="/Architecture架构/h5_native_interacte/commonjs/common_url_update/">(no title)</a>
          </li>
        
          <li>
            <a href="/Architecture架构/h5_native_interacte/commonjs/common_read_file/">(no title)</a>
          </li>
        
          <li>
            <a href="/Architecture架构/h5_native_interacte/h5_open_app/dvlp_h5_open_app_app_route_url_demo/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 dvlproad<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>