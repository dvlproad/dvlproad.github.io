<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>dvlproadの博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="学而时习之不亦说乎(dvlproad)">
<meta name="keywords" content="blog,IT,iOS,Flutter">
<meta property="og:type" content="website">
<meta property="og:title" content="dvlproadの博客">
<meta property="og:url" content="https://dvlproad.github.io/page/2/index.html">
<meta property="og:site_name" content="dvlproadの博客">
<meta property="og:description" content="学而时习之不亦说乎(dvlproad)">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dvlproadの博客">
<meta name="twitter:description" content="学而时习之不亦说乎(dvlproad)">
  
    <link rel="alternate" href="/atom.xml" title="dvlproadの博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">dvlproadの博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">整理及总结平时过程中的知识点</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dvlproad.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Architecture架构/基础规范/请求规范" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Architecture架构/基础规范/请求规范/" class="article-date">
  <time datetime="2024-04-29T09:05:41.000Z" itemprop="datePublished">2024-04-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Architecture/">Architecture</a>►<a class="article-category-link" href="/categories/Architecture/第三章：基础规范/">第三章：基础规范</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Architecture架构/基础规范/请求规范/">请求规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h2 id="一、各种示例"><a href="#一、各种示例" class="headerlink" title="一、各种示例"></a>一、各种示例</h2><h3 id="1、request的HEADER公共入参-固定-可变的-示例"><a href="#1、request的HEADER公共入参-固定-可变的-示例" class="headerlink" title="1、request的HEADER公共入参(固定+可变的)示例"></a>1、request的HEADER公共入参(固定+可变的)示例</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- HEADER(REQUEST):</span><br><span class="line">&#123;</span><br><span class="line"> <span class="attr">"version"</span>:<span class="string">"1.16.30"</span>,</span><br><span class="line"> <span class="attr">"buildNumber"</span>:<span class="string">"16301610"</span>,</span><br><span class="line"> <span class="attr">"platform"</span>:<span class="string">"iOS"</span>,</span><br><span class="line"> <span class="attr">"appType"</span>:<span class="string">"monkey"</span>,</span><br><span class="line"> <span class="attr">"appFeatureType"</span>:<span class="string">"dev"</span>,</span><br><span class="line"> <span class="attr">"packageChannel"</span>:<span class="string">"general"</span>,</span><br><span class="line"> <span class="attr">"trace_id"</span>:<span class="string">"1683158692451101/2023-05-04 08:04:52/_sy_]onw^w^"</span>,</span><br><span class="line"> <span class="attr">"Authorization"</span>:<span class="string">"bearer clientApp247deea3-da67-47bc-94f7-04b83ca0fb07"</span>,</span><br><span class="line"> <span class="attr">"content-type"</span>:<span class="string">"application/json"</span>,</span><br><span class="line"> <span class="attr">"content-length"</span>:<span class="string">"28"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参数详情介绍见下文《公共入参介绍》。</p>
<h3 id="2、request的BODY公共入参-固定-可变的-示例"><a href="#2、request的BODY公共入参-固定-可变的-示例" class="headerlink" title="2、request的BODY公共入参(固定+可变的)示例"></a>2、request的BODY公共入参(固定+可变的)示例</h3><p>示例可详见 <a href="埋点相关/埋点规范_结构">《埋点规范》–【埋点入参】–固定的公共入参</a> 。附：其实改部分也可考虑放在HEADER中</p>
<h3 id="3、response的返回结构示例"><a href="#3、response的返回结构示例" class="headerlink" title="3、response的返回结构示例"></a>3、response的返回结构示例</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"请求成功，但是业务处理失败"</span>,</span><br><span class="line">  <span class="attr">"errorCode"</span>: <span class="number">1001</span>,</span><br><span class="line">  <span class="attr">"errorMessage"</span>: <span class="string">"参数name不能为空"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"timestamp"</span>: <span class="string">"2023-05-04T09:00:00Z"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二、设置request的HEADER公共入参-固定不变7个-可变N个"><a href="#二、设置request的HEADER公共入参-固定不变7个-可变N个" class="headerlink" title="二、设置request的HEADER公共入参(固定不变7个+可变N个)"></a>二、设置request的HEADER公共入参(固定不变7个+可变N个)</h2><p>网络库初始化所需的header参数</p>
<table>
<thead>
<tr>
<th>header形参</th>
<th>header形参名</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>必填 Map</td>
<td>headerCommonFixParams</td>
<td>header 中公共但【不变】的参数</td>
<td>如上</td>
</tr>
<tr>
<td>可选 block</td>
<td>headerCommonChangeParamsGetBlock</td>
<td>header 中公共但【会变】的参数</td>
<td>{ ‘trace_id’: TraceUtil.traceId() }</td>
</tr>
<tr>
<td>可空 String</td>
<td>headerAuthorization</td>
<td>header 中公共但会变的参数</td>
</tr>
</tbody>
</table>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、初始化网络库的时候定义</span></span><br><span class="line">required <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; headerCommonFixParams, <span class="comment">// header 中公共但不变的参数</span></span><br><span class="line"><span class="built_in">String</span>? headerAuthorization, <span class="comment">// header 中公共但【基本不会变】的参数--Authorization</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; <span class="built_in">Function</span>()? headerCommonChangeParamsGetBlock, <span class="comment">// header 中公共但会变的参数</span></span><br><span class="line"><span class="comment">// 示例:</span></span><br><span class="line">headerCommonChangeParamsGetBlock: () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">'trace_id'</span>: TraceUtil.traceId(),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="comment">// 1.2、初始化网络库的时候使用 headerCommonFixParams</span></span><br><span class="line"><span class="comment">// headers 的所有参数处理</span></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; headers = &#123;&#125;;</span><br><span class="line"><span class="comment">// ① header 中公共但【固定不变】的参数</span></span><br><span class="line">  headers.addAll(headerCommonFixParams);</span><br><span class="line"><span class="comment">// ② header 中公共但【基本不会变】的参数--Authorization--策略：因为这只是一次性取值，后面的没法自动变化，需要调用update接口</span></span><br><span class="line">  <span class="keyword">if</span> (headerAuthorization != <span class="keyword">null</span> &amp;&amp; headerAuthorization.isNotEmpty) &#123;</span><br><span class="line">    headers.addAll(&#123;<span class="string">'Authorization'</span>: headerAuthorization&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 将 header 参数设置到网络单例中</span></span><br><span class="line">dio!.options = dio!.options.copyWith(</span><br><span class="line">    baseUrl: baseUrl,</span><br><span class="line">    connectTimeout: connectTimeout,</span><br><span class="line">    receiveTimeout: receiveTimeout,</span><br><span class="line">    contentType: contentType,</span><br><span class="line">    headers: headers,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、具体发起网络请求里进行: headers 的所有参数处理</span></span><br><span class="line"><span class="keyword">if</span> (options.headers != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (optionsHeaderCommonChangeParamsGetBlock != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; customHeaders =</span><br><span class="line">            optionsHeaderCommonChangeParamsGetBlock();</span><br><span class="line">        options.headers!.addAll(customHeaders);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="1、【固定的】公共请求参数-headerCommonFixParams-7个"><a href="#1、【固定的】公共请求参数-headerCommonFixParams-7个" class="headerlink" title="1、【固定的】公共请求参数 headerCommonFixParams(7个)"></a>1、【固定的】公共请求参数 headerCommonFixParams(7个)</h3><p>获取方法形如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">headerCommonFixParams: <span class="keyword">await</span> CommonParamsHelper.commonHeaderParams(</span><br><span class="line">    appFeatureType: appFeatureType,</span><br><span class="line">    channel: channelName,</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>
<p>参数介绍如下：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>类型</th>
<th>字段</th>
<th>值示例</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>平台系统</td>
<td>platform</td>
<td>iOS/Android</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>app的唯一标识</td>
<td>appType</td>
<td></td>
<td>区分出同一公司的多个app</td>
</tr>
<tr>
<td>3</td>
<td>版本号（1.月.日）</td>
<td>version</td>
<td>1.04.30</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>版本编译号（月日时分）<br>安卓隔年需加+12</td>
<td>buildNumber</td>
<td>04301610</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>功能类型</td>
<td>appFeatureType</td>
<td>dev、inner、formal</td>
<td>区分出内测、正式功能</td>
</tr>
<tr>
<td>6</td>
<td>渠道</td>
<td>packageChannel</td>
<td>appstore</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>唯一设备码</td>
<td>deviceId</td>
<td></td>
<td>未登录时的关闭检查更新</td>
</tr>
</tbody>
</table>
<h4 id="1-1、平台-iOS-Android"><a href="#1-1、平台-iOS-Android" class="headerlink" title="1.1、平台(iOS/Android)"></a>1.1、平台(iOS/Android)</h4><h4 id="1-2、app类型-同一公司多个app-App的唯一标识"><a href="#1-2、app类型-同一公司多个app-App的唯一标识" class="headerlink" title="1.2、app类型(同一公司多个app)/App的唯一标识"></a>1.2、app类型(同一公司多个app)/App的唯一标识</h4><h4 id="1-3、版本号（1-月-日）"><a href="#1-3、版本号（1-月-日）" class="headerlink" title="1.3、版本号（1.月.日）"></a>1.3、版本号（1.月.日）</h4><h4 id="1-4、版本编译号（月日时分）"><a href="#1-4、版本编译号（月日时分）" class="headerlink" title="1.4、版本编译号（月日时分）"></a>1.4、版本编译号（月日时分）</h4><h4 id="1-5、功能类型-蒲公英dev、内测inner、正式formal"><a href="#1-5、功能类型-蒲公英dev、内测inner、正式formal" class="headerlink" title="1.5、功能类型(蒲公英dev、内测inner、正式formal)"></a>1.5、功能类型(蒲公英dev、内测inner、正式formal)</h4><h4 id="1-6、渠道"><a href="#1-6、渠道" class="headerlink" title="1.6、渠道"></a>1.6、渠道</h4><table>
<thead>
<tr>
<th>平台</th>
<th>应用商店</th>
<th>渠道名</th>
</tr>
</thead>
<tbody>
<tr>
<td>iOS</td>
<td>App Store</td>
<td>general</td>
</tr>
<tr>
<td>Android</td>
<td>华为应用市场</td>
<td>huawei</td>
</tr>
<tr>
<td>Android</td>
<td>小米应用商店</td>
<td>Xiaomi</td>
</tr>
<tr>
<td>Android</td>
<td>Vivo应用商店</td>
<td>vivo</td>
</tr>
<tr>
<td>Android</td>
<td>ColorOS应用商店</td>
<td>oppo</td>
</tr>
<tr>
<td>Android</td>
<td>应用宝</td>
<td>yingyongbao</td>
</tr>
<tr>
<td>Android</td>
<td>360手机助手</td>
<td>360</td>
</tr>
<tr>
<td>Android</td>
<td>百度手机助手</td>
<td>baidu</td>
</tr>
<tr>
<td>Android</td>
<td>酷安应用市场</td>
<td>kuan</td>
</tr>
<tr>
<td>Android</td>
<td>阿里应用市场</td>
<td>alibaba</td>
</tr>
<tr>
<td>Android</td>
<td>官网包</td>
<td>general</td>
</tr>
</tbody>
</table>
<h4 id="1-7、DeviceId-唯一设备码"><a href="#1-7、DeviceId-唯一设备码" class="headerlink" title="1.7、DeviceId 唯一设备码"></a>1.7、DeviceId 唯一设备码</h4><p>Android 端主要取 Android ID </p>
<p>iOS 端先尝试获取 IDFA，如果获取不到，则取 IDFV</p>
<h3 id="2、【变化的】公共请求参数-headerCommonChangeParamsGetBlock"><a href="#2、【变化的】公共请求参数-headerCommonChangeParamsGetBlock" class="headerlink" title="2、【变化的】公共请求参数 headerCommonChangeParamsGetBlock"></a>2、【变化的】公共请求参数 headerCommonChangeParamsGetBlock</h3><p>获取方法形如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">headerCommonChangeParamsGetBlock: () &#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="string">'trace_id'</span>: TraceUtil.traceId(),</span><br><span class="line">       <span class="string">'Authorization'</span>: headerAuthorization,</span><br><span class="line">     &#125;;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<p>参数介绍如下：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>类型</th>
<th>字段</th>
<th>值示例</th>
<th>其他</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>用户token</td>
<td>Authorization</td>
<td>bearer clientApp247deea3-da67-47bc-94f7-04b83ca0fb07</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>跟踪id</td>
<td>trace_id</td>
<td>1683158692451101/2023-05-04 08:04:52/_sy_]onw^w^</td>
</tr>
</tbody>
</table>
<h4 id="2-1、用户-Authorization"><a href="#2-1、用户-Authorization" class="headerlink" title="2.1、用户 Authorization"></a>2.1、用户 Authorization</h4><p>该值为登录时候，后台接口返回。且需要在用户状态变更的时候同步更新。</p>
<h4 id="2-2、跟踪-trace-id"><a href="#2-2、跟踪-trace-id" class="headerlink" title="2.2、跟踪 trace_id"></a>2.2、跟踪 trace_id</h4><p>组成部分：时间戳/时间字符串/10位随机字符串</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/foundation.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TraceUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> traceId() &#123;</span><br><span class="line">    <span class="built_in">String</span> timeStamp = <span class="built_in">DateTime</span>.now().microsecondsSinceEpoch.toString();</span><br><span class="line">    <span class="built_in">String</span> timeString = <span class="built_in">DateTime</span>.now().toString().substring(<span class="number">0</span>, <span class="number">19</span>);</span><br><span class="line">    <span class="built_in">String</span> randomString = TraceUtil.generateRandomString(<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">String</span> traceId = <span class="string">"<span class="subst">$timeStamp</span>/<span class="subst">$timeString</span>/_<span class="subst">$randomString<span class="string">";</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    return traceId;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string"></span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  // Declare a fucntion for reusable purpose</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  static String generateRandomString(int len) &#123;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    final _random = Random();</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    final result = String.fromCharCodes(</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">        List.generate(len, (index) =&gt; _random.nextInt(33) + 89));</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    return result;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">&#125;</span></span></span></span><br></pre></td></tr></table></figure>
<h2 id="三、设置request的BODY公共入参-当不放header时候"><a href="#三、设置request的BODY公共入参-当不放header时候" class="headerlink" title="三、设置request的BODY公共入参(当不放header时候)"></a>三、设置request的BODY公共入参(当不放header时候)</h2><p>详见 <a href="./埋点规范">《埋点规范》–【埋点入参】–固定的公共入参</a> 其实可考虑放在HEADER中</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、初始化网络库的时候定义</span></span><br><span class="line">  required <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; bodyCommonFixParams, <span class="comment">// body 中公共但不变的参数</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; <span class="built_in">Function</span>()? bodyCommonChangeParamsGetBlock, <span class="comment">// body 中公共但会变的参数（一般可考虑放在header中）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、具体发起网络请求里进行: body 的所有参数处理</span></span><br><span class="line"><span class="comment">// ① body 中公共但不变的参数</span></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; allParams = <span class="built_in">Map</span>.from(_bodyCommonFixParams);</span><br><span class="line"><span class="comment">// ② body 中公共但会变的参数</span></span><br><span class="line">  <span class="keyword">if</span> (_bodyCommonChangeParamsGetBlock != <span class="keyword">null</span>) &#123;</span><br><span class="line">    allParams.addAll(_bodyCommonChangeParamsGetBlock!());</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// ③ body 中自定义的其他参数</span></span><br><span class="line">  <span class="keyword">if</span> (customParams != <span class="keyword">null</span> &amp;&amp; customParams.isNotEmpty) &#123;</span><br><span class="line">    allParams.addAll(customParams);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="四、response返回结构介绍"><a href="#四、response返回结构介绍" class="headerlink" title="四、response返回结构介绍"></a>四、response返回结构介绍</h2><p>为了准确判断业务是否成功，通常需要同时判断status和errorCode两个字段。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"请求成功，但是业务处理失败"</span>,</span><br><span class="line">  <span class="attr">"errorCode"</span>: <span class="number">1001</span>,</span><br><span class="line">  <span class="attr">"errorMessage"</span>: <span class="string">"参数name不能为空"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"timestamp"</span>: <span class="string">"2023-05-04T09:00:00Z"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>状态码（status code）：表示请求的处理结果，常见的状态码包括200（请求成功）、400（请求参数错误）、401（未授权）、403（禁止访问）、404（请求的资源不存在）等。</li>
<li>消息（message）：对请求处理结果的简要描述，可以用于前端展示错误信息或者提示。</li>
<li>数据（data）：请求处理成功后返回的数据，例如json格式的数据、图片、文件等。</li>
<li>时间戳（timestamp）：表示服务器处理请求的时间，可以用于前端调试和日志记录。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) &#123;</span><br><span class="line">  // 请求成功，继续处理业务逻辑</span><br><span class="line">  if (response.errorCode) &#123;</span><br><span class="line">    // 业务逻辑处理失败，根据errorCode和errorMessage进行相应的处理</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // 业务逻辑处理成功，根据data字段获取返回的数据</span><br><span class="line">  &#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  // 请求失败，根据错误码和错误信息进行相应的处理</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="附1：不建议把status和errorCode用同一个字段表示"><a href="#附1：不建议把status和errorCode用同一个字段表示" class="headerlink" title="附1：不建议把status和errorCode用同一个字段表示"></a>附1：不建议把status和errorCode用同一个字段表示</h3><blockquote>
<p>将状态码（status code）和业务错误码（error code）合并成一个字段可能会带来一些问题，建议不要采用这种方法。</p>
<p>首先，将状态码和业务错误码合并在一个字段中会导致客户端处理逻辑复杂化。客户端需要在处理请求结果时先判断状态码，然后再解析业务错误码，这会增加客户端代码的复杂度，降低代码的可维护性。</p>
<p>其次，将状态码和业务错误码合并在一个字段中还会带来一些歧义。状态码是HTTP协议定义的标准字段，具有固定的含义，例如200表示请求成功，400表示请求参数错误，500表示服务器内部错误等。而业务错误码是根据具体业务定义的，具有一定的灵活性。将这两种含义合并在一起会导致状态码的含义变得模糊，不利于代码的可读性和维护性。</p>
<p>因此，建议在response结构中分别使用状态码和业务错误码两个字段来表示请求的处理结果。这样可以使客户端处理逻辑更加清晰，并且可以使状态码和业务错误码的含义保持清晰和统一。</p>
</blockquote>
<h2 id="五、埋点的入参"><a href="#五、埋点的入参" class="headerlink" title="五、埋点的入参"></a>五、埋点的入参</h2><p>详见<a href="./埋点规范">埋点规范</a></p>
<h2 id="五、请求接口的整理规范"><a href="#五、请求接口的整理规范" class="headerlink" title="五、请求接口的整理规范"></a>五、请求接口的整理规范</h2><p>背景：为了能够将请求接口的用途和页面关联起来。</p>
<p>目的：①便于省去后端频繁询问该页面该位置调用的是什么接口（虽然已有日志，但是仍有部分后端人员懒到不愿去自己排查）。</p>
<p>②完成前端依赖服务关系的梳理，并一直到后台各级服务-数据层。</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>参数</th>
<th>必填</th>
<th>描述与其目的 purpose</th>
<th>策略</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.1</td>
<td>caller_page</td>
<td>必填</td>
<td>接口调用者(页面、管理器等)<br>①多页面调用接口：告知后台，以对业务进行逻辑区分处理<br>②日志使用：方便查看与统计每个页面调用的接口</td>
<td>可全局记录获当前页面<br>eg: goods_detail_page</td>
</tr>
<tr>
<td>1.2</td>
<td>caller_view</td>
<td>可空</td>
<td>接口调用者(视图)<br>同上(有时候一个page下有多个tab)</td>
<td>必须请求单独设置<br>eg: sku_choose_window</td>
</tr>
<tr>
<td>2</td>
<td>caller_times</td>
<td>必填</td>
<td>调用场景<br>①页面打开：open_page<br>②页面输入：input<br>②页面点击：click</td>
<td>open_page\</td>
<td>input\</td>
<td>click</td>
</tr>
<tr>
<td>3</td>
<td>purpose</td>
<td>必填</td>
<td>接口用途中文<br>①日志使用：便于快速/直接筛选出问题根源接口</td>
<td>eg: 商品搜索</td>
</tr>
<tr>
<td>4</td>
<td>byApper</td>
<td>必填</td>
<td>前台具体开发者的id</td>
<td>eg：byQian</td>
</tr>
<tr>
<td>5</td>
<td>byApier</td>
<td>必填</td>
<td>后端具体开发者的id</td>
<td>eg：byApier2</td>
</tr>
</tbody>
</table>
<p>方案：</p>
<p>将 purpose 添加到 body 的参数中</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_params.addPurpose(caller_page: <span class="string">"商城页"</span>, caller_time:open_page|click, purpose: <span class="string">"商品搜索"</span>).byQian.byApier2;</span><br></pre></td></tr></table></figure>
<p>请求接口的整理产出效果示例如下：</p>
<blockquote>
<p><img src="/Architecture架构/基础规范/请求规范/请求接口整理.png" alt="请求接口整理"></p>
<p>该图来源于脑图： <a href="./请求规范/请求接口的整理规范.xmind">请求接口的整理规范.xmind</a></p>
</blockquote>
<p>附：多处页面调用的公共接口提取出，描述在页面中调用的公共接口的部分添加颜色或者其他标记来标识使用的是哪个部分的公共接口。</p>
<h2 id="六、网络库的加强"><a href="#六、网络库的加强" class="headerlink" title="六、网络库的加强"></a>六、网络库的加强</h2><h3 id="1、网络日志加强"><a href="#1、网络日志加强" class="headerlink" title="1、网络日志加强"></a>1、网络日志加强</h3><p>目的：查看日志的时候能清晰的知道接口的中文含义，以及调用其的页面或者其他类或实例。</p>
<p>方法：每个接口请求时候添加对应页面。</p>
<h3 id="2、网络时长统计"><a href="#2、网络时长统计" class="headerlink" title="2、网络时长统计"></a>2、网络时长统计</h3><p>目的：统计加载每个页面的过程中，所消耗的网络时长。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">NetworkUtil.requestApi1(caller:aPage, belongLoadPage:<span class="keyword">true</span>)</span><br><span class="line">  </span><br><span class="line">requestUrl(caller, belongLoadPage) &#123;</span><br><span class="line">  <span class="keyword">if</span> (belongLoadPage != <span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  PageRequestManager.</span><br><span class="line">  map[caller][<span class="string">"apiStartCount"</span>] = map[caller][<span class="string">"apiStartCount"</span>] + <span class="number">1</span></span><br><span class="line">  dio.request(&#123;</span><br><span class="line">    url: url,</span><br><span class="line">    completeCallback: () &#123;</span><br><span class="line">      <span class="built_in">int</span> callerApiStartCount = map[caller][<span class="string">"apiStartCount"</span>];</span><br><span class="line">      <span class="built_in">int</span> callerApiEndCount = map[caller][<span class="string">"apiEndCount"</span>];</span><br><span class="line">      callerApiEndCount++;</span><br><span class="line">      map[caller][<span class="string">"apiEndCount"</span>] = callerApiEndCount;</span><br><span class="line">      <span class="keyword">if</span> (callerApiEndCount == callerApiStartCount) &#123;</span><br><span class="line">        _pageLoadingEnd();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> 	); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/Architecture架构/基础规范/请求规范/" data-id="cm8clpybp0092mpr4r2ya8rwq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Architecture/">Architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/请求/">请求</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Architecture架构/高质量妙用/妙用注解" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Architecture架构/高质量妙用/妙用注解/" class="article-date">
  <time datetime="2024-04-20T09:05:42.000Z" itemprop="datePublished">2024-04-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Architecture/">Architecture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Architecture架构/高质量妙用/妙用注解/">妙用注解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="妙用注解"><a href="#妙用注解" class="headerlink" title="妙用注解"></a>妙用注解</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h2 id="一、-为什么要使用注解开发"><a href="#一、-为什么要使用注解开发" class="headerlink" title="一、 为什么要使用注解开发"></a>一、 为什么要使用注解开发</h2><p>在日常开发过程中，我们经常会面临以下挑战：大量重复的模板代码、臃肿的代码降低可读性，以及JSON序列化和反序列化问题。为应对这些问题，各种编程语言都有自己的解决方案。在Dart语言中，采用了注解这一高效手段来解决这些问题。</p>
<p>注解就像是一把神奇的钥匙，为我们解锁了许多高效开发的大门。以下是使用注解的一些原因：</p>
<ol>
<li>自动生成代码：注解就像会魔法的小精灵，能够在编译时自动生成代码，减轻了我们手动编写重复代码的负担，让开发变得更加轻松。</li>
<li>简化代码：注解可以减少重复代码，提高代码质量。</li>
<li>提高可读性：注解可以将元数据与实际代码分离，使代码更易于理解。</li>
<li>扩展功能：通过注解和注解处理器，我们可以在编译时执行一些额外操作，例如代码检查、代码优化等</li>
</ol>
<h2 id="二、什么是注解？"><a href="#二、什么是注解？" class="headerlink" title="二、什么是注解？"></a>二、什么是注解？</h2><p><strong>注解（Annotation）是一种编程语言特性，它不属于特定的架构或框架，而是可以在多种编程语言和开发框架中使用的一种工具。注解提供了一种方式，允许开发者在代码中添加元数据，这些元数据可以由编译器、运行时环境或其他工具在不同阶段使用。</strong></p>
<p>在Dart语言中，注解是一种特殊的语法，用于在编译时或运行时向代码添加额外的元数据。注解以<code>@</code>符号开头，后跟一个编译时常量表达式。这种元数据可以用于指导工具（如静态分析器、编译器和构建器）执行特定操作，例如代码生成、静态检查和优化。注解不会影响程序的执行过程，但可以在编译时或运行时被工具和库访问，以实现各种目的。</p>
<h2 id="三、注解实践：使用注解为每个页面类添加页面描述信息，埋点中经常需要"><a href="#三、注解实践：使用注解为每个页面类添加页面描述信息，埋点中经常需要" class="headerlink" title="三、注解实践：使用注解为每个页面类添加页面描述信息，埋点中经常需要"></a>三、注解实践：使用注解为每个页面类添加页面描述信息，埋点中经常需要</h2><h3 id="1、iOS：使用宏定义实现注解"><a href="#1、iOS：使用宏定义实现注解" class="headerlink" title="1、iOS：使用宏定义实现注解"></a>1、iOS：使用<code>宏定义</code>实现注解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 定义宏，用于创建页面信息注解</span><br><span class="line">#define CreatePageInfoAnnotation(pageClass, pageKey, pageDes) \</span><br><span class="line">@interface pageClass (PageInfo) \</span><br><span class="line">@property (nonatomic, readonly) NSString *pageKey; \</span><br><span class="line">@property (nonatomic, readonly) NSString *pageDescription; \</span><br><span class="line">@end \</span><br><span class="line">@implementation pageClass (PageInfo) \</span><br><span class="line">- (NSString *)pageKey &#123; \</span><br><span class="line">    return pageKey; \</span><br><span class="line">&#125; \</span><br><span class="line">- (NSString *)pageDescription &#123; \</span><br><span class="line">    return pageDes; \</span><br><span class="line">&#125; \</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// LoginViewController.m</span><br><span class="line">@PageInfoAnnotation(LoginViewController, @&quot;login_page&quot;, @&quot;登录页面&quot;)	// 调用宏，为类添加注解</span><br><span class="line">@implementation LoginViewController</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h3 id="2、Flutter：使用source-gen库生成文件实现注解"><a href="#2、Flutter：使用source-gen库生成文件实现注解" class="headerlink" title="2、Flutter：使用source_gen库生成文件实现注解"></a>2、Flutter：使用<code>source_gen库</code>生成文件实现注解</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// page_info_generator.dart</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:source_gen/source_gen.dart'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestGenerator</span> <span class="keyword">extends</span> <span class="title">GeneratorForAnnotation</span>&lt;<span class="title">CJPageInfoMetadata</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span>? generateForAnnotatedElement(<span class="built_in">Element</span> element, ConstantReader annotation, BuildStep buildStep) &#123;</span><br><span class="line">    <span class="built_in">String</span> className = element.name;</span><br><span class="line">    <span class="built_in">String</span>? pageKey = annotation.read(<span class="string">"pageKey"</span>);</span><br><span class="line">    <span class="built_in">String</span>? pageDesc = annotation.read(<span class="string">"pageDesc"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"""</span></span><br><span class="line"><span class="string">      extension <span class="subst">$&#123;className&#125;</span>APTExtension on <span class="subst">$&#123;className&#125;</span> &#123;</span></span><br><span class="line"><span class="string">      	String? apt_pageKey() &#123;</span></span><br><span class="line"><span class="string">      		return <span class="subst">$&#123;pageKey&#125;</span>;</span></span><br><span class="line"><span class="string">      	&#125;</span></span><br><span class="line"><span class="string">      	String? apt_pageDesc() &#123;</span></span><br><span class="line"><span class="string">      		return <span class="subst">$&#123;pageDesc&#125;</span>;</span></span><br><span class="line"><span class="string">      	&#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      """</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TestModel.dart</span></span><br><span class="line"><span class="meta">@CJPageInfoMetadata</span>(<span class="string">"我是页面描述"</span>, <span class="string">'home_page'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestModel</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line">  <span class="built_in">int</span> bookNum;</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 方法</span></span><br><span class="line">  <span class="keyword">void</span> fun1() &#123;&#125;</span><br><span class="line">  <span class="keyword">void</span> fun2(<span class="built_in">int</span> a) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果就会生成一堆dart文件。</p>
<h2 id="四、进入页面前的登录判断"><a href="#四、进入页面前的登录判断" class="headerlink" title="四、进入页面前的登录判断"></a>四、进入页面前的登录判断</h2><p>其他参考文章：<a href="https://blog.csdn.net/qq_25303213/article/details/126891328" target="_blank" rel="noopener">自定义iOS注解</a></p>
<h3 id="1、最差做法"><a href="#1、最差做法" class="headerlink" title="1、最差做法"></a>1、最差做法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// HomeViewController.m</span><br><span class="line">- (void)goMineHomePage &#123;</span><br><span class="line">  // 进入个人主页前，需要先判断是否登录</span><br><span class="line">	if (!UserManager.isLogin) &#123;</span><br><span class="line">    LoginViewController *viewController = [[MineHomeViewController alloc] init];</span><br><span class="line">		[self.navigationController pushViewController:viewController animated:YES];</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	MineHomeViewController *viewController = [[MineHomeViewController alloc] init];</span><br><span class="line">	[self.navigationController pushViewController:viewController animated:YES];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2、统一到路由中优化：在路由中拦截-拦截器-可选"><a href="#2、统一到路由中优化：在路由中拦截-拦截器-可选" class="headerlink" title="2、统一到路由中优化：在路由中拦截+拦截器(可选)"></a>2、统一到路由中优化：在路由中拦截+拦截器(可选)</h3><p>所有跳转使用 RouterManger，在RouterManager中限制未登录允许的页面。</p>
<h4 id="2-1、常规路由"><a href="#2-1、常规路由" class="headerlink" title="2.1、常规路由"></a>2.1、常规路由</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// HomeViewController.m</span><br><span class="line">- (void)goMineHomePage &#123;</span><br><span class="line">  [RouterManger push:RouterNames.mine_home_page argument:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// RouterManger.m</span><br><span class="line">- (void)push:(String *)pageName argument:(NSDictionary *)argument &#123;</span><br><span class="line">	if (!UserManager.isLogin) &#123;	// 进入个人主页前，需要先判断是否登录</span><br><span class="line">    if ([RouterNames.mine_home_page].contains(pageName)) &#123;</span><br><span class="line">      LoginViewController *viewController = [[MineHomeViewController alloc] init];</span><br><span class="line">			[topVC pushViewController:viewController animated:YES];</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  getVCHandle = [HandleManager.handleMap objectForKey:pageName];</span><br><span class="line">  UIViewController *viewController = getVCHandle(argument:argument);</span><br><span class="line">  [topVC pushViewController:viewController animated:YES];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2、优化路由，引进拦截器：对路由中的跳转进行改进，使用拦截器"><a href="#2-2、优化路由，引进拦截器：对路由中的跳转进行改进，使用拦截器" class="headerlink" title="2.2、优化路由，引进拦截器：对路由中的跳转进行改进，使用拦截器"></a>2.2、优化路由，引进拦截器：对路由中的跳转进行改进，使用拦截器</h4><p>改进后的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// HomeViewController.m</span><br><span class="line">- (void)goMineHomePage &#123;</span><br><span class="line">  [RouterManger push:RouterNames.mine_home_page argument:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// RouterManger.m 优化为拦截器</span><br><span class="line">- (void)push:(String *)pageName argument:(NSDictionary *)argument &#123;</span><br><span class="line">  for (var interceptor in interceptors) &#123;</span><br><span class="line">  	bool canPush = [interceptor canPushPageName:pageName arguments: arguments];</span><br><span class="line">    if (!canPush) return;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  getVCHandle = [HandleManager.handleMap objectForKey:pageName];</span><br><span class="line">  UIViewController *viewController = getVCHandle(argument:argument);</span><br><span class="line">  [topVC pushViewController:viewController animated:YES];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// LoginInterceptor.m</span><br><span class="line">- (BOOL)canPushPageName:(NSString *)pageName arguments:(NSDictionary *)arguments &#123;</span><br><span class="line">  if (!UserManager.isLogin) &#123;	// 进入个人主页前，需要先判断是否登录</span><br><span class="line">    if ([RouterNames.mine_home_page].contains(pageName)) &#123;</span><br><span class="line">      LoginViewController *viewController = [[MineHomeViewController alloc] init];</span><br><span class="line">			[topVC pushViewController:viewController animated:YES];</span><br><span class="line">      return NO;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、在调用原始方法之前插入额外的执行逻辑（不推荐，不使用）"><a href="#3、在调用原始方法之前插入额外的执行逻辑（不推荐，不使用）" class="headerlink" title="3、在调用原始方法之前插入额外的执行逻辑（不推荐，不使用）"></a>3、在调用原始方法之前插入额外的执行逻辑（不推荐，不使用）</h3><p><a href="../../iOS/3必备知识架构/1语言/1语言-消息转发.md">《在调用原始方法之前插入额外的执行逻辑》</a></p>
<h2 id="三、常见的注解示例"><a href="#三、常见的注解示例" class="headerlink" title="三、常见的注解示例"></a>三、常见的注解示例</h2><p>以下内容摘自：<a href="https://juejin.cn/post/7217637205590114364" target="_blank" rel="noopener">Flutter 注解开发</a></p>
<ol>
<li><p><code>@override</code>：这个注解表示一个方法覆盖了父类的方法。它可以帮助我们检查是否正确地实现了方法覆盖，如果没有正确实现，编译器会给出警告。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="type">String</span> makeSound() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"makeSound"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  void makeSound() &#123;</span><br><span class="line">    print(<span class="symbol">'makeSoun</span>d');</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>@JsonSerializable()</code>：这个注解就是我们项目中使用到的<code>json_annotation</code>库的<code>@JsonSerializable()</code>注解。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonSerializable</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConversationListEntity</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span>? nextSeq;</span><br><span class="line">  late <span class="built_in">List</span>&lt;ConversationListResList&gt; resList;</span><br><span class="line"></span><br><span class="line">  ConversationListEntity();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> ConversationListEntity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; json) =&gt; $ConversationListEntityFromJson(json);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; toJson() =&gt; $ConversationListEntityToJson(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> jsonEncode(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>我们项目中的<code>@RootView(jumpId: &quot;1005&quot;)</code>：用来为订单详情页面生成路由代码。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RootView</span>(jumpId: <span class="string">"1005"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderDetail</span> <span class="keyword">extends</span> <span class="title">BaseWidget</span> </span>&#123;</span><br><span class="line">  OrderDetail(&#123;Key? key&#125;) : <span class="keyword">super</span>();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  OrderDetailState createState() =&gt; OrderDetailState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="附1、iOS注解原理介绍"><a href="#附1、iOS注解原理介绍" class="headerlink" title="附1、iOS注解原理介绍"></a>附1、iOS注解原理介绍</h2><p>1、在oc中实现注解一样的东西肯定是通过宏来实现的。</p>
<p>2、在oc中实现注解主要有4个方向：代码中注解，类注解，属性注解，方法注解。</p>
<p>其中代码中注解的形式应该是最常见的。你说没见过？libextobjc中那一套@weakify和@strongify你们总用得很爽吧。拆开看看这就是做代码中注解的标准形式了。而类注解，考虑了很久暂时还是误解状态，因此也没法讲了。因此实现属性注解和方法注解是关键。</p>
<p>3、既然是宏实现的，因此注解宏展开后应该是实际能够在对应的段落实际有效的语法才对。另外为了和面向对象的oc类型进行关联，因此在oc中可以随便乱写的c代码当然很难办了。因此我们可以做的宏很快就限定下来了，在属性中宏展开新的属性，在方法中宏展开新的方法。</p>
<p><a href="https://lrdcq.com/me/read.php/79.htm" target="_blank" rel="noopener">在oc中实现注解一样的东西</a></p>
<p>实现</p>
<p>首先实现一下方法注解。由于我们知道我们需要展开方法，因此我们很快就能写出这样的宏：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// __COUNTER__ 这个宏每次使用都会自动+1</span></span><br><span class="line"><span class="comment">// ## 是宏的直接串接</span></span><br><span class="line"><span class="meta">#define path(x) \</span></span><br><span class="line">- (<span class="keyword">id</span>)__klmurl_path_<span class="meta">##__COUNTER__() &#123; \</span></span><br><span class="line">    <span class="keyword">return</span> x ;\</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">所以结果是 __klmurl_path_1</span><br></pre></td></tr></table></figure>
<p>@是哪儿来的，毕竟宏里面本来是不允许有这样的符号的。原来强项在展开的内容前加了无用的带@的表达式：参考 @weakify 其也只是宏定义weakify</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define weakify(...) \</span></span><br><span class="line">    rac_keywordify \</span><br><span class="line">    metamacro_foreach_cxt(rac_weakify_,, __<span class="keyword">weak</span>, __VA_ARGS__)</span><br><span class="line"></span><br><span class="line"><span class="meta">#define rac_keywordify autoreleasepool &#123;&#125;</span></span><br><span class="line"><span class="meta">#define rac_keywordify try &#123;&#125; @catch (...) &#123;&#125;</span></span><br></pre></td></tr></table></figure>
<p>这样才能很自然的串一个@。</p>
<p>优化考虑有什么带@的而且没有什么卵用的标示呢。@compatibility_alias</p>
<p>这一段展开后的代码是：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// __COUNTER__ 这个宏每次使用都会自动+1</span></span><br><span class="line"><span class="comment">// ## 是宏的直接串接</span></span><br><span class="line"><span class="meta">#define path(x) \</span></span><br><span class="line">compatibility_alias _KLMURL_0 KLMURL;</span><br><span class="line">- (<span class="keyword">id</span>)__klmurl_path_<span class="meta">##__COUNTER__() &#123; \</span></span><br><span class="line">    <span class="keyword">return</span> x ;\</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">所以结果是 __klmurl_path_1</span><br></pre></td></tr></table></figure>
<h2 id="附1、Flutter-注解"><a href="#附1、Flutter-注解" class="headerlink" title="附1、Flutter 注解"></a>附1、Flutter 注解</h2><p>参考文章：<a href="https://juejin.cn/post/6844903878392053774" target="_blank" rel="noopener">Flutter 注解处理及代码生成</a></p>
<h3 id="1、注解的调用和执行结果"><a href="#1、注解的调用和执行结果" class="headerlink" title="1、注解的调用和执行结果"></a>1、注解的调用和执行结果</h3><p><strong>对 TestModel 类进行注解</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CJPageInfoMetadata</span>(<span class="string">"我是页面描述"</span>, <span class="string">'home_page'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestModel</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line">  <span class="built_in">int</span> bookNum;</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 方法</span></span><br><span class="line">  <span class="keyword">void</span> fun1() &#123;&#125;</span><br><span class="line">  <span class="keyword">void</span> fun2(<span class="built_in">int</span> a) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>以要生成如下 TestModel.g.dart 文件为例</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GENERATED CODE - DO NOT MODIFY BY HAND</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"><span class="comment">// CJPageInfoMetadata</span></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"></span><br><span class="line">extension TestModelAPTExtension on TestModel &#123;</span><br><span class="line">  <span class="built_in">String</span>? apt_pageKey() &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">"home_page"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">String</span>? apt_pageDesc() &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">"我是页面描述"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2、注解内部的实现"><a href="#2、注解内部的实现" class="headerlink" title="2、注解内部的实现"></a>2、注解内部的实现</h3><h4 id="2-1、注解及生成器"><a href="#2-1、注解及生成器" class="headerlink" title="2.1、注解及生成器"></a>2.1、注解及生成器</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注解</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CJPageInfoMetadata</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> pageDesc;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> pageKey;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> CJPageInfoMetadata(<span class="keyword">this</span>.pageDesc, <span class="keyword">this</span>.pageKey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成器</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:source_gen/source_gen.dart'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestGenerator</span> <span class="keyword">extends</span> <span class="title">GeneratorForAnnotation</span>&lt;<span class="title">CJPageInfoMetadata</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span>? generateForAnnotatedElement(<span class="built_in">Element</span> element, ConstantReader annotation, BuildStep buildStep) &#123;</span><br><span class="line">    <span class="built_in">String</span> className = element.name;</span><br><span class="line">    <span class="built_in">String</span>? pageKey = annotation.read(<span class="string">"pageKey"</span>);</span><br><span class="line">    <span class="built_in">String</span>? pageDesc = annotation.read(<span class="string">"pageDesc"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"""</span></span><br><span class="line"><span class="string">      extension <span class="subst">$&#123;className&#125;</span>APTExtension on <span class="subst">$&#123;className&#125;</span> &#123;</span></span><br><span class="line"><span class="string">      	String? apt_pageKey() &#123;</span></span><br><span class="line"><span class="string">      		return <span class="subst">$&#123;pageKey&#125;</span>;</span></span><br><span class="line"><span class="string">      	&#125;</span></span><br><span class="line"><span class="string">      	String? apt_pageDesc() &#123;</span></span><br><span class="line"><span class="string">      		return <span class="subst">$&#123;pageDesc&#125;</span>;</span></span><br><span class="line"><span class="string">      	&#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      """</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2、使用注解生成代码的运行结果"><a href="#2-2、使用注解生成代码的运行结果" class="headerlink" title="2.2、使用注解生成代码的运行结果"></a>2.2、使用注解生成代码的运行结果</h4><p>命令执行成功后将会生成一个新的文件：TestModel.g.dart 其内容：</p>
<p>最后生成的文件为</p>
<h4 id="2-2、生成器中-Element-element-ConstantReader-annotation-BuildStep-buildStep-各值"><a href="#2-2、生成器中-Element-element-ConstantReader-annotation-BuildStep-buildStep-各值" class="headerlink" title="2.2、生成器中 Element element, ConstantReader annotation, BuildStep buildStep 各值"></a>2.2、生成器中 <code>Element element</code>, <code>ConstantReader annotation</code>, <code>BuildStep buildStep</code> 各值</h4><h5 id="2-2-1、Element-element：要注解的对象"><a href="#2-2-1、Element-element：要注解的对象" class="headerlink" title="2.2.1、Element element：要注解的对象"></a>2.2.1、<code>Element element</code>：要注解的对象</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">element.toString: <span class="class"><span class="keyword">class</span> <span class="title">TestModel</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">name</span>: <span class="title">TestModel</span>																// 要注解的对象的【名】：<span class="title">TestModel</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">metadata</span>: [@<span class="title">CJPageInfoMetadata</span>("我是页面描述", '<span class="title">home_page</span>')]</span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">kind</span>: <span class="title">CLASS</span>	// 元素类型有 <span class="title">CLASS</span>、<span class="title">FIELD</span>、<span class="title">FUNCTION</span> 等，</span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">displayName</span>: <span class="title">TestModel</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">fields</span>: [<span class="title">int</span> <span class="title">age</span>, <span class="title">int</span> <span class="title">bookNum</span>]								// 要注解的对象的【属性】：[<span class="title">int</span> <span class="title">age</span>, <span class="title">int</span> <span class="title">bookNum</span>]</span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">methods</span>: [<span class="title">fun1</span>() → <span class="title">void</span>, <span class="title">fun2</span>(<span class="title">int</span> <span class="title">a</span>) → <span class="title">void</span>]	// 要注解的对象的【方法名】：[<span class="title">fun1</span>() → <span class="title">void</span>, ...]</span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">documentationComment</span>: <span class="title">null</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">enclosingElement</span>: <span class="title">flutter_annotation</span>|<span class="title">lib</span>/<span class="title">demo_class</span>.<span class="title">dart</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasAlwaysThrows</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasDeprecated</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasFactory</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasIsTest</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasLiteral</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasOverride</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasProtected</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">hasRequired</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">isPrivate</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">isPublic</span>: <span class="title">true</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">isSynthetic</span>: <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">nameLength</span>: 9</span></span><br><span class="line"><span class="class"><span class="title">element</span>.<span class="title">runtimeType</span>: <span class="title">ClassElementImpl</span></span></span><br><span class="line"><span class="class">...</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-2、ConstantReader-annotation：对注解对象添加的注解信息"><a href="#2-2-2、ConstantReader-annotation：对注解对象添加的注解信息" class="headerlink" title="2.2.2、ConstantReader annotation：对注解对象添加的注解信息"></a>2.2.2、<code>ConstantReader annotation</code>：对注解对象添加的注解信息</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">annotation.runtimeType: _DartObjectConstant</span><br><span class="line">annotation.read(<span class="string">"pageDesc"</span>): <span class="string">'我是页面描述'</span></span><br><span class="line">annotation.read(<span class="string">"pageKey"</span>): <span class="string">'home_page'</span></span><br><span class="line">annotation.objectValue: CJPageInfoMetadata (pageDesc = <span class="built_in">String</span> (<span class="string">'我是页面描述'</span>); pageKey = <span class="built_in">String</span> (<span class="string">'home_page'</span>))</span><br></pre></td></tr></table></figure>
<h5 id="2-2-3、BuildStep-buildStep-：提供的是该次构建的输入输出信息"><a href="#2-2-3、BuildStep-buildStep-：提供的是该次构建的输入输出信息" class="headerlink" title="2.2.3、BuildStep buildStep ：提供的是该次构建的输入输出信息:"></a>2.2.3、<code>BuildStep buildStep</code> ：提供的是该次构建的输入输出信息:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">buildStep.runtimeType: BuildStepImpl</span><br><span class="line">buildStep.inputId.path: lib/demo_class.dart</span><br><span class="line">buildStep.inputId.extension: .dart</span><br><span class="line">buildStep.inputId.package: flutter_annotation</span><br><span class="line">buildStep.inputId.uri: package:flutter_annotation/demo_class.dart</span><br><span class="line">buildStep.inputId.pathSegments: [lib, demo_class.dart]</span><br><span class="line">buildStep.expectedOutputs.path: lib/demo_class.g.dart</span><br><span class="line">buildStep.expectedOutputs.extension: .dart</span><br><span class="line">buildStep.expectedOutputs.package: flutter_annotation</span><br></pre></td></tr></table></figure>
<h3 id="3、使用注解生成代码前的准备"><a href="#3、使用注解生成代码前的准备" class="headerlink" title="3、使用注解生成代码前的准备"></a>3、使用注解生成代码前的准备</h3><p>注解的生成器 Generator 的执行需要 Builder 来触发</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、使用Generator 创建一个Builder</span></span><br><span class="line">Builder testBuilder(BuilderOptions options) =&gt; LibraryBuilder(TestGenerator());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、创建 build.yaml 文件，将我们要执行的 builder 配置进去</span></span><br><span class="line">builders:</span><br><span class="line">  testBuilder:</span><br><span class="line">    <span class="keyword">import</span>: <span class="string">"package:flutter_annotation/test.dart"</span></span><br><span class="line">    builder_factories: [<span class="string">"testBuilder"</span>]</span><br><span class="line">    build_extensions: &#123;<span class="string">".dart"</span>: [<span class="string">".g.part"</span>]&#125;</span><br><span class="line">    auto_apply: root_package</span><br><span class="line">    build_to: source</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、运行 Builder，命令执行成功后将会生成一个新的文件：TestModel.g.dart 其内容：</span></span><br><span class="line">flutter packages pub run build_runner build</span><br></pre></td></tr></table></figure>
<p>Flutter注解的Builder的原理很像使用shell或者python脚本遍历文件的方式。</p>
<p>已知@Description是注解，其作用为提取 @Description 的方法描述到一个文件。</p>
<p>请说说@Description注解的内部实现（使用shell或者python脚本遍历文件的方式，不在本次讨论中）</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my_class.dart</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Description</span>(<span class="string">'This method does something important.'</span>) <span class="comment">// 注解</span></span><br><span class="line">  <span class="keyword">void</span> myImportantMethod() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'Doing something important.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// description_generator.dart</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:source_gen/source_gen.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:code_builder/code_builder.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:annotations/annotations.dart'</span>; <span class="comment">// 引入上面创建的注解库</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DescriptionGenerator</span> <span class="keyword">extends</span> <span class="title">GeneratorForAnnotation</span>&lt;<span class="title">Description</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span>? generateForAnnotatedElement(<span class="built_in">Element</span> element, ConstantReader annotation, BuildStep buildStep) &#123; &#123;</span><br><span class="line">    <span class="comment">// 检查注解是否应用在方法上</span></span><br><span class="line">    <span class="keyword">if</span> (element.isMethod) &#123;</span><br><span class="line">      <span class="keyword">final</span> description = annotation.read(<span class="string">'value'</span>).stringValue;</span><br><span class="line">      <span class="keyword">final</span> method = element.asMethod();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 创建一个方法调用的描述文本</span></span><br><span class="line">      <span class="keyword">final</span> code = Block.of([</span><br><span class="line">        Directive.code(<span class="string">"print('Method <span class="subst">$&#123;method.name&#125;</span> description: <span class="subst">$description<span class="string">');")</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">      ]);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string"></span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">      // 返回生成的代码</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">      return code.toString();</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string"></span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    // 如果注解没有应用在方法上，返回空字符串</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">    return '</span><span class="string">';</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">  &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">&#125;</span></span></span></span><br></pre></td></tr></table></figure>
<h2 id="其他参考文章"><a href="#其他参考文章" class="headerlink" title="其他参考文章"></a>其他参考文章</h2><p><a href="https://pub.dev/packages/mustache_template" target="_blank" rel="noopener">https://pub.dev/packages/mustache_template</a></p>
<blockquote>
<p><code>mustache_template</code> 是一个用于Flutter的Dart模板库，它支持<code>dart2js</code>和<code>dart2native</code>。</p>
</blockquote>
<ul>
<li><a href="https://www.cnblogs.com/cherf/articles/16320710.html" target="_blank" rel="noopener">Mustache模板引擎的语法及使用</a></li>
</ul>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/Architecture架构/高质量妙用/妙用注解/" data-id="cm8clpyev00bbmpr4pf7okk1u" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Architecture/">Architecture</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Architecture架构/高质量妙用/妙用依赖注入" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/Architecture架构/高质量妙用/妙用依赖注入/" class="article-date">
  <time datetime="2024-04-20T09:05:41.000Z" itemprop="datePublished">2024-04-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Architecture/">Architecture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Architecture架构/高质量妙用/妙用依赖注入/">妙用依赖注入</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="妙用依赖注入"><a href="#妙用依赖注入" class="headerlink" title="妙用依赖注入"></a>妙用依赖注入</h1><p>常见的依赖注入模式有构造器注入、属性注入和方法注入。</p>
<p><a href="https://developer.aliyun.com/article/1260903" target="_blank" rel="noopener">Flutter依赖注入</a></p>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/Architecture架构/高质量妙用/妙用依赖注入/" data-id="cm8clpyej00b4mpr4saqhxpz8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Architecture/">Architecture</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-算法与数学/9算法" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/算法与数学/9算法/" class="article-date">
  <time datetime="2024-04-09T02:24:11.353Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="必备知识架构-算法"><a href="#必备知识架构-算法" class="headerlink" title="必备知识架构-算法"></a>必备知识架构-算法</h1><p>[toc]</p>
<blockquote>
<p>稳定与不稳定：如果a原本在b的前面并且a=b，排序之后a仍然在b的前面那就是稳定排序，如果排序之后a可能会出现在b的后面则是不稳定排序。所以冒泡排序是稳定的。选择排序可能不稳定。</p>
<p>空间复杂度：是指算法在计算机内执行时所需的存储空间与n的规模之间的关系。</p>
<p>时间复杂度：排序的的总操作次数，与n的规模之间的关系。</p>
</blockquote>
<p>以下是我们在面试中要问的主要问题：</p>
<p>1.数据结构：<br>a、 链表<br>b、 堆叠<br>c、 排队<br>d、 二叉树<br>e、 哈希表</p>
<p>2.算法：<br>a、 排序（像快速排序和归并排序），二分搜索法，贪婪算法。<br>b、 二叉树（比如遍历、构造、操作…）</p>
<p><a href="https://www.cnblogs.com/ZachRobin/p/7094852.html" target="_blank" rel="noopener">iOS 开发中常用的排序（冒泡、选择、快速、插入、希尔、归并、基数）算法</a></p>
<table>
<thead>
<tr>
<th>排序算法</th>
<th>平均时间复杂度</th>
<th>其他时间复杂度</th>
<th>平均空间复杂度</th>
<th>是否是稳定性的</th>
</tr>
</thead>
<tbody>
<tr>
<td>冒泡排序</td>
<td>O(n^2)</td>
<td>最好：O(n)，已是有序的<br> 最坏：O(n^2)，是逆序的</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>选择排序</td>
<td>O(n^2)</td>
<td>——</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
<tr>
<td>快速排序</td>
<td>O(nlogn)</td>
<td>最好：O(nlogn)，每次划分都非常平衡时<br>最坏：O(n^2)，每次划分非常不均匀时</td>
<td>O(nlogn)</td>
<td>不稳定<br>不稳定发生在交换的时刻；</td>
</tr>
<tr>
<td>归并排序</td>
<td>O(nlogn)</td>
<td>——</td>
<td>O(n)</td>
<td>稳定</td>
</tr>
</tbody>
</table>
<p>因为冒泡和选择排序都是原地排序算法，不需要额外的存储空间。所以其空间复杂度都是O(1)。</p>
<p>归并排序需要额外的空间来存储合并过程中的临时数组，其空间复杂度O(n)。</p>
<p><a href="https://www.hello-algo.com/chapter_sorting/quick_sort/#1153" target="_blank" rel="noopener">11.5.3  快速排序为什么快</a></p>
<p><a href="https://github.com/MisterBooo/Play-With-Sort-OC" target="_blank" rel="noopener">在Object-C中学习数据结构与算法之排序算法</a></p>
<p>二分搜索法，是一种【在有序数组中】查找某一特定元素的搜索算法。</p>
<p><a href="https://www.jianshu.com/p/2ba53d050637" target="_blank" rel="noopener">iOS查找算法之二分查找</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/76164082" target="_blank" rel="noopener">漫画：五分钟学会贪心算法</a></p>
<p>有一个背包，最多能承载150斤的重量，现在有7个物品，<br>重量分别为[35, 30, 60, 50, 40, 10, 25]，<br>价值分别为[10, 40, 30, 50, 35, 40, 30]，<br>应该如何选择才能使得我们的背包背走最多价值的物品？</p>
<p>局部最优解</p>
<p>1、每次都尽量选择当前【价值最高】的物品<br>重量分别为[35, 30🚗,     60, 50🚗,     40🚗,   10🚗,    25]，  130<br>价值分别为[10, 40②✅, 30, 50①✅, 35④✅, 40③✅, 30]， 165</p>
<p>2、每次都尽量选择当前【重量最小】的物品<br>重量分别为[35④, 30③, 60, 50, 40⑤, 10①,  25②]，    140<br>价值分别为[10✅,40✅, 30, 50, 35✅, 40✅, 30✅]，    155</p>
<p>3、每次都尽量选择当前【价值密度最高】的物品<br>重量分别为[35🚗,    30🚗,   60,   50🚗,  40,    10🚗,   25🚗]， 150<br>价值分别为[10✅,    40✅,   30,   50✅,  35,    40✅,   30✅]， 170<br>价值密度  [0.285⑤, 1.333②, 0.5, 1.0④,  0.875, 4.0①,  1.2③]</p>
<p>想象一下下列场景：</p>
<ol>
<li>从通讯录中寻找某个联系人</li>
<li>从一大堆文件中寻找某个文件</li>
<li>到了影厅之后，寻找电影票上指定的座位</li>
</ol>
<p>如果以上情况中，联系人、文件、影厅座位这些“数据”没有按照需要的顺序组织，如何找到想要的特定“数据”呢？会非常麻烦！所以说，对于需要搜索的数据，往往应该先排个序！</p>
<p><a href="https://zhuanlan.zhihu.com/p/31810006" target="_blank" rel="noopener">排序比较 &amp; 对比归并排序与快速排序</a></p>
<p><img src="/算法与数学/9算法/image-20240902163103782.png" alt="image-20240902163103782" style="zoom: 33%;"></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 交换数组中的两个元素</span></span><br><span class="line"><span class="keyword">void</span> swap(<span class="built_in">NSMutableArray</span> *array, <span class="built_in">NSInteger</span> i, <span class="built_in">NSInteger</span> j) &#123;</span><br><span class="line">    <span class="built_in">NSNumber</span> *temp = array[i];</span><br><span class="line">    array[i] = array[j];</span><br><span class="line">    array[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>算法图解</p>
<p>《<a href="https://github.com/dvlproad/034-Data-AlgorithmCollect-iOS" target="_blank" rel="noopener">034-Data-AlgorithmCollect-iOS</a>》</p>
<p><img src="/算法与数学/9算法/Data-AlgorithmCollect-1.png" alt="Data-AlgorithmCollect-1"></p>
<h2 id="一、冒泡排序"><a href="#一、冒泡排序" class="headerlink" title="一、冒泡排序"></a>一、冒泡排序</h2><p>实现一个冒泡排序或者快速排序</p>
<p>从小到大排序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">假设45132，按从小到大排序</span><br><span class="line">i = 0 的时候，j的相邻两个位置都要比较排一下位置：</span><br><span class="line">         j = 0 的时候：arr_M = 45132(a[0]和a[1]比得到的结果)</span><br><span class="line">         j = 1 的时候：arr_M = 41532(a[1]和a[2]比得到的结果)</span><br><span class="line">         j = 2 的时候：arr_M = 41352(a[2]和a[3]比得到的结果)</span><br><span class="line">         j = 3 的时候：arr_M = 41325(a[3]和a[4]比得到的结果)</span><br><span class="line">i=0已经将第一个最大的值放到最后了。</span><br><span class="line"></span><br><span class="line">i = 1 的时候，j的相邻两个位置都要比较排一下位置：</span><br><span class="line">         j = 0 的时候：arr_M = 14325</span><br><span class="line">         j = 1 的时候：arr_M = 13425</span><br><span class="line">         j = 2 的时候：arr_M = 13245</span><br><span class="line">i=1已经将第二个最大的值放到最后了。</span><br></pre></td></tr></table></figure>
<p><a href="#冒泡排序代码实现">冒泡排序代码实现</a></p>
<h2 id="二、选择排序"><a href="#二、选择排序" class="headerlink" title="二、选择排序"></a>二、选择排序</h2><p><strong>从数组的第a[i+1]个元素开始到第n个元素，寻找最小的元素(的位置)</strong>。（具体过程为:先设最小位置为i=0，从该位置往后逐一比较，若遇到比之小的则记下该最小值的位置，结束后交换）；</p>
<p>先为a[0]取到最小值，再为a[1]取到最小值，再继续…..</p>
<p>从小到大排序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">假设45132，按从小到大排序</span><br><span class="line">i = 0 的时候，j的相邻两个位置都要比较排一下位置：</span><br><span class="line">     j = i+1=1 的时候：arr_M = 45132(此时a[0]的4和a[1]的5比较：得到的结果)</span><br><span class="line">         j = 2 的时候：arr_M = 15432(此时a[0]的4和a[2]的1比较：得到的结果)</span><br><span class="line">         j = 3 的时候：arr_M = 15432(此时a[0]的1和a[3]的3比较：得到的结果)</span><br><span class="line">         j = 4 的时候：arr_M = 15432(此时a[0]的1和a[4]的2比较：得到的结果)</span><br><span class="line">i=0已经将第一个最小的值放到第一位了。</span><br><span class="line"></span><br><span class="line">i = 1 的时候，j的相邻两个位置都要比较排一下位置：</span><br><span class="line">         j = 2 的时候：arr_M = 14532(a[1]和a[2]比得到的结果)</span><br><span class="line">         j = 3 的时候：arr_M = 13542(a[1]和a[3]比得到的结果)</span><br><span class="line">         j = 4 的时候：arr_M = 12543(a[1]和a[4]比得到的结果)</span><br><span class="line">i=1已经将第二个最小的值放到最第二位了。</span><br></pre></td></tr></table></figure>
<p><a href="#选择排序代码实现">选择排序代码实现</a></p>
<h2 id="三、快速排序"><a href="#三、快速排序" class="headerlink" title="三、快速排序"></a>三、快速排序</h2><p><a href="https://www.sohu.com/a/246785807_684445" target="_blank" rel="noopener">漫画：什么是快速排序？（完整版） </a></p>
<p>快速排序（Quicksort）是对冒泡排序的一种改进。</p>
<blockquote>
<p>同冒泡排序一样，快速排序也属于<strong>交换排序</strong>，通过元素之间的比较和交换位置来达到排序的目的。</p>
<p>不同的是，冒泡排序在每一轮只把一个元素冒泡到数列的一端，而快速排序<strong>在每一轮挑选一个基准元素，并让其他比它大的元素移动到数列一边，比它小的元素移动到数列的另一边，从而把数列拆解成了两个部分</strong>。这种思路就叫做<strong>分治法</strong>。</p>
</blockquote>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 快速排序函数 quickSort(array, 0, [array count] - 1);</span></span><br><span class="line"><span class="keyword">void</span> quickSort(<span class="built_in">NSMutableArray</span> *array, <span class="built_in">NSInteger</span> left, <span class="built_in">NSInteger</span> right) &#123;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="built_in">NSInteger</span> pivotIndex = partition(array, left, right);</span><br><span class="line">        quickSort(array, left, pivotIndex - <span class="number">1</span>);</span><br><span class="line">        quickSort(array, pivotIndex + <span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="#快速排序代码实现">快速排序代码实现</a></p>
<h3 id="1、排序原理："><a href="#1、排序原理：" class="headerlink" title="1、排序原理："></a>1、排序原理：</h3><p>设要排序的数组是A[0]……A[N-1]，首先任意选取一个数据（通常选用数组的第一个数）作为关键数据，</p>
<p><a href="https://baike.baidu.com/pic/快速排序算法/369842/0/b7003af33a87e950707fdf2110385343fbf2b416?fr=lemma&amp;ct=single" target="_blank" rel="noopener"><img src="https://bkimg.cdn.bcebos.com/pic/b7003af33a87e950707fdf2110385343fbf2b416?x-bce-process=image/resize,m_lfit,w_220,h_220,limit_1" alt="快排图"></a>快排图</p>
<p>然后将所有比它小的数都放到它左边，所有比它大的数都放到它右边，这个过程称为一趟快速排序。</p>
<h3 id="2、排序流程"><a href="#2、排序流程" class="headerlink" title="2、排序流程"></a>2、排序流程</h3><p>快速排序算法通过多次比较和交换来实现排序，其排序流程如下：</p>
<p>(1)首先设定一个分界值，通过该分界值将数组分成左右两部分。 </p>
<p>(2)将大于或等于分界值的数据集中到数组右边，小于分界值的数据集中到数组的左边。此时，左边部分中各元素都小于或等于分界值，而右边部分中各元素都大于或等于分界值。</p>
<p>(3)然后，左边和右边的数据可以独立排序。对于左侧的数组数据，又可以取一个分界值，将该部分数据分成左右两部分，同样在左边放置较小值，右边放置较大值。右侧的数组数据也可以做类似处理。</p>
<p>(4)重复上述过程，可以看出，这是一个递归定义。通过递归将左侧部分排好序后，再递归排好右侧部分的顺序。当左、右两个部分各数据排序完成后，整个数组的排序也就完成了。</p>
<h2 id="四、归并排序"><a href="#四、归并排序" class="headerlink" title="四、归并排序"></a>四、归并排序</h2><p><a href="https://www.hello-algo.com/chapter_sorting/merge_sort/" target="_blank" rel="noopener"><strong>Hello 算法</strong> 11.6  归并排序</a></p>
<p><a href="https://www.cnblogs.com/chengxiao/p/6194356.html" target="_blank" rel="noopener">图解排序算法(四)之归并排序</a></p>
<p>1、<strong>划分阶段</strong>：通过递归不断地将数组从中点处分开（以把序列分成元素尽可能相等的两半），将长数组的排序问题转换为短数组的排序问题。当子数组长度为 1 时终止划分，开始合并。</p>
<p><img src="/算法与数学/9算法/1024555-20161218163120151-452283750.png" alt="归并排序" style="zoom:33%;"></p>
<p>归并排序思路简单，速度仅次于快速排序，为稳定排序算法，一般用于对总体无序，但是各子项相对有序的数列。</p>
<p>2、<strong>合并阶段</strong>：持续地将左右两个较短的有序数组合并为一个较长的有序数组，直至结束。</p>
<blockquote>
<p>归并排序的合并过程如下：</p>
<ol>
<li><strong>初始化</strong>：创建两个指针，分别指向两个已排序数组的起始位置。</li>
<li><strong>比较元素</strong>：比较两个指针所指向的元素。</li>
<li><strong>选择较小元素</strong>：<strong>将较小的元素放入临时数组，并移动该元素所在数组的指针。</strong></li>
<li><strong>重复比较</strong>：重复步骤2和3，直到其中一个数组的所有元素都被比较过。</li>
<li><strong>复制剩余元素</strong>：如果一个数组的所有元素都已经被比较并复制到临时数组中，将另一个数组中剩余的元素直接复制到临时数组的末尾。</li>
<li><strong>返回临时数组</strong>：临时数组现在是一个合并后的有序数组。</li>
</ol>
</blockquote>
<p>示例：要将[4,5,7,8]和[1,2,3,6]两个已经有序的子序列，合并为最终序列[1,2,3,4,5,6,7,8]，来看下实现步骤。</p>
<p><img src="https://images2018.cnblogs.com/blog/1122709/201807/1122709-20180711175409829-1250175071.png" alt="img" style="zoom: 33%;"></p>
<h2 id="附：深度优先遍历-DFS-和广度优先遍历-BFS"><a href="#附：深度优先遍历-DFS-和广度优先遍历-BFS" class="headerlink" title="附：深度优先遍历(DFS)和广度优先遍历(BFS)"></a>附：深度优先遍历(DFS)和广度优先遍历(BFS)</h2><p>深度优先遍历(Depth First Search, 简称 DFS) </p>
<p><img src="/算法与数学/9算法/algorithm_DFS_1.png" alt="img"></p>
<p>广度优先遍历（Breath First Search, 简称 BFS） 也叫层序遍历，指的是从图的一个未遍历的节点出发，先遍历这个节点的相邻节点，再依次遍历每个相邻节点的相邻节点。</p>
<p>BFS 一般是解决最短路径问题。</p>
<p><img src="/算法与数学/9算法/algorithm_BFS_1.gif" alt="img"></p>
<h1 id="iOS算法篇-leetcode题目记录"><a href="#iOS算法篇-leetcode题目记录" class="headerlink" title="iOS算法篇-leetcode题目记录"></a>iOS算法篇-leetcode题目记录</h1><ul>
<li><a href="https://www.jianshu.com/p/8bca07d00b3e" target="_blank" rel="noopener">iOS算法篇-leetcode题目记录</a></li>
</ul>
<h2 id="附：排序算法代码"><a href="#附：排序算法代码" class="headerlink" title="附：排序算法代码"></a>附：排序算法代码</h2><p><a name="冒泡排序代码实现"></a></p>
<h3 id="1、冒泡排序代码实现"><a href="#1、冒泡排序代码实现" class="headerlink" title="1、冒泡排序代码实现"></a>1、冒泡排序代码实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (void)methodMaopao &#123;</span><br><span class="line">  int array[5] = &#123;4, 5, 1, 3, 2&#125;;</span><br><span class="line">    </span><br><span class="line">  for (int i = 0; i &lt; 5-1; i++) &#123; //需要比较几遍</span><br><span class="line">      for(int j = 0; j &lt; 5-1-i; j++) &#123; //每一遍都从0开始到倒数第-i个</span><br><span class="line">          if (array[j] &gt; array [j + 1])&#123;</span><br><span class="line">              int temp = array[j];</span><br><span class="line">              array[j] = array[j + 1];</span><br><span class="line">              array[j + 1] = temp;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  for(int i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">      printf(&quot;%d\n&quot;,array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="选择排序代码实现"></a></p>
<h3 id="2、选择排序代码实现"><a href="#2、选择排序代码实现" class="headerlink" title="2、选择排序代码实现"></a>2、选择排序代码实现</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sort</span><span class="params">(items: Array&lt;Int&gt;)</span></span> -&gt; <span class="type">Array</span>&lt;<span class="type">Int</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> list = items</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;list.<span class="built_in">count</span> &#123;</span><br><span class="line">    		<span class="comment">//记录当前最小的数，比较i+1后更大的数进行记录</span></span><br><span class="line">        <span class="keyword">var</span> minIndex = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> i+<span class="number">1</span>..&lt;list.<span class="built_in">count</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> list[j] &lt; list[minIndex] &#123;</span><br><span class="line">                minIndex = j</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 交换</span></span><br><span class="line">        <span class="keyword">let</span> temp = list[minIndex]</span><br><span class="line">        list[minIndex] = list[i]</span><br><span class="line">        list[i] = temp</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="快速排序代码实现"></a></p>
<h3 id="3、快速排序代码实现"><a href="#3、快速排序代码实现" class="headerlink" title="3、快速排序代码实现"></a>3、快速排序代码实现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单趟 快速排序挖坑法</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">PartSort2</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (left &gt;= right) <span class="keyword">return</span> left;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">int</span> begin = left;</span><br><span class="line">	<span class="keyword">int</span> end = right;</span><br><span class="line">	<span class="keyword">int</span> key = a[left]; <span class="comment">//保存要排序的值</span></span><br><span class="line">	<span class="keyword">while</span> (begin &lt; end) <span class="comment">//当左右指针相遇时结束</span></span><br><span class="line">	&#123;</span><br><span class="line">    <span class="comment">// begin是坑，从后往前找比key小的值填到坑里</span></span><br><span class="line">		<span class="keyword">while</span> (begin &lt; end &amp;&amp; a[end] &gt;= key) &#123;</span><br><span class="line">			end--;</span><br><span class="line">		&#125;</span><br><span class="line">		a[begin] = a[end];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 此时end位置是坑，从前往后比key大的值填到坑中</span></span><br><span class="line">		<span class="keyword">while</span> (begin &lt; end &amp;&amp; a[begin] &lt;= key) &#123;</span><br><span class="line">			begin++;</span><br><span class="line">		&#125;</span><br><span class="line">		a[end] = a[begin];</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//begin和end相遇的地方是key对应的位置</span></span><br><span class="line">	a[end] = key;</span><br><span class="line">	<span class="keyword">return</span> end; <span class="comment">//返回排好位置的元素的下标</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><blockquote>
<p>&lt; <a href="#目录">返回目录</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/算法与数学/9算法/" data-id="cm8clpx69004qmpr4urtnjm92" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-代码管理/Git/Git获取信息" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/代码管理/Git/Git获取信息/" class="article-date">
  <time datetime="2024-04-09T02:24:11.264Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git获取信息"><a href="#Git获取信息" class="headerlink" title="Git获取信息"></a>Git获取信息</h1><p>[toc]</p>
<h2 id="一、获取commit信息："><a href="#一、获取commit信息：" class="headerlink" title="一、获取commit信息："></a>一、获取commit信息：</h2><p>1、获取指定分支最后一次提交的信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Git获取信息</span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取指定分支最后一次提交的作者</span></span><br><span class="line">git show --format=%aN -b origin/dev_all -s</span><br></pre></td></tr></table></figure>
<p>2、获取指定分支最后一次提交的信息–本地</p>
<p>我想可以获取到远程origin/shop_report分支的最后一次提交作者，但是我又不想说必须得去拉取到本地，请问我该怎么处理</p>
<p>如果您不想将 <code>origin/shop_report</code> 分支拉取到本地仓库中，您可以尝试使用以下命令来获取该分支的最后一次提交的作者名字：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-remote --heads origin dev_all | cut -f 1 | xargs -I &#123;&#125; git show --format=%aN &#123;&#125; -s | head -n 1</span><br></pre></td></tr></table></figure>
<p>该命令将会首先使用 <code>git ls-remote</code> 命令获取 <code>origin/shop_report</code> 分支的引用头（ref），然后使用 <code>cut</code> 命令提取该引用头的哈希值。接着，使用 <code>xargs</code> 命令将该哈希值作为参数传递给 <code>git show</code> 命令，并使用 <code>--format=%aN</code> 参数指定输出作者名字。最后，使用 <code>head</code> 命令提取第一行输出，即为该分支的最后一次提交的作者名字。</p>
<p>请注意，这种方式虽然可以不将 <code>origin/shop_report</code> 分支拉取到本地仓库中，但是每次执行该命令都会从远程仓库中获取该分支的引用头和最后一次提交的作者信息，因此速度可能较慢，特别是在网络条件不好的情况下。如果您需要频繁地获取 <code>origin/shop_report</code> 分支的最后一次提交的作者信息，建议还是将该分支拉取到本地仓库中。</p>
<h3 id="1、git-查看远程分支"><a href="#1、git-查看远程分支" class="headerlink" title="1、git 查看远程分支"></a>1、git 查看远程分支</h3><p>要查看远程分支，可以使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure>
<p>该命令会列出所有远程分支的列表，以<code>remotes/</code>为前缀。如果你想查看特定的远程分支，可以使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r | grep &lt;remote-branch-name&gt;</span><br></pre></td></tr></table></figure>
<p>其中，<code>&lt;remote-branch-name&gt;</code>是指你要查看的远程分支名称，这个命令会查询匹配远程分支名称的所有分支，然后在终端输出它们的名称。</p>
<h3 id="2、远程删掉了，但本地执行git-branch-r-还是显示出来"><a href="#2、远程删掉了，但本地执行git-branch-r-还是显示出来" class="headerlink" title="2、远程删掉了，但本地执行git branch -r 还是显示出来"></a>2、远程删掉了，但本地执行git branch -r 还是显示出来</h3><h4 id="2-1、git-remote-prune-origin"><a href="#2-1、git-remote-prune-origin" class="headerlink" title="2.1、git remote prune origin"></a>2.1、git remote prune origin</h4><p>如果你在远程删除了一个分支，但是本地执行<code>git branch -r</code>命令仍然显示该分支名，这可能是因为本地的远程分支列表缓存了该分支名。为了解决这个问题，你可以执行以下命令来更新本地的远程分支列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote prune origin</span><br></pre></td></tr></table></figure>
<p>该命令会从远程 Git 仓库中删除已经不存在的分支，并更新你本地的远程分支列表。执行完这个命令后，再次执行<code>git branch -r</code>，就应该不会再看到已经被删除的分支名了。</p>
<h4 id="2-2、git-remote-prune-origin-执行出错了"><a href="#2-2、git-remote-prune-origin-执行出错了" class="headerlink" title="2.2、git remote prune origin 执行出错了"></a>2.2、git remote prune origin 执行出错了</h4><p>如果<code>git remote prune origin</code>命令执行出错了，很可能是由于你的本地缓存信息有问题，请执行以下操作修复问题：</p>
<ol>
<li>首先，运行以下命令来更新远程分支缓存：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 这个命令会强制更新缓存，在更新过程中删除远程不存在的分支，然后更新你本地的远程分支列表</span></span><br><span class="line">git remote update origin --prune</span><br></pre></td></tr></table></figure>
<p>如果上述命令没有解决问题，你需要手动清除本地缓存。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 这个命令会从远程 Git 仓库中下载所有最新的分支，同时删除远程不存在的分支，然后更新本地分支列表。</span></span><br><span class="line">git fetch --all --prune</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果上述命令仍然无法解决问题，你可以尝试处理该git工程下的 .git/refs/remotes 文件夹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 尝试方式1：手动删除指定分支</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 尝试方式2：删除所有本地缓存目录并重新克隆仓库。</span></span><br><span class="line">rm -rf .git/refs/remotes</span><br><span class="line">git clone &lt;repository-url&gt;</span><br></pre></td></tr></table></figure>
<h4 id="End"><a href="#End" class="headerlink" title="End"></a>End</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/代码管理/Git/Git获取信息/" data-id="cm8clpz1100rsmpr4cd9b9aor" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-代码管理/Git/Git随笔" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/代码管理/Git/Git随笔/" class="article-date">
  <time datetime="2024-04-09T02:24:11.264Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git随笔"><a href="#Git随笔" class="headerlink" title="Git随笔"></a>Git随笔</h1><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><ul>
<li><a href="https://pages.carm.cc/doc/branch-main.html" target="_blank" rel="noopener">为什么Git分支开始从“master”变为“main”了？</a></li>
<li><a href="https://www.jianshu.com/p/51d212de1579" target="_blank" rel="noopener">把git的默认分支master修改成main</a></li>
</ul>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>git-commit-plugin → VSCode</p>
<p>commit-template-idea-plugin → Intellij IDEA</p>
<h2 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h2><ul>
<li><a href="https://www.cnblogs.com/Yellow-ice/p/15353900.html" target="_blank" rel="noopener">前端规范之Git提交规范（Commitizen）</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/代码管理/Git/Git随笔/" data-id="cm8clpz1100rvmpr4kp8r3mkb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-代码管理/Git/Git使用" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/代码管理/Git/Git使用/" class="article-date">
  <time datetime="2024-04-09T02:24:11.261Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git使用"><a href="#Git使用" class="headerlink" title="Git使用"></a>Git使用</h1><p>详细而全的文档：<a href="http://git.oschina.net/progit/" target="_blank" rel="noopener">Pro Git（中文版）</a></p>
<h4 id="Git回滚代码到某个commit"><a href="#Git回滚代码到某个commit" class="headerlink" title="Git回滚代码到某个commit"></a>Git回滚代码到某个commit</h4><p>回退命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在git push的时候，有时候我们会想办法撤销git commit的内容 </span><br><span class="line">1、找到之前提交的git commit的id </span><br><span class="line">git log </span><br><span class="line">找到想要撤销的id </span><br><span class="line">2、git reset –hard id </span><br><span class="line">完成撤销,同时将代码恢复到前一commit_id 对应的版本 </span><br><span class="line">3、git reset id </span><br><span class="line">完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://blog.csdn.net/YoungStunner/article/details/78696763" target="_blank" rel="noopener">Git-撤销（回退）已经add，commit或push的提交</a></li>
<li><a href="https://blog.csdn.net/youshaoduo/article/details/52755573" target="_blank" rel="noopener">SourceTree超前一个版本，落后N个版本</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD^         			回退到上个版本，代码还在</span><br><span class="line"></span><br><span class="line">注意：如果加上使用--hard会导致这里虽然回到了上个版本，但是commit上去，未push出去的就没法找回了</span><br><span class="line">$ git reset --hard HEAD^         回退到上个版本</span><br><span class="line">$ git reset --hard HEAD~3        回退到前3次提交之前，以此类推，回退到n次提交之前</span><br><span class="line">$ git reset --hard commit_id     退到/进到 指定commit的sha码</span><br></pre></td></tr></table></figure>
<p>当你有多处备份的时候，你可以强制性的执行</p>
<p>git reset –hard HEAD^ </p>
<p>但是你刚commit上去，未push出去的就没法找回了。</p>
<h4 id="pod-install报错：ArgumentError-Malformed-version-number-string"><a href="#pod-install报错：ArgumentError-Malformed-version-number-string" class="headerlink" title="pod install报错：ArgumentError - Malformed version number string"></a>pod install报错：ArgumentError - Malformed version number string</h4><p>网上的参考：<a href="https://www.jianshu.com/p/3155a187f884" target="_blank" rel="noopener">pod install报错：ArgumentError - Malformed version number string</a></p>
<p>实际：通过执行<code>sudo gem install cocoapods</code>命令重装cocoapods即解决了。</p>
<p>其他<a href="https://www.jianshu.com/p/af554a4cc335" target="_blank" rel="noopener">CocoaPods那些错</a></p>
<h4 id="GitHub-出现-POST-git-receive-pack-chunked-解决方案详解"><a href="#GitHub-出现-POST-git-receive-pack-chunked-解决方案详解" class="headerlink" title="GitHub 出现 POST git-receive-pack (chunked) 解决方案详解"></a>GitHub 出现 POST git-receive-pack (chunked) 解决方案详解</h4><p>出现 POST git-receive-pack (chunked) 的原因就是 当使用 HTTPS 提交到 Git 上时使用不检查加密要是东西过多将导致提交停止。</p>
<p>解决方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">方案1&gt;  使用 Git 提交代码</span><br><span class="line">进入到要提交的代码的目录，里面包含 .git 文件夹，输入指令 git config http.postBuffer 524288000</span><br><span class="line"></span><br><span class="line">方案2&gt; 使用 SourceTreee 提交代码</span><br><span class="line">如图按照顺序依次点击在最后一步增加</span><br><span class="line">[http] </span><br><span class="line">    postBuffer = 524288000</span><br></pre></td></tr></table></figure>
<blockquote>
<p><img src="/代码管理/Git/Git使用/POST git-receive-pack (chunked" alt="POST git-receive-pack (chunked)">.png)</p>
</blockquote>
<p>再次提交将会成功。</p>
<p>相关参考：<a href="https://www.cnblogs.com/gongyuhonglou/p/8671200.html" target="_blank" rel="noopener">GitHub 出现 POST git-receive-pack (chunked) 解决方案详解</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/代码管理/Git/Git使用/" data-id="cm8clpz0z00rgmpr4876hdtdc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-代码管理/Git/Github Push 方式" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/代码管理/Git/Github Push 方式/" class="article-date">
  <time datetime="2024-04-09T02:24:11.225Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Github-Push-方式"><a href="#Github-Push-方式" class="headerlink" title="Github Push 方式"></a>Github Push 方式</h1><p>[toc]</p>
<p>Git的其他参考文章：</p>
<ul>
<li><p><a href="https://gitbook.tw/interview" target="_blank" rel="noopener">Git 面試題</a></p>
</li>
<li><p><a href="https://gitbook.tw/interview" target="_blank" rel="noopener">問：用一般方式的合併，跟使用 <code>rebase</code> 方式合併，有什麼不同？各有何優缺點？</a></p>
<blockquote>
<p>一般的合併方式，有些情況（非快轉合併）會產生一個額外的 commit 來接合兩邊分支，而 rebase 合併分支跟一般的合併分支的明顯差別，就是使用 rebase 方式合併分支不會有這個合併的 Commit。</p>
<p>如果就以最後的的結果來說，檔案內容來說是沒什麼差別，但在 Git 的歷史紀錄上來說就有一些差別，誰 rebase 誰，會造成歷史紀錄上先後順序不同的差別。例如 <code>cat</code> 分支 rebase 到 <code>dog</code> 分支的話，表示 <code>cat</code> 分支會被接到 <code>dog</code> 分支的後面；反之如果是 <code>dog</code> 分支 rebase 到 <code>cat</code> 上的話，表示 <code>dog</code>分支 會被接到 <code>cat</code> 分支的後面。</p>
<p>使用 rebase 的好處，是整理出來的歷史紀錄不會有合併用的 commit，看起來比較乾淨（也是有些人不覺得這乾淨多少），另外歷史紀錄的順序可以依照誰 rebase 誰而決定先後關係（不過這點不一定是優點或缺點，端看整理的人而定）；缺點就是它相對的比一般的合併來得沒那麼直覺，一個不小心可能會弄壞掉而且還不知道怎麼 reset 回來，或是發生衝突的時候就會停在一半，對不熟悉 rebase 的人來說也許是個困擾。</p>
<p>通常在還沒有推出去但感覺得有點亂（或太瑣碎）的 commit，我會先使用 rebase 來整理分支後再推出去。rebase 等於是在修改歷史，這個行為會做出平行時空，修改已經推出去的歷史可能會對其它人帶來困擾，所以對於已經推出去的內容，請不要任意使用 rebase。</p>
</blockquote>
</li>
</ul>
<h1 id="【狀況題】怎麼有時候推不上去…"><a href="#【狀況題】怎麼有時候推不上去…" class="headerlink" title="【狀況題】怎麼有時候推不上去…"></a>【狀況題】怎麼有時候推不上去…</h1><p>偶爾在執行 Push 指令的時候會出現這個錯誤訊息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br><span class="line">To https://github.com/eddiekao/dummy-git.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: failed to push some refs to &apos;https://github.com/eddiekao/dummy-git.git&apos;</span><br><span class="line">hint: Updates were rejected because the remote contains work that you do</span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first integrate the remote changes</span><br><span class="line">hint: (e.g., &apos;git pull ...&apos;) before pushing again.</span><br><span class="line">hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details.</span><br></pre></td></tr></table></figure>
<p>這段訊息的意思是線上版本的內容比你電腦裡這份還要新，所以 Git 不讓你推上去。</p>
<h2 id="怎麼造成的？"><a href="#怎麼造成的？" class="headerlink" title="怎麼造成的？"></a>怎麼造成的？</h2><p>通常這個狀況會發生在多人一起開發的時候，想像一下這個情境：</p>
<p><img src="/代码管理/Git/Github Push 方式/Github%20Push%20%E6%96%B9%E5%BC%8F/fail1.png" alt="new repository"></p>
<ol>
<li>Sherly 跟 Eddie 兩個人在差不多的時間都從 Git Server 上拉了一份資料下來準備進行開發。</li>
<li>Sherly 手腳比較快，先完成了，於是先把做好的成果推一份上去。</li>
<li>Eddie 不久後也完成了，但當他要推上去的時候發現推不上去了…</li>
</ol>
<h2 id="怎麼解決？"><a href="#怎麼解決？" class="headerlink" title="怎麼解決？"></a>怎麼解決？</h2><p>解決方法算是有兩招</p>
<h3 id="第一招：先拉再推"><a href="#第一招：先拉再推" class="headerlink" title="第一招：先拉再推"></a>第一招：先拉再推</h3><p>因為你電腦裡的內容是比較舊的，所以你應該先拉一份線上版本的回來更新，然後再推一次：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git pull --rebase</span><br><span class="line">remote: Counting objects: 3, done.</span><br><span class="line">remote: Compressing objects: 100% (2/2), done.</span><br><span class="line">remote: Total 3 (delta 1), reused 3 (delta 1), pack-reused 0</span><br><span class="line">Unpacking objects: 100% (3/3), done.</span><br><span class="line">From https://github.com/eddiekao/dummy-git</span><br><span class="line">   37aaef6..bab4d89  master     -&gt; origin/master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: update index</span><br></pre></td></tr></table></figure>
<p>這裡加了 <code>--rebase</code> 參數是表示「內容抓下來之後請使用 Rebase 方式合併」，當然你想用一般的合併方式也沒問題。合併如果沒發生衝突，接著應該就可以順利往上推了。</p>
<h3 id="第二招：無視規則，總之就是聽我的！（誤）"><a href="#第二招：無視規則，總之就是聽我的！（誤）" class="headerlink" title="第二招：無視規則，總之就是聽我的！（誤）"></a>第二招：無視規則，總之就是聽我的！（誤）</h3><p>凡事總有先來後到，在上面的例子中，Sherly 先推上去的內容，後推的人就是應該拉一份下來更新，不然照規定是推不上去的。不過這規則也是有例外，只要加上了 <code>--force</code> 或是 <code>-f</code> 參數，它就會強迫硬推上去，把 Sherly 之前的內容蓋掉：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git push -f</span><br><span class="line">Counting objects: 19, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (17/17), done.</span><br><span class="line">Writing objects: 100% (19/19), 2.16 KiB | 738.00 KiB/s, done.</span><br><span class="line">Total 19 (delta 6), reused 0 (delta 0)</span><br><span class="line">remote: Resolving deltas: 100% (6/6), done.</span><br><span class="line">To https://github.com/eddiekao/dummy-git.git</span><br><span class="line"> + 6bf3967...c4ea775 master -&gt; master (forced update)</span><br></pre></td></tr></table></figure>
<p>雖然這樣一定會成功，但接下來你就要去面對 Sherly，跟她解釋為什麼你把她的進度蓋掉了。更多關於 Force Push 的說明，可參考「<a href="https://gitbook.tw/chapters/github/using-force-push.html" target="_blank" rel="noopener">【狀況題】聽說 git push -f 這個指令很可怕，什麼情況可以用它呢？</a>」章節介紹。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/代码管理/Git/Github Push 方式/" data-id="cm8clpz1000rpmpr481iy6chm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-代码管理/Git/Github Push 失败问题" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/代码管理/Git/Github Push 失败问题/" class="article-date">
  <time datetime="2024-04-09T02:24:11.189Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Github-Push-失败问题"><a href="#Github-Push-失败问题" class="headerlink" title="Github Push 失败问题"></a>Github Push 失败问题</h1><p>[toc]</p>
<p>参考文章：</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/414028184" target="_blank" rel="noopener">关于Support for password authentication was removed on August 13, 2021报错的解决方案</a></li>
</ul>
<h2 id="github-push代码不成功"><a href="#github-push代码不成功" class="headerlink" title="github push代码不成功"></a>github push代码不成功</h2><h3 id="问题一：Support-for-password-authentication-was-removed-on-August-13-2021-Please-use-a-personal-access-token-instead"><a href="#问题一：Support-for-password-authentication-was-removed-on-August-13-2021-Please-use-a-personal-access-token-instead" class="headerlink" title="问题一：Support for password authentication was removed on August 13, 2021. Please use a personal access token instead."></a>问题一：Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.</h3><p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423220008550.png" alt="image-20220423220008550"></p>
<blockquote>
<p>remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.</p>
<p>remote: Please see <a href="https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/" target="_blank" rel="noopener">https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/</a> for more information.</p>
</blockquote>
<p>意思就是你原先的密码凭证从2021年8月13日开始就不能用了，要使用个人访问令牌（personal access token），就是把你的密码替换成token。</p>
<h4 id="解决：github-push更新token验证方式。"><a href="#解决：github-push更新token验证方式。" class="headerlink" title="解决：github push更新token验证方式。"></a>解决：github push更新token验证方式。</h4><h5 id="1、Please-use-a-personal-access-token-instead-（密码方式不适用了，需改使用token方式登录）"><a href="#1、Please-use-a-personal-access-token-instead-（密码方式不适用了，需改使用token方式登录）" class="headerlink" title="1、Please use a personal access token instead.（密码方式不适用了，需改使用token方式登录）"></a>1、Please use a personal access token instead.（密码方式不适用了，需改使用token方式登录）</h5><p>1、登录github官网进入setting</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/8106190-1ad586260a692345.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/476" alt="img" style="zoom:33%;"></p>
<p>2.页面拉到底 找到 Developer Setting</p>
<p>3.右侧菜单栏找到Personal access tokens 点击后 找到右上角的Generate new token</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/8106190-bd00cafaa195f83a.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200" alt="img"></p>
<p>4、token的使用</p>
<p>在终端上cd到要项目中，然后执行git pull。</p>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423223148829.png" alt="image-20220423223148829"></p>
<p>此时弹出</p>
<p>Username for ‘<a href="https://github.com&#39;" target="_blank" rel="noopener">https://github.com&#39;</a>: 此处输入你github 用户名</p>
<p>Password for ‘https://用户名@github.com’:把复制的token粘贴到此处（<strong>这里原先是输入密码的现在改成token</strong>）回车就好了</p>
<h5 id="2、Failed-to-connect-to-github-com-443（登录方式是token了，但连接失败。）"><a href="#2、Failed-to-connect-to-github-com-443（登录方式是token了，但连接失败。）" class="headerlink" title="2、Failed to connect to github.com 443（登录方式是token了，但连接失败。）"></a>2、Failed to connect to github.com 443（登录方式是token了，但连接失败。）</h5><p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423221025009.png" alt="image-20220423221025009"></p>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423221809343.png" alt="image-20220423221809343" style="zoom: 67%;"></p>
<p>解决方式，终端输入如下命令：</p>
<blockquote>
<p>git config –global http.proxy</p>
</blockquote>
<h5 id="3、remote-Write-access-to-repository-not-granted-connect上了，但其他操作失败，需指定token的权限"><a href="#3、remote-Write-access-to-repository-not-granted-connect上了，但其他操作失败，需指定token的权限" class="headerlink" title="3、remote: Write access to repository not granted.(connect上了，但其他操作失败，需指定token的权限)"></a>3、remote: Write access to repository not granted.(connect上了，但其他操作失败，需指定token的权限)</h5><p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423222009245.png" alt="image-20220423222009245"></p>
<p>解决：</p>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423222457565.png" alt="image-20220423222457565"></p>
<p>创建的时候下面的权限和是否设置过期时间(我是吧所有权限都勾选了) 根据自己情况选择 最后创建完后 吧token复制下来</p>
<h5 id="4、LibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443"><a href="#4、LibreSSL-SSL-connect-SSL-ERROR-SYSCALL-in-connection-to-github-com-443" class="headerlink" title="4、LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443"></a>4、LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443</h5><p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423224215251.png" alt="image-20220423224215251"></p>
<blockquote>
<p>fatal: unable to access ‘<a href="https://github.com/dvlproad/001-UIKit-CQDemo-Flutter.git/&#39;" target="_blank" rel="noopener">https://github.com/dvlproad/001-UIKit-CQDemo-Flutter.git/&#39;</a>: LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443 </p>
</blockquote>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423223640807.png" alt="image-20220423223640807"></p>
<p>解决：终端输入</p>
<blockquote>
<p>git config http.sslVerify “false”</p>
<p>git config –global http.sslVerify “false”</p>
</blockquote>
<h2 id="三、访问GitHub遇到SSL-ERROR-SYSCALL错误解决方法"><a href="#三、访问GitHub遇到SSL-ERROR-SYSCALL错误解决方法" class="headerlink" title="三、访问GitHub遇到SSL_ERROR_SYSCALL错误解决方法"></a>三、访问GitHub遇到SSL_ERROR_SYSCALL错误解决方法</h2><p>其他参考文章：<a href="https://www.jianshu.com/p/9cf537b3b8d5" target="_blank" rel="noopener">访问GitHub遇到SSL_ERROR_SYSCALL错误解决方法</a></p>
<p>检查1：电脑上是否有<code>curl-openssl</code>（一般都有）</p>
<p>openssl version</p>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423232921517.png" alt="image-20220423232921517"></p>
<p>如果没有，则安装<code>curl-openssl</code>。安装方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install curl-openssl</span><br></pre></td></tr></table></figure>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423233608415.png" alt="image-20220423233608415"></p>
<h3 id="2、安装xxx时候失败，Error-No-such-file-or-directory-rb-sysopen"><a href="#2、安装xxx时候失败，Error-No-such-file-or-directory-rb-sysopen" class="headerlink" title="2、安装xxx时候失败，Error: No such file or directory @ rb_sysopen"></a>2、安装xxx时候失败，Error: No such file or directory @ rb_sysopen</h3><h4 id="1、原因"><a href="#1、原因" class="headerlink" title="1、原因"></a>1、原因</h4><p>原来是一个依赖包下载不成功（harfbuzz-3.1.1.arm64_monterey）</p>
<h4 id="解决-使用brew单独安装即可，然后再就是再次下载之前的包"><a href="#解决-使用brew单独安装即可，然后再就是再次下载之前的包" class="headerlink" title="解决:使用brew单独安装即可，然后再就是再次下载之前的包"></a>解决:使用brew单独安装即可，然后再就是再次下载之前的包</h4><p>用brew单独下载依赖包，就避免了找不到依赖版本的错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install zstd</span><br></pre></td></tr></table></figure>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423234308334.png" alt="image-20220423234308334"></p>
<p>之后再返回继续执行之前的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install curl-openssl</span><br></pre></td></tr></table></figure>
<p><img src="/代码管理/Git/Github Push 失败问题/Github%20Push%20%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/image-20220423234350492.png" alt="image-20220423234350492"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/代码管理/Git/Github Push 失败问题/" data-id="cm8clpz1000rmmpr4wmero728" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-代码管理/Git/Git2" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/代码管理/Git/Git2/" class="article-date">
  <time datetime="2024-04-09T02:24:11.180Z" itemprop="datePublished">2024-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li>一、https 和 SSH 的区别</li>
<li>二、在 github 上添加 SSH key 的步骤</li>
<li>三、git撤销</li>
</ul>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>很多朋友在用github管理项目的时候，都是直接使用https url克隆到本地，当然也有有些人使用 SSH url 克隆到本地。然而，为什么绝大多数人会使用https url克隆呢？</p>
</blockquote>
<p>这是因为，使用https url克隆对初学者来说会比较方便，复制https url 然后到 git Bash 里面直接用clone命令克隆到本地就好了。而使用 SSH url 克隆却需要在克隆之前先配置和添加好 SSH key 。</p>
<p>因此，如果你想要使用 SSH url 克隆的话，你必须是这个项目的拥有者。否则你是无法添加 SSH key 的。</p>
<h2 id="一、https-和-SSH-的区别："><a href="#一、https-和-SSH-的区别：" class="headerlink" title="一、https 和 SSH 的区别："></a>一、https 和 SSH 的区别：</h2><p>1、前者可以随意克隆github上的项目，而不管是谁的；而后者则是你必须是你要克隆的项目的拥有者或管理员，且需要先添加 SSH key ，否则无法克隆。</p>
<p>2、https url 在push的时候是需要验证用户名和密码的；而 SSH 在push的时候，是不需要输入用户名的，如果配置SSH key的时候设置了密码，则需要输入密码的，否则直接是不需要输入密码的。</p>
<h2 id="二、在-github-上添加-SSH-key-的步骤："><a href="#二、在-github-上添加-SSH-key-的步骤：" class="headerlink" title="二、在 github 上添加 SSH key 的步骤："></a>二、在 github 上添加 SSH key 的步骤：</h2><h4 id="1、首先需要检查你电脑是否已经有-SSH-key"><a href="#1、首先需要检查你电脑是否已经有-SSH-key" class="headerlink" title="1、首先需要检查你电脑是否已经有 SSH key"></a>1、首先需要检查你电脑是否已经有 SSH key</h4><p>进入<code>~/.ssh</code>目录，检查是否已经存在 <code>id_rsa.pub</code> 或 <code>id_dsa.pub</code> 文件，如果文件已经存在，那么你可以跳过步骤2，直接进入步骤3。</p>
<h4 id="2、创建一个-SSH-key"><a href="#2、创建一个-SSH-key" class="headerlink" title="2、创建一个 SSH key"></a>2、创建一个 SSH key</h4><p><code>$ ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">代码参数含义：</span><br><span class="line">-t 指定密钥类型，默认是 rsa ，可以省略。</span><br><span class="line">-C 设置注释文字，比如邮箱。</span><br><span class="line">-f 指定密钥文件存储文件名。</span><br></pre></td></tr></table></figure>
<p>以上代码省略了 -f 参数，因此，运行上面那条命令后会让你输入一个文件名，用于保存刚才生成的 SSH key 代码，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line"># Enter file in which to save the key (/c/Users/you/.ssh/id_rsa): [Press enter]</span><br></pre></td></tr></table></figure>
<p>当然，你也可以不输入文件名，使用默认文件名（推荐），那么就会生成 id_rsa 和 id_rsa.pub 两个秘钥文件。</p>
<p>接着又会提示你输入两次密码（该密码是你push文件的时候要输入的密码，而不是github管理者的密码），</p>
<p>当然，你也可以不输入密码，直接按回车。那么push的时候就不需要输入密码，直接提交到github上了，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line"># Enter same passphrase again:</span><br></pre></td></tr></table></figure>
<p>接下来，就会显示如下代码提示，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved in /c/Users/you/.ssh/id_rsa.</span><br><span class="line"># Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.</span><br><span class="line"># The key fingerprint is:</span><br><span class="line"># 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</span><br></pre></td></tr></table></figure>
<p>当你看到上面这段代码的收，那就说明，你的 SSH key 已经创建成功，你只需要添加到github的SSH key上就可以了。</p>
<h4 id="3、添加你的-SSH-key-到-github上面去"><a href="#3、添加你的-SSH-key-到-github上面去" class="headerlink" title="3、添加你的 SSH key 到 github上面去"></a>3、添加你的 SSH key 到 github上面去</h4><p>进入账号的SSH key添加处，将<code>id_rsa.pub</code> 文件的内容复制上去添加即可。(记得 SSH key 代码的前后不要留有空格或者回车。)</p>
<h4 id="4、测试一下该SSH-key"><a href="#4、测试一下该SSH-key" class="headerlink" title="4、测试一下该SSH key"></a>4、测试一下该SSH key</h4><p>在git Bash 中输入以下代码</p>
<p>$ ssh -T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a><br>当你输入以上代码时，会有一段警告代码，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The authenticity of host &apos;github.com (207.97.227.239)&apos; can&apos;t be established.</span><br><span class="line"># RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span><br><span class="line"># Are you sure you want to continue connecting (yes/no)?</span><br></pre></td></tr></table></figure>
<p>这是正常的，你输入 yes 回车既可。如果你创建 SSH key 的时候设置了密码，接下来就会提示你输入密码，如：</p>
<p>Enter passphrase for key ‘/c/Users/Administrator/.ssh/id_rsa’:<br>当然如果你密码输错了，会再要求你输入，知道对了为止。</p>
<p>注意：输入密码时如果输错一个字就会不正确，使用删除键是无法更正的。</p>
<p>密码正确后你会看到下面这段话，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hi username! You&apos;ve successfully authenticated, but GitHub does not</span><br><span class="line"># provide shell access.</span><br></pre></td></tr></table></figure>
<p>如果用户名是正确的,你已经成功设置SSH密钥。如果你看到 “access denied” ，者表示拒绝访问，那么你就需要使用 https 去访问，而不是 SSH 。</p>
<h2 id="github上如何修改别人的开源项目并提交"><a href="#github上如何修改别人的开源项目并提交" class="headerlink" title="github上如何修改别人的开源项目并提交"></a>github上如何修改别人的开源项目并提交</h2><p>github上的开源项目是人人都可download下来修改，并贡献源码的，但不是无原则的，如果开源作者提交的代码，被任何人都download下来修改并且随意提交的话，那会有很多恶意修改源码的行为出现，也就没有github良好的开源生态, 那么github上是怎么修改别人的源码并且提交，让自己成为同一项目的源码贡献者呢。有一下三种机制：</p>
<h4 id="1-开源作者把你加入项目合作者里面"><a href="#1-开源作者把你加入项目合作者里面" class="headerlink" title="1. 开源作者把你加入项目合作者里面"></a>1. 开源作者把你加入项目合作者里面</h4><p>首先他会进入自己项目的settings里，如下：</p>
<blockquote>
<p><img src="/代码管理/Git/Git2/./Git2/gitOpen-Collaborators.png" alt="Collaborators"><br>然后在Collaborators里面搜索你的github用户名，add进去，之后你会在github上受到一个invitation提示，确认一下之后，你就可以在任何IDE里面用git clone到本地，URI选择这个github的开源地址就行，相当于这个github地址作为一个git的远程代码服务器。</p>
</blockquote>
<h4 id="2-第二种方法是fork到本地，然后pull-request"><a href="#2-第二种方法是fork到本地，然后pull-request" class="headerlink" title="2. 第二种方法是fork到本地，然后pull request"></a>2. 第二种方法是fork到本地，然后pull request</h4><p>找到这个开源项目，点击右上角fork按钮，然后在你自己的github里面就会出现这个项目，修改完之后，在你的github里点击pull request, 之后原作者会收到这个请求，通过之后你就贡献了自己的源码</p>
<blockquote>
<p><img src="/代码管理/Git/Git2/./Git2/gitOpen-Fork&amp;pull request.png" alt="Fork&amp;pull request"></p>
</blockquote>
<h4 id="3-建立organization"><a href="#3-建立organization" class="headerlink" title="3. 建立organization"></a>3. 建立organization</h4><p>登录自己github账号后，进入github.com, 点击右上角，创建一个开源项目组织，人人都可贡献源码</p>
<blockquote>
<p><img src="/代码管理/Git/Git2/./Git2/gitOpen-Organization.png" alt="Organization"></p>
</blockquote>
<h2 id="三、git撤销"><a href="#三、git撤销" class="headerlink" title="三、git撤销"></a>三、git撤销</h2><p><code>git reset HEAD^</code><br>拉取最近一次提交到版本库的文件到暂存区  改操作不影响工作区</p>
<h2 id="四、git删除远程提交"><a href="#四、git删除远程提交" class="headerlink" title="四、git删除远程提交"></a>四、git删除远程提交</h2><p>这是一个之后需要删除掉的远程commit</p>
<p>在需要删除掉的远程commit后，我又提交了一个commit</p>
<p>在需要删除掉的远程commit后，我又提交了第二个commit</p>
<p><a href="https://blog.csdn.net/Milk_o3o/article/details/79450631" target="_blank" rel="noopener">git 删除远程仓库的某次提交</a></p>
<blockquote>
<p><img src="/代码管理/Git/Git2/./Git2/git remove remote commit 2.png" alt="git删除远程提交"></p>
</blockquote>
<blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">删除上一次远程仓库的提交，修改上次提交的代码，做一次更完美的commit。</span><br><span class="line">&gt;</span><br><span class="line">git reset commitId （注：不要带–hard）到上个版本</span><br><span class="line">&gt;</span><br><span class="line">git stash 暂存修改</span><br><span class="line">&gt;</span><br><span class="line">git push --force 强制push，远程的最新的一次commit被删除</span><br><span class="line">&gt;</span><br><span class="line">git stash pop 释放暂存的修改，开始修改代码</span><br><span class="line">&gt;</span><br><span class="line">git add . -&gt; git commit -m &quot;massage&quot; -&gt; git push</span><br></pre></td></tr></table></figure>
<blockquote>
<p><img src="/代码管理/Git/Git2/./Git2/git remove remote commit 1.png" alt="git删除远程提交"></p>
</blockquote>
<h4 id="End"><a href="#End" class="headerlink" title="End"></a>End</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dvlproad.github.io/代码管理/Git/Git2/" data-id="cm8clpz0z00rjmpr4tg3mdlba" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/">Architecture</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第一章：架构相关/">第一章：架构相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第七章：技术选型/">第七章：技术选型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第三章：基础规范/">第三章：基础规范</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第九章：监控相关/">第九章：监控相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第二章：框架相关/">第二章：框架相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第八章：页面加载相关/">第八章：页面加载相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第六章：通用业务规范/">第六章：通用业务规范</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/第四章：基础框架设计及接口文档/">第四章：基础框架设计及接口文档</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/无瑕疵的混编登录页/">无瑕疵的混编登录页</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第一章：Flutter入门/">第一章：Flutter入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第七章：规范/">第七章：规范</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第三章：原生项目与Flutter的交互/">第三章：原生项目与Flutter的交互</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第九章：框架升级/">第九章：框架升级</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第二章：集成Flutter到原生项目/">第二章：集成Flutter到原生项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第五章：详解/">第五章：详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第八章：状态管理/">第八章：状态管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第六章：进阶/">第六章：进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第四章：Flutter登录页实战/">第四章：Flutter登录页实战</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/第零章：Flutter源码/">第零章：Flutter源码</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/QA/">QA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/README/">README</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/React/第一章：React入门/">第一章：React入门</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/">ReactNative</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第一章：ReactNative入门/">第一章：ReactNative入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第一章：React入门/">第一章：React入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第五章：ReactNative详解/">第五章：ReactNative详解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第八章：ReactNative实践/">第八章：ReactNative实践</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactNative/第六章：ReactNative进阶/">第六章：ReactNative进阶</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/">Script</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Script/JQuery/">JQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Mac快速操作/">Mac快速操作</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Script/Shell/">Shell</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Weex/">Weex</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Weex/第一章：Weex入门/">第一章：Weex入门</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/Swift/">Swift</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/混编/">混编</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/移动分析/">移动分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/自动化/">自动化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/证书发版/">证书发版</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/npmjs/">npmjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/上架相关/">上架相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码管理/">代码管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全与破解/">安全与破解</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/">实用工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/ChatGPT/">ChatGPT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/GitBook/">GitBook</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/Jenkins/">Jenkins</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/XAMPP/">XAMPP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/Zentao/">Zentao</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用工具/其他小工具/">其他小工具</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作常识/">工作常识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术常识/">技术常识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活常识/">生活常识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电脑使用/">电脑使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/管理相关/">管理相关</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/管理相关/第一章：账号管理/">第一章：账号管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程工具/">编程工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/跨平台/">跨平台</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/跨平台/第一章：混编事项说明/">第一章：混编事项说明</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Architecture/">Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ChatGPT/">ChatGPT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CocoaPods/">CocoaPods</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/">Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JQuery/">JQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac快速操作/">Mac快速操作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QA/">QA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/README/">README</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactNative/">ReactNative</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Script/">Script</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Weex/">Weex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/h5与app交互/">h5与app交互</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npmjs/">npmjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/上架相关/">上架相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/交互/">交互</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/埋点/">埋点</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基类/">基类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安全/">安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实用工具/">实用工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作常识/">工作常识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/打包/">打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术常识/">技术常识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/抓包/">抓包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索相关/">搜索相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文档管理/">文档管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/权限相关/">权限相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构模式/">架构模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境搭建/">环境搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活常识/">生活常识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电脑使用/">电脑使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/瘦身/">瘦身</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/登录页实战/">登录页实战</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/破解/">破解</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动分析/">移动分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/管理相关/">管理相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程工具/">编程工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动化/">自动化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语言/">语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/请求/">请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨平台/">跨平台</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路由及跳转/">路由及跳转</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云/">阿里云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云oss/">阿里云oss</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集成/">集成</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI/" style="font-size: 10.77px;">AI</a> <a href="/tags/Architecture/" style="font-size: 20px;">Architecture</a> <a href="/tags/ChatGPT/" style="font-size: 10.77px;">ChatGPT</a> <a href="/tags/CocoaPods/" style="font-size: 10px;">CocoaPods</a> <a href="/tags/Flutter/" style="font-size: 18.46px;">Flutter</a> <a href="/tags/Git/" style="font-size: 13.85px;">Git</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Jenkins/" style="font-size: 14.62px;">Jenkins</a> <a href="/tags/Mac快速操作/" style="font-size: 10px;">Mac快速操作</a> <a href="/tags/Python/" style="font-size: 11.54px;">Python</a> <a href="/tags/QA/" style="font-size: 10px;">QA</a> <a href="/tags/README/" style="font-size: 10px;">README</a> <a href="/tags/React/" style="font-size: 10.77px;">React</a> <a href="/tags/ReactNative/" style="font-size: 16.15px;">ReactNative</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Script/" style="font-size: 15.38px;">Script</a> <a href="/tags/Shell/" style="font-size: 11.54px;">Shell</a> <a href="/tags/Swift/" style="font-size: 12.31px;">Swift</a> <a href="/tags/Weex/" style="font-size: 10px;">Weex</a> <a href="/tags/h5与app交互/" style="font-size: 12.31px;">h5与app交互</a> <a href="/tags/iOS/" style="font-size: 17.69px;">iOS</a> <a href="/tags/npmjs/" style="font-size: 10.77px;">npmjs</a> <a href="/tags/上架相关/" style="font-size: 10px;">上架相关</a> <a href="/tags/交互/" style="font-size: 12.31px;">交互</a> <a href="/tags/埋点/" style="font-size: 10.77px;">埋点</a> <a href="/tags/基类/" style="font-size: 10.77px;">基类</a> <a href="/tags/安全/" style="font-size: 14.62px;">安全</a> <a href="/tags/实用工具/" style="font-size: 16.92px;">实用工具</a> <a href="/tags/工作常识/" style="font-size: 10px;">工作常识</a> <a href="/tags/打包/" style="font-size: 10px;">打包</a> <a href="/tags/技术常识/" style="font-size: 14.62px;">技术常识</a> <a href="/tags/抓包/" style="font-size: 10px;">抓包</a> <a href="/tags/搜索相关/" style="font-size: 10px;">搜索相关</a> <a href="/tags/文档管理/" style="font-size: 14.62px;">文档管理</a> <a href="/tags/权限相关/" style="font-size: 10px;">权限相关</a> <a href="/tags/架构模式/" style="font-size: 11.54px;">架构模式</a> <a href="/tags/环境搭建/" style="font-size: 10.77px;">环境搭建</a> <a href="/tags/生活常识/" style="font-size: 10px;">生活常识</a> <a href="/tags/电脑使用/" style="font-size: 10.77px;">电脑使用</a> <a href="/tags/瘦身/" style="font-size: 11.54px;">瘦身</a> <a href="/tags/登录页实战/" style="font-size: 12.31px;">登录页实战</a> <a href="/tags/破解/" style="font-size: 11.54px;">破解</a> <a href="/tags/移动分析/" style="font-size: 11.54px;">移动分析</a> <a href="/tags/管理相关/" style="font-size: 12.31px;">管理相关</a> <a href="/tags/编程工具/" style="font-size: 13.08px;">编程工具</a> <a href="/tags/自动化/" style="font-size: 11.54px;">自动化</a> <a href="/tags/语言/" style="font-size: 10px;">语言</a> <a href="/tags/请求/" style="font-size: 10.77px;">请求</a> <a href="/tags/跨平台/" style="font-size: 19.23px;">跨平台</a> <a href="/tags/路由及跳转/" style="font-size: 11.54px;">路由及跳转</a> <a href="/tags/阿里云/" style="font-size: 10px;">阿里云</a> <a href="/tags/阿里云oss/" style="font-size: 13.85px;">阿里云oss</a> <a href="/tags/集成/" style="font-size: 11.54px;">集成</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/代码管理/库管理/homebrew/">(no title)</a>
          </li>
        
          <li>
            <a href="/AI/ComfyUI入门/">ComfyUI入门</a>
          </li>
        
          <li>
            <a href="/Architecture架构/架构相关/3组件化/5框架设计模式-⑦组件化/">框架设计模式-⑦组件化</a>
          </li>
        
          <li>
            <a href="/Architecture架构/监控相关/日志系统/">日志系统</a>
          </li>
        
          <li>
            <a href="/总目录/">总目录</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 dvlproad<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>